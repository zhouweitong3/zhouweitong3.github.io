{"version":"https://jsonfeed.org/version/1","name":"CodingBox技术博客","home_page_url":"https://zhouweitong3.github.io","feed_url":"https://zhouweitong3.github.io/feed.json","author":{"name":"Zhou Weitong"},"items":[{"id":"https://zhouweitong3.github.io/2021/06/19/011-rime-1-intro/","url":"https://zhouweitong3.github.io/2021/06/19/011-rime-1-intro/","title":"【WIP】Rime（1）：介绍与安装","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><h2 id=\"什么是 -Rime？\"><a href=\"# 什么是 -Rime？\" class=\"headerlink\" title=\"什么是 Rime？\"></a>什么是 Rime？</h2><p>RIME，官方中文名称为“中州韻”（即“中州韵”，中原之韵），是一款开源的轻量的跨平台输入法库，由佛振等人开发。源代码现托管在 Github 上：<a href=\"https://github.com/rime/librime\">rime/librime</a>。Rime 具有很强的扩展性和可定制性——你可以使用 Lua <strong>编写它的插件 </strong>，也可以通过自定义配置文件实现自己研发的、更加高效的<strong> 汉字输入方案 </strong>，或者实现<strong> 多语言混合输入 </strong>，又或者你只是想在各个平台上获得<strong> 统一的文字输入体验</strong>。这一特性使得强大的 Rime 在使用上拥有无限的可能性。本文是 Rime 系列的第一篇，主要记录 Rime 在各个平台下的安装，及其基础的使用方法。</p>\n<h2 id=\"如何安装 -Rime？\"><a href=\"# 如何安装 -Rime？\" class=\"headerlink\" title=\"如何安装 Rime？\"></a>如何安装 Rime？</h2><p>Librime 是一个开源的输入法库。库像是一种”后端“，不能直接用于文字输入。需要和配套的“前端”一起使用。“前端”也已有不少实现，列举使用人数较多的输入法“前端”如下：</p>\n<ul>\n<li><a href=\"https://github.com/rime/squirrel\">rime/squirrel</a>，中文名为“鼠须管”，macOS 下的输入法前端；</li>\n<li><a href=\"https://github.com/rime/weasel\">rime/weasel</a>，中文名为“小狼毫”，Windows 下的输入法前端；</li>\n<li><a href=\"https://github.com/osfans/trime\">osfans/trime</a>，中文名为“同文输入法”，Android 下的输入法前端；</li>\n<li><a href=\"https://github.com/jimmy54/iRime\">jimmy54/iRime</a>，中文名为“iRime 输入法”，iOS 下的输入法前端，注意有应用内购付费，而且有人反映其并未严格按照 Rime 前端统一的规范加载配置文件；</li>\n<li><a href=\"https://github.com/rime/ibus-rime\">rime/ibus-rime</a>，Linux 下的输入法前端，基于 IBus；</li>\n<li><a href=\"https://github.com/fcitx/fcitx-rime\">fcitx-rime</a>，Linux 下的输入法前端，基于 Fcitx</li>\n</ul>\n<p>或者你也可以利用 librime，编写自己的输入法前端。</p>\n<h3 id=\"Windows-Weasel\"><a href=\"#Windows-Weasel\" class=\"headerlink\" title=\"Windows - Weasel\"></a>Windows - Weasel</h3><p>Weasel 可以直接在 Rime 的官网下载安装，也可以手动编译安装。截止本文写作之时，Rime 官方发布的稳定版本为 0.14.3，采用 librime 1.5.3 版本，更新于 2019 年 6 月 22 日。而 librime 的最新版本已迭代至了 1.7.2，修复了不少错误并且向后兼容。因此强烈推荐手动编译新版本并安装。</p>\n<p>编译所需环境：</p>\n<ul>\n<li>Visual Studio 2017</li>\n<li>Boost 1.69.0</li>\n<li>CMake</li>\n<li>NSIS</li>\n<li>Git、7z、Wget for Windows 等常见工具</li>\n</ul>\n<p>下面简单叙述步骤。</p>\n<span id=\"more\"></span>\n\n<p>第一步：Clone 项目，下载并更新子模块为最新。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git clone --recursive https://github.com/rime/weasel.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> weasel\\</span><br><span class=\"line\">git submodule update --remote --recursive</span><br></pre></td></tr></table></figure>\n\n<p>第二步：修正 NSIS 配置文件错误。找到<code>output\\install.nsi</code>，修改第 159 行的：</p>\n<figure class=\"highlight nsis\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">File</span> <span class=\"string\">&quot;data\\opencc\\*.ocd&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>为：</p>\n<figure class=\"highlight nsis\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">File</span> <span class=\"string\">&quot;data\\opencc\\*.ocd2&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>这是因为新版本的 opencc 使用 ocd2 作为字典格式，而不是老版本的 ocd 格式。</p>\n<p>第三步：设置环境变量。包括编译器版本、工具集、Boost 位置、librime 编译成品的版本号（可从 <a href=\"https://github.com/rime/librime/releases\">librime 的 Release 页</a> 查询）、下载链接等。根据实际情况和版本需要进行修改。</p>\n<p>如果你不想通过命令行下载 librime，也可使用浏览器下载后，参照第四步所述命令手动将所需文件放置于指定位置。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">set</span> BOOST_ROOT=C:\\Libraries\\boost_1_69_0</span><br><span class=\"line\"><span class=\"built_in\">set</span> CMAKE_GENERATOR=&quot;Visual Studio <span class=\"number\">15</span> <span class=\"number\">2017</span>&quot;</span><br><span class=\"line\"><span class=\"built_in\">set</span> PLATFORM_TOOLSET=v141_xp</span><br><span class=\"line\"><span class=\"built_in\">set</span> rime_version=<span class=\"number\">1</span>.<span class=\"number\">7</span>.<span class=\"number\">3</span></span><br><span class=\"line\"><span class=\"built_in\">set</span> rime_variant=rime-with-plugins</span><br><span class=\"line\"><span class=\"built_in\">set</span> download_archive=<span class=\"variable\">%rime_variant%</span>-<span class=\"variable\">%rime_version%</span>-win32.zip</span><br><span class=\"line\"><span class=\"built_in\">set</span> WEASEL_BUILD=<span class=\"number\">20210309</span></span><br></pre></td></tr></table></figure>\n\n<p>推荐下载支持 Lua 插件扩展的 rime-with-plugin 版本。</p>\n<p>第四步：下载编译好的 librime 并复制文件。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/rime/librime/releases/download/<span class=\"variable\">%rime_version%</span>/<span class=\"variable\">%download_archive%</span></span><br><span class=\"line\"><span class=\"number\">7</span>z x <span class=\"variable\">%download_archive%</span> * -y -olibrime</span><br><span class=\"line\"><span class=\"built_in\">copy</span> /Y librime\\dist\\include\\rime_*.h include\\</span><br><span class=\"line\"><span class=\"built_in\">copy</span> /Y librime\\dist\\lib\\rime.lib lib\\</span><br><span class=\"line\"><span class=\"built_in\">copy</span> /Y librime\\dist\\lib\\rime.dll output\\</span><br><span class=\"line\"><span class=\"keyword\">if</span> <span class=\"keyword\">not</span> <span class=\"keyword\">exist</span> output\\data\\opencc <span class=\"built_in\">mkdir</span> output\\data\\opencc</span><br><span class=\"line\"><span class=\"built_in\">copy</span> /Y librime\\thirdparty\\share\\opencc\\*.* output\\data\\opencc\\</span><br></pre></td></tr></table></figure>\n\n<p>第五步：编译 Boost 环境。直接使用为 AppVeyor 编写的编译脚本即可。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\appveyor_build_boost.bat</span><br></pre></td></tr></table></figure>\n\n<p>第六步：编译主程序。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.\\build.bat data hant weasel installer</span><br></pre></td></tr></table></figure>\n\n<p>随后在 output 文件夹中即可找到编译完成的安装文件。双击进行安装即可。</p>\n<p>安装完成后，需要留意以下两个路径：</p>\n<ul>\n<li><p>安装路径：默认为<code>C:\\Program Files (x86)\\Rime\\weasel-$ 版本号 \\</code></p>\n</li>\n<li><p>用户数据路径：默认为<code>C:\\Users\\$ 用户名 \\AppData\\Roaming\\Rime</code></p>\n</li>\n</ul>\n<p>这两个路径对后续 Rime 的配置有很大用处。</p>\n<h3 id=\"Linux-Ibus-rime\"><a href=\"#Linux-Ibus-rime\" class=\"headerlink\" title=\"Linux - Ibus-rime\"></a>Linux - Ibus-rime</h3><p>Linux 下的前端有两个，一个是基于 Fcitx 的 fcitx-rime，既支持 Fcitx 4，也支持新开发的 Fcitx 5。但缺点是 <strong> 无法同步输入法的用户数据</strong>。另一个是基于的 Ibus 的 ibus-rime，可以同步输入法的用户数据。以下以 Ubuntu 环境为例，配置 ibus 和 ibus-rime。</p>\n","content_text":"什么是 Rime？RIME，官方中文名称为“中州韻”（即“中州韵”，中原之韵），是一款开源的轻量的跨平台输入法库，由佛振等人开发。源代码现托管在 Github 上：rime/librime。Rime 具有很强的扩展性和可定制性——你可以使用 Lua 编写它的插件 ，也可以通过自定义配置文件实现自己研发的、更加高效的 汉字输入方案 ，或者实现 多语言混合输入 ，又或者你只是想在各个平台上获得 统一的文字输入体验。这一特性使得强大的 Rime 在使用上拥有无限的可能性。本文是 Rime 系列的第一篇，主要记录 Rime 在各个平台下的安装，及其基础的使用方法。 如何安装 Rime？Librime 是一个开源的输入法库。库像是一种”后端“，不能直接用于文字输入。需要和配套的“前端”一起使用。“前端”也已有不少实现，列举使用人数较多的输入法“前端”如下： rime/squirrel，中文名为“鼠须管”，macOS 下的输入法前端； rime/weasel，中文名为“小狼毫”，Windows 下的输入法前端； osfans/trime，中文名为“同文输入法”，Android 下的输入法前端； jimmy54/iRime，中文名为“iRime 输入法”，iOS 下的输入法前端，注意有应用内购付费，而且有人反映其并未严格按照 Rime 前端统一的规范加载配置文件； rime/ibus-rime，Linux 下的输入法前端，基于 IBus； fcitx-rime，Linux 下的输入法前端，基于 Fcitx 或者你也可以利用 librime，编写自己的输入法前端。 Windows - WeaselWeasel 可以直接在 Rime 的官网下载安装，也可以手动编译安装。截止本文写作之时，Rime 官方发布的稳定版本为 0.14.3，采用 librime 1.5.3 版本，更新于 2019 年 6 月 22 日。而 librime 的最新版本已迭代至了 1.7.2，修复了不少错误并且向后兼容。因此强烈推荐手动编译新版本并安装。 编译所需环境： Visual Studio 2017 Boost 1.69.0 CMake NSIS Git、7z、Wget for Windows 等常见工具 下面简单叙述步骤。 第一步：Clone 项目，下载并更新子模块为最新。 123git clone --recursive https://github.com/rime/weasel.gitcd weasel\\git submodule update --remote --recursive 第二步：修正 NSIS 配置文件错误。找到output\\install.nsi，修改第 159 行的： 1File &quot;data\\opencc\\*.ocd&quot; 为： 1File &quot;data\\opencc\\*.ocd2&quot; 这是因为新版本的 opencc 使用 ocd2 作为字典格式，而不是老版本的 ocd 格式。 第三步：设置环境变量。包括编译器版本、工具集、Boost 位置、librime 编译成品的版本号（可从 librime 的 Release 页 查询）、下载链接等。根据实际情况和版本需要进行修改。 如果你不想通过命令行下载 librime，也可使用浏览器下载后，参照第四步所述命令手动将所需文件放置于指定位置。 1234567set BOOST_ROOT=C:\\Libraries\\boost_1_69_0set CMAKE_GENERATOR=&quot;Visual Studio 15 2017&quot;set PLATFORM_TOOLSET=v141_xpset rime_version=1.7.3set rime_variant=rime-with-pluginsset download_archive=%rime_variant%-%rime_version%-win32.zipset WEASEL_BUILD=20210309 推荐下载支持 Lua 插件扩展的 rime-with-plugin 版本。 第四步：下载编译好的 librime 并复制文件。 1234567wget https://github.com/rime/librime/releases/download/%rime_version%/%download_archive%7z x %download_archive% * -y -olibrimecopy /Y librime\\dist\\include\\rime_*.h include\\copy /Y librime\\dist\\lib\\rime.lib lib\\copy /Y librime\\dist\\lib\\rime.dll output\\if not exist output\\data\\opencc mkdir output\\data\\opencccopy /Y librime\\thirdparty\\share\\opencc\\*.* output\\data\\opencc\\ 第五步：编译 Boost 环境。直接使用为 AppVeyor 编写的编译脚本即可。 1.\\appveyor_build_boost.bat 第六步：编译主程序。 1.\\build.bat data hant weasel installer 随后在 output 文件夹中即可找到编译完成的安装文件。双击进行安装即可。 安装完成后，需要留意以下两个路径： 安装路径：默认为C:\\Program Files (x86)\\Rime\\weasel-$ 版本号 \\ 用户数据路径：默认为C:\\Users\\$ 用户名 \\AppData\\Roaming\\Rime 这两个路径对后续 Rime 的配置有很大用处。 Linux - Ibus-rimeLinux 下的前端有两个，一个是基于 Fcitx 的 fcitx-rime，既支持 Fcitx 4，也支持新开发的 Fcitx 5。但缺点是 无法同步输入法的用户数据。另一个是基于的 Ibus 的 ibus-rime，可以同步输入法的用户数据。以下以 Ubuntu 环境为例，配置 ibus 和 ibus-rime。","summary":"什么是 Rime？RIME，官方中文名称为“中州韻”（即“中州韵”，中原之韵），是一款开源的轻量的跨平台输入法库，由佛振等人开发。源代码现托管在 Github 上：rime/librime。Rime 具有很强的扩展性和可定制性——你可以使用 Lua 编写它的插件，也可以通过自定义配置文件实现自己研发的、更加高效的汉字输入方案，或者实现多语言混合输入，又或者你只是想在各个平台上获得统一的文字输入体验。这一特性使得强大的 Rime 在使用上拥有无限的可能性。本文是 Rime 系列的第一篇，主要记录 Rime 在各个平台下的安装，及其基础的使用方法。 如何安装 Rime？Librime 是一个开源的输入法库。库像是一种”后端“，不能直接用于文字输入。需要和配套的“前端”一起使用。“前端”也已有不少实现，列举使用人数较多的输入法“前端”如下： rime/squirrel，中文名为“鼠须管”，macOS 下的输入法前端； rime/weasel，中文名为“小狼毫”，Windows 下的输入法前端； osfans/trime，中文名为“同文输入法”，Android 下的输入法前端； jimmy54/iRime，中文名为“iRime输入法”，iOS 下的输入法前端，注意有应用内购付费，而且有人反映其并未严格按照Rime前端统一的规范加载配置文件； rime/ibus-rime，Linux 下的输入法前端，基于 IBus； fcitx-rime，Linux 下的输入法前端，基于 Fcitx 或者你也可以利用librime，编写自己的输入法前端。 Windows - WeaselWeasel可以直接在Rime的官网下载安装，也可以手动编译安装。截止本文写作之时，Rime官方发布的稳定版本为0.14.3，采用librime 1.5.3版本，更新于2019年6月22日。而librime的最新版本已迭代至了1.7.2，修复了不少错误并且向后兼容。因此强烈推荐手动编译新版本并安装。 编译所需环境： Visual Studio 2017 Boost 1.69.0 CMake NSIS Git、7z、Wget for Windows等常见工具 下面简单叙述步骤。","date_published":"2021-06-19T10:00:00.000Z","tags":["输入法","WIP","Rime"]},{"id":"https://zhouweitong3.github.io/2021/03/30/027-cmu-cg-note-1/","url":"https://zhouweitong3.github.io/2021/03/30/027-cmu-cg-note-1/","title":"【WIP】CMU 15-462 笔记 Part.1","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><p>图片来源：@Lifeline    <a href=\"https://www.pixiv.net/artworks/88401620\">88401620</a></p>\n<p><strong>增补（感谢 @oyiadin）：本系列笔记将添加《Games 101：现代计算机图形学入门》、《Games 102：几何建模与处理》、“龙书”（《Introduction to 3D Game Programming with DirectX 12》）三个额外来源的笔记。大段的非 CMU 课程的笔记会在显著位置标识。</strong></p>\n<h2 id=\"Lecture-1\"><a href=\"#Lecture-1\" class=\"headerlink\" title=\"Lecture 1\"></a>Lecture 1</h2><h3 id=\"什么是计算机图形学\"><a href=\"# 什么是计算机图形学\" class=\"headerlink\" title=\"什么是计算机图形学\"></a>什么是计算机图形学 </h3><p> 计算机图形学：利用计算机合成视觉信息或利用计算机合成 / 操控感官信息的学科。</p>\n<h3 id=\"计算机图形学的应用\"><a href=\"# 计算机图形学的应用\" class=\"headerlink\" title=\"计算机图形学的应用\"></a>计算机图形学的应用</h3><ul>\n<li><p>影视</p>\n</li>\n<li><p>动画</p>\n</li>\n<li><p>游戏</p>\n</li>\n<li><p>数据可视化</p>\n</li>\n<li><p>工业设计，平面设计</p>\n</li>\n<li><p>数字绘画</p>\n</li>\n<li><p>虚拟现实</p>\n<blockquote>\n<p>相同的内容后续整理 VR 课笔记时不再赘述。</p>\n</blockquote>\n<ul>\n<li><p>虚拟现实（VR）：指所看到的一切均为虚拟的，比如虚拟现实游戏、虚拟现实视频等。</p>\n</li>\n<li><p>增强现实（AR）：指看到的是真实的现实 + 虚拟的、对当前现实进行分析处理或修改等生成的虚拟事物，比如 Apple ARkit。</p>\n</li>\n<li><p>混合现实（MR）：VR + AR，使用类似 VR 的手段，达到 AR 这种结合当前现实与虚拟事物的效果，比如 Hololens。</p>\n</li>\n</ul>\n</li>\n<li><p>制造业（3D 打印）</p>\n</li>\n<li><p>模拟</p>\n</li>\n<li><p>排版与字体设计</p>\n<ul>\n<li><p>“The Quick Brown Fox Jumps Over The Lazy Dog”：一句有意义的英文句子，内含全部的 26 个英文字母，常用来对字体（字形、字号、间距等）进行测试。</p>\n</li>\n<li><p>“Lorem ipsum dolor sit amet, consectetur adipisicing elit.”：又叫“乱数假文”或者“哑元文本”。主要的目的为测试文章或文字在不同字型、版型下看起来的效果。更多资料请查阅：<a href=\"https://cn.lipsum.com/\">https://cn.lipsum.com/</a>。</p>\n</li>\n</ul>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n<h3 id=\"计算机图形学与计算机视觉的区别\"><a href=\"# 计算机图形学与计算机视觉的区别\" class=\"headerlink\" title=\"计算机图形学与计算机视觉的区别\"></a>计算机图形学与计算机视觉的区别 </h3><p> 计算机图形学：将数据转化为图形。也就是“画出来”。</p>\n<p>计算机视觉：将图形转化为数据。也就是“看到”。</p>\n<h3 id=\"计算机图形学需要哪些基础\"><a href=\"# 计算机图形学需要哪些基础\" class=\"headerlink\" title=\"计算机图形学需要哪些基础\"></a>计算机图形学需要哪些基础</h3><ul>\n<li><p>表示方法（编码）</p>\n</li>\n<li><p>采样与混叠</p>\n</li>\n<li><p>数学方法（表示动态和三位形体）</p>\n</li>\n<li><p>光线</p>\n</li>\n<li><p>透视</p>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n<h3 id=\"对正方体建个模？\"><a href=\"# 对正方体建个模？\" class=\"headerlink\" title=\"对正方体建个模？\"></a>对正方体建个模？</h3><ul>\n<li><p>如何表示</p>\n<ul>\n<li><p>顶点：利用坐标</p>\n</li>\n<li><p>边：利用边的两个顶点唯一确定</p>\n</li>\n</ul>\n</li>\n<li><p>如何绘制</p>\n<ul>\n<li><p>三维图形转化为二维图形：小孔成像模型</p>\n<p>设相机坐标为 $(a,b,c)$ ，待确定点的坐标为 $(x,y,z)$ 。要得到该点在二维平面上的坐标，可进行如下算法步骤：</p>\n<ol>\n<li><p>$(x,y,z)$ 与 $(a,b,c)$ 相减，得到原三维点与摄像机的相对位置；</p>\n</li>\n<li><p>将其中的 $(x,y)$ 与 $z$ 相除，得到 $(\\frac{x}{z},\\frac{y}{z})$，即是所求的 $(u,v)$。</p>\n</li>\n</ol>\n</li>\n<li><p>连线。这就要细说到电脑如何绘制直线。</p>\n</li>\n</ul>\n</li>\n</ul>\n<span id=\"more\"></span>\n\n<h3 id=\"计算机怎么划线？\"><a href=\"# 计算机怎么划线？\" class=\"headerlink\" title=\"计算机怎么划线？\"></a>计算机怎么划线？</h3><p>先得知道计算机怎么显示图像：“光栅显示器”。</p>\n<p>特点：</p>\n<ul>\n<li><p>图像表示为由 <strong> 像素 </strong> 组成的二维网格。</p>\n</li>\n<li><p>每个像素可拥有不同的颜色值。</p>\n</li>\n</ul>\n<h4 id=\"光栅化\"><a href=\"# 光栅化\" class=\"headerlink\" title=\"光栅化\"></a>光栅化 </h4><p> 将连续的物体转换为离散的像素在光栅网格上的表示（即由栅格组成的图像）的过程。也即把顶点数据转换为片元的过程。</p>\n<h4 id=\"怎么光栅化？（简单讨论无粗细的直线）\"><a href=\"# 怎么光栅化？（简单讨论无粗细的直线）\" class=\"headerlink\" title=\"怎么光栅化？（简单讨论无粗细的直线）\"></a>怎么光栅化？（简单讨论无粗细的直线）</h4><ul>\n<li><p>直接的想法：只要原始的连续物体触及了某个像素，该像素就应该显示。缺点：误差大。</p>\n</li>\n<li><p>在部分图形 API 中的实现：菱形测试区域法。</p>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n<p>资料：\n<a href=\"https://docs.microsoft.com/zh-cn/windows/uwp/graphics-concepts/rasterization-rules\">https://docs.microsoft.com/zh-cn/windows/uwp/graphics-concepts/rasterization-rules</a></p>\n<p>不一定是最优解：看需求。通过需求挑选不同的算法。</p>\n<p>除了误差（锯齿），覆盖率也是衡量光栅化效果的重要指标之一。</p>\n<h4 id=\"怎么找到对应的栅格（像素）？\"><a href=\"# 怎么找到对应的栅格（像素）？\" class=\"headerlink\" title=\"怎么找到对应的栅格（像素）？\"></a>怎么找到对应的栅格（像素）？</h4><ul>\n<li><p>暴力方法：遍历每一个像素，判断是否满足显示要求，满足就点亮进行显示。缺点：速度极慢。</p>\n</li>\n<li><p>“增值行光栅化”：简单的 <strong> 演示用 </strong> 自定义算法，利用直线的斜率，确定哪些像素用于显示。</p>\n<p>  设有一直线，起点为 $(u_1,v_1)$，终点为 $(u_2,v_2)$。假设有 $u_1 &lt; u_2, v_1 &lt; v_2$ 且 $0&lt;s&lt;1$。可依据如下过程寻找像素（伪代码）：</p>\n  <figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">p = (u, v);</span><br><span class=\"line\">v = v1;</span><br><span class=\"line\"><span class=\"keyword\">for</span>(u = u1; u &lt;= u2; u++) &#123;</span><br><span class=\"line\">    v += s;</span><br><span class=\"line\">    draw(u, round(v));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n</li>\n</ul>\n<p><img src=\"/2021/03/30/027-cmu-cg-note-1/image-20210411150846062.png\" alt=\"image-20210411150846062\"></p>\n<p>以上是一个虽简单但完整的 CG 流程——从表示，到计算，到光栅化，再到显示。不过现实的 CG 环境要远远比这复杂。我们没有提到一些对图像（渲染）的真实感至关重要的知识和算法，譬如：</p>\n<ul>\n<li><p>几何体，尤其是复杂几何体</p>\n</li>\n<li><p>材质，透明半透明或不透明</p>\n</li>\n<li><p>光线，照明</p>\n</li>\n<li><p>摄像机</p>\n</li>\n<li><p>运动</p>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n<h3 id=\"Games101-L1：课程四大部分\"><a href=\"#Games101-L1：课程四大部分\" class=\"headerlink\" title=\"Games101 - L1：课程四大部分\"></a>Games101 - L1：课程四大部分 </h3><p> 常见图形学 API：OpenGL，（Vulkan），DirectX</p>\n<ul>\n<li><p>光栅化</p>\n<ul>\n<li><p>将几何基元投影至屏幕上，将投影后的几何基元拆分为“像素”</p>\n</li>\n<li><p>（来源：<a href=\"https://vispy.org/getting_started/modern-gl.html\">https://vispy.org/getting_started/modern-gl.html</a>）<a href=\"https://max.book118.com/html/2016/1123/64908259.shtm\">透视投影 </a> 与<a href=\"https://en.wikipedia.org/wiki/Orthographic_projection\">平行投影</a>。</p>\n</li>\n</ul>\n</li>\n<li><p>光线追踪</p>\n<ul>\n<li><p>从相机射出光线（采样视线）打到每个像素上。</p>\n</li>\n<li><p>计算交叉（intersection）和遮挡（shading）。</p>\n</li>\n<li><p>继续弹射（bounce）光线，直到回归光源</p>\n</li>\n<li><p>参考 <a href=\"http://blog.sina.com.cn/s/blog_15f7fa13f0102wg8c.html\">http://blog.sina.com.cn/s/blog_15f7fa13f0102wg8c.html</a> 和 <a href=\"https://en.wikipedia.org/wiki/Ray_tracing_(graphics)\">https://en.wikipedia.org/wiki/Ray_tracing_(graphics)</a>。</p>\n</li>\n</ul>\n</li>\n<li><p>曲线与网格</p>\n<ul>\n<li><p>计算机图形学中表示几何体的方法。</p>\n</li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/B%C3%A9zier_curve\">贝塞尔曲线</a></p>\n</li>\n<li><p><a href=\"https://en.wikipedia.org/wiki/Catmull%E2%80%93Clark_subdivision_surface\">Catmull-Clark 细分曲面</a>，参考<a href=\"https://blog.csdn.net/McQueen_LT/article/details/106102609\">https://blog.csdn.net/McQueen_LT/article/details/106102609</a></p>\n</li>\n<li><p>Games 102</p>\n</li>\n</ul>\n</li>\n<li><p>动画与模拟</p>\n<ul>\n<li>关键帧（K 帧）动画</li>\n<li>弹簧质点（Mass Spring）系统模型，参见：<a href=\"https://zhuanlan.zhihu.com/p/79756413\">https://zhuanlan.zhihu.com/p/79756413</a></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"Games-101-L2：课程需求\"><a href=\"#Games-101-L2：课程需求\" class=\"headerlink\" title=\"Games 101 - L2：课程需求\"></a>Games 101 - L2：课程需求 </h3><h2 id=\"Lecture-2\"><a href=\"#Lecture-2\" class=\"headerlink\" title=\"Lecture 2\"></a>Lecture 2</h2><p> 对线性代数的复习课。只记重点。</p>\n<ul>\n<li><p>对向量进行处理时注意坐标系，除了是直角坐标系还是极坐标系外还要注意坐标系的原点。</p>\n</li>\n<li><p>向量基本性质：</p>\n</li>\n</ul>\n<p><img src=\"/2021/03/30/027-cmu-cg-note-1/image-20210411150910886.png\" alt=\"image-20210411150910886\"></p>\n<ul>\n<li><p>提示要有探究精神，不要一味的接受“定理”和“定义”，要去思考为什么存在这个定理，这个定理在什么情况下对什么适用，等。</p>\n</li>\n<li><p>向量可以看成一种“函数”，即矩阵类比函数的观点。</p>\n</li>\n<li><p>向量的模：也叫向量的“长度”。具有很多性质。</p>\n<ul>\n<li><p>非负性</p>\n</li>\n<li><p>连续性</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/2021/03/30/027-cmu-cg-note-1/image-20210411150926529.png\" alt=\"image-20210411150926529\"></p>\n","content_text":"图片来源：@Lifeline 88401620 增补（感谢 @oyiadin）：本系列笔记将添加《Games 101：现代计算机图形学入门》、《Games 102：几何建模与处理》、“龙书”（《Introduction to 3D Game Programming with DirectX 12》）三个额外来源的笔记。大段的非 CMU 课程的笔记会在显著位置标识。 Lecture 1什么是计算机图形学 计算机图形学：利用计算机合成视觉信息或利用计算机合成 / 操控感官信息的学科。 计算机图形学的应用 影视 动画 游戏 数据可视化 工业设计，平面设计 数字绘画 虚拟现实 相同的内容后续整理 VR 课笔记时不再赘述。 虚拟现实（VR）：指所看到的一切均为虚拟的，比如虚拟现实游戏、虚拟现实视频等。 增强现实（AR）：指看到的是真实的现实 + 虚拟的、对当前现实进行分析处理或修改等生成的虚拟事物，比如 Apple ARkit。 混合现实（MR）：VR + AR，使用类似 VR 的手段，达到 AR 这种结合当前现实与虚拟事物的效果，比如 Hololens。 制造业（3D 打印） 模拟 排版与字体设计 “The Quick Brown Fox Jumps Over The Lazy Dog”：一句有意义的英文句子，内含全部的 26 个英文字母，常用来对字体（字形、字号、间距等）进行测试。 “Lorem ipsum dolor sit amet, consectetur adipisicing elit.”：又叫“乱数假文”或者“哑元文本”。主要的目的为测试文章或文字在不同字型、版型下看起来的效果。更多资料请查阅：https://cn.lipsum.com/。 …… 计算机图形学与计算机视觉的区别 计算机图形学：将数据转化为图形。也就是“画出来”。 计算机视觉：将图形转化为数据。也就是“看到”。 计算机图形学需要哪些基础 表示方法（编码） 采样与混叠 数学方法（表示动态和三位形体） 光线 透视 …… 对正方体建个模？ 如何表示 顶点：利用坐标 边：利用边的两个顶点唯一确定 如何绘制 三维图形转化为二维图形：小孔成像模型 设相机坐标为 $(a,b,c)$ ，待确定点的坐标为 $(x,y,z)$ 。要得到该点在二维平面上的坐标，可进行如下算法步骤： $(x,y,z)$ 与 $(a,b,c)$ 相减，得到原三维点与摄像机的相对位置； 将其中的 $(x,y)$ 与 $z$ 相除，得到 $(\\frac{x}{z},\\frac{y}{z})$，即是所求的 $(u,v)$。 连线。这就要细说到电脑如何绘制直线。 计算机怎么划线？先得知道计算机怎么显示图像：“光栅显示器”。 特点： 图像表示为由 像素 组成的二维网格。 每个像素可拥有不同的颜色值。 光栅化 将连续的物体转换为离散的像素在光栅网格上的表示（即由栅格组成的图像）的过程。也即把顶点数据转换为片元的过程。 怎么光栅化？（简单讨论无粗细的直线） 直接的想法：只要原始的连续物体触及了某个像素，该像素就应该显示。缺点：误差大。 在部分图形 API 中的实现：菱形测试区域法。 …… 资料： https://docs.microsoft.com/zh-cn/windows/uwp/graphics-concepts/rasterization-rules 不一定是最优解：看需求。通过需求挑选不同的算法。 除了误差（锯齿），覆盖率也是衡量光栅化效果的重要指标之一。 怎么找到对应的栅格（像素）？ 暴力方法：遍历每一个像素，判断是否满足显示要求，满足就点亮进行显示。缺点：速度极慢。 “增值行光栅化”：简单的 演示用 自定义算法，利用直线的斜率，确定哪些像素用于显示。 设有一直线，起点为 $(u_1,v_1)$，终点为 $(u_2,v_2)$。假设有 $u_1 &lt; u_2, v_1 &lt; v_2$ 且 $0&lt;s&lt;1$。可依据如下过程寻找像素（伪代码）： 123456p = (u, v);v = v1;for(u = u1; u &lt;= u2; u++) &#123; v += s; draw(u, round(v));&#125; 以上是一个虽简单但完整的 CG 流程——从表示，到计算，到光栅化，再到显示。不过现实的 CG 环境要远远比这复杂。我们没有提到一些对图像（渲染）的真实感至关重要的知识和算法，譬如： 几何体，尤其是复杂几何体 材质，透明半透明或不透明 光线，照明 摄像机 运动 …… Games101 - L1：课程四大部分 常见图形学 API：OpenGL，（Vulkan），DirectX 光栅化 将几何基元投影至屏幕上，将投影后的几何基元拆分为“像素” （来源：https://vispy.org/getting_started/modern-gl.html）透视投影 与平行投影。 光线追踪 从相机射出光线（采样视线）打到每个像素上。 计算交叉（intersection）和遮挡（shading）。 继续弹射（bounce）光线，直到回归光源 参考 http://blog.sina.com.cn/s/blog_15f7fa13f0102wg8c.html 和 https://en.wikipedia.org/wiki/Ray_tracing_(graphics)。 曲线与网格 计算机图形学中表示几何体的方法。 贝塞尔曲线 Catmull-Clark 细分曲面，参考https://blog.csdn.net/McQueen_LT/article/details/106102609 Games 102 动画与模拟 关键帧（K 帧）动画 弹簧质点（Mass Spring）系统模型，参见：https://zhuanlan.zhihu.com/p/79756413 Games 101 - L2：课程需求 Lecture 2 对线性代数的复习课。只记重点。 对向量进行处理时注意坐标系，除了是直角坐标系还是极坐标系外还要注意坐标系的原点。 向量基本性质： 提示要有探究精神，不要一味的接受“定理”和“定义”，要去思考为什么存在这个定理，这个定理在什么情况下对什么适用，等。 向量可以看成一种“函数”，即矩阵类比函数的观点。 向量的模：也叫向量的“长度”。具有很多性质。 非负性 连续性","summary":"图片来源：@Lifeline 88401620 增补（感谢@oyiadin）：本系列笔记将添加《Games 101：现代计算机图形学入门》、《Games 102：几何建模与处理》、“龙书”（《Introduction to 3D Game Programming with DirectX 12》）三个额外来源的笔记。大段的非CMU课程的笔记会在显著位置标识。 Lecture 1什么是计算机图形学计算机图形学：利用计算机合成视觉信息或利用计算机合成/操控感官信息的学科。 计算机图形学的应用 影视 动画 游戏 数据可视化 工业设计，平面设计 数字绘画 虚拟现实 相同的内容后续整理VR课笔记时不再赘述。 虚拟现实（VR）：指所看到的一切均为虚拟的，比如虚拟现实游戏、虚拟现实视频等。 增强现实（AR）：指看到的是真实的现实 + 虚拟的、对当前现实进行分析处理或修改等生成的虚拟事物，比如Apple ARkit。 混合现实（MR）：VR + AR，使用类似VR的手段，达到AR这种结合当前现实与虚拟事物的效果，比如Hololens。 制造业（3D打印） 模拟 排版与字体设计 “The Quick Brown Fox Jumps Over The Lazy Dog”：一句有意义的英文句子，内含全部的26个英文字母，常用来对字体（字形、字号、间距等）进行测试。 “Lorem ipsum dolor sit amet, consectetur adipisicing elit.”：又叫“乱数假文”或者“哑元文本”。主要的目的为测试文章或文字在不同字型、版型下看起来的效果。更多资料请查阅：https://cn.lipsum.com/。 …… 计算机图形学与计算机视觉的区别计算机图形学：将数据转化为图形。也就是“画出来”。 计算机视觉：将图形转化为数据。也就是“看到”。 计算机图形学需要哪些基础 表示方法（编码） 采样与混叠 数学方法（表示动态和三位形体） 光线 透视 …… 对正方体建个模？ 如何表示 顶点：利用坐标 边：利用边的两个顶点唯一确定 如何绘制 三维图形转化为二维图形：小孔成像模型 设相机坐标为 $(a,b,c)$ ，待确定点的坐标为 $(x,y,z)$ 。要得到该点在二维平面上的坐标，可进行如下算法步骤： $(x,y,z)$ 与 $(a,b,c)$ 相减，得到原三维点与摄像机的相对位置； 将其中的 $(x,y)$ 与 $z$ 相除，得到 $(\\frac{x}{z},\\frac{y}{z})$，即是所求的 $(u,v)$。 连线。这就要细说到电脑如何绘制直线。","date_published":"2021-03-30T05:00:00.000Z","tags":["CG","笔记","WIP","CG"]},{"id":"https://zhouweitong3.github.io/2021/03/29/020-asus-c302-linux-installation/","url":"https://zhouweitong3.github.io/2021/03/29/020-asus-c302-linux-installation/","title":"ASUS C302CA Chromebook 安装 Linux 和 Windows","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：@山桂贰    <a href=\"https://www.pixiv.net/member_illust.php?mode=medium&illust_id=87141455\">87141455</a></p>\n<p>最近在咸鱼上淘到了一个二手的华硕 Chromebook（具体型号是 ASUS C302CA）。四核 M3-6Y30 + 8G 运行内存 + 32G eMMC 存储 + 12.5 寸触摸屏，虽然机身有少量磕碰，笔记本的转折铰链也有问题，但 800 元的价格着实实惠。</p>\n<p>机器寄过来的时候依然是原装系统（Power Wash 过的 Chrome OS）。写个文章记录一将 OS 从 Chrome OS 换成 Manjaro 和 Windows 10 的过程。</p>\n<h2 id=\"拆写保护（WP）螺丝\"><a href=\"# 拆写保护（WP）螺丝\" class=\"headerlink\" title=\"拆写保护（WP）螺丝\"></a>拆写保护（WP）螺丝</h2><p>Chromebook 的 BIOS 都是为了配合 Chrome OS 而特殊定做的，因此无法用来启动其他操作系统，没有 BIOS 设置界面，也无法升级 BIOS。但是可能是出于修理和防止可能的 BIOS 紧急固件更新，制造商仍然允许使用者解除 BIOS 的写入保护。常见的保护方式在 <a href=\"https://dev.chromium.org/chromium-os/firmware-porting-guide/firmware-ec-write-protection\">Chromium Projects Wiki</a> 里有详细说明：</p>\n<blockquote>\n<p><strong>Application Processor (AP) Firmware</strong></p>\n<p>AP firmware (also known as “SOC firmware”, “host firmware”, “main firmware” or even “BIOS”) typically resides on a SPI ROM. Protection registers on the SPI ROM are programmed to protect the read-only region, and these registers normally cannot be modified while the SPI ROM WP (write protect) pin is asserted. This pin is asserted through various physical means (see below), but with effort, users can unprotect devices they own.</p>\n<p><strong>Embedded Controller (EC) Firmware</strong></p>\n<p>The Chrome OS Embedded Controller (EC) typically has a WP input pin driven by the same hardware that generates SOC firmware write protect. While this pin is asserted, certain debug features (eg. arbitrary I2C access through host commands) are locked out. Some ECs load code from external storage, and for these ECs, RO protection works similar to SOC firmware RO protection (WP pin is asserted to EC SPI ROM). Other ECs use internal flash, and these ECs emulate SPI ROM protection registers, disabling write access to certain regions while the WP pin is asserted.</p>\n</blockquote>\n<span id=\"more\"></span>\n\n<p>解除写保护的操作在 Wiki 里同样有说明：</p>\n<blockquote>\n<p><strong>Methods of Asserting Write Protect</strong></p>\n<p>Throughout the history of Chrome OS devices, three main methods have been implemented for asserting (and removing) write protect:</p>\n<ul>\n<li>Switch - a toggle switch asserts WP to the SOC firmware SPI ROM and EC. WP can be deasserted by disassembling the device and flipping the switch.</li>\n<li>Screw - a screw shorts a pad on the PCB. While this screw is inserted, WP is asserted. WP can be deasserted by disassembling the device and removing this special screw.</li>\n<li>cr50 - a special security chip asserts the WP signal. While a battery is present on the device, the WP signal will be asserted. Disassembling the device and physically disconnecting the battery causes WP to be deasserted.</li>\n</ul>\n<p>More information about which protection method is used for a particular device, and where to locate the switch / screw, is available on the developer info page.</p>\n</blockquote>\n<p>ASUS C302CA 这个型号的超极本使用的是”Screw（螺丝）“方法，因此我们需要拆开后盖，拧下主板上的 BIOS 写保护螺丝。注意在拆卸背板的时候，有两颗螺丝藏在上侧脚垫下，需要先用工具去除脚垫再拆卸这两颗螺丝。下侧的两个脚垫下没有螺丝。如图所示，图片来源请 <a href=\"https://www.lafaspot.com/2017/03/asus-c302-internal-teardown-model-is-32.html\"> 点击此处</a>。</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/001.jpg\" class=\"\">\n\n<p>随后移除后盖，就能看到主板和电池。在主板上由小条黑布覆盖的螺丝即为写保护螺丝，小心拧下即可。位置见下图白色圈内，图片来源请 <a href=\"https://www.reddit.com/r/chromeos/comments/66dhgb/asus_flip_c302ca_write_protect_screw/\"> 点击此处</a>。</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/002.jpg\" class=\"\">\n\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/003.jpg\" class=\"\">\n\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/004.jpg\" class=\"\">\n\n<p>拧下保护螺丝后，将后盖放回拧好。之后进入 Chrome OS 开发者模式。</p>\n<h2 id=\"进入开发者模式\"><a href=\"# 进入开发者模式\" class=\"headerlink\" title=\"进入开发者模式\"></a>进入开发者模式 </h2><p> 按住键盘上的 Esc 和“刷新”键不动，然后按下电源键。这样 Chromebook 会进入“恢复”模式——有点像安卓手机上的 Recovery。</p>\n<blockquote>\n<p>此步骤开始，由于真实操作时没有保留图片，因此借用来源于网络的图片说明操作步骤。</p>\n</blockquote>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/005.png\" class=\"\">\n\n<p>同时按下键盘上的 Ctrl 键和 D 键，提示如下：</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/006.png\" class=\"\">\n\n<p>按下 Enter，系统重启：</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/007.png\" class=\"\">\n\n<p>这个时候应该会伴有一声 BIOS 提示音。这个提示音使用原版 BIOS 时是无法关闭的。为了安装其他操作系统和屏蔽该提示音，必须刷新 BIOS。</p>\n<p>随后等待 Chrome OS 重置即可。你需要重新配置和登录 Chrome OS 以启动 Shell。</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/008.png\" class=\"\">\n\n<h2 id=\"更换 BIOS 固件\"><a href=\"# 更换 BIOS 固件\" class=\"headerlink\" title=\"更换 BIOS 固件\"></a>更换 BIOS 固件 </h2><p> 使用到的是第三方维护的 BIOS，MrChromebox.tech。\n可到这里（<a href=\"https://mrchromebox.tech/#devices\">https://mrchromebox.tech/#devices</a>）查询你的 Chromebook 有没有适配。</p>\n<p>你需要准备：一个空的 U 盘</p>\n<p>下面开始操作。首先开机登录已处于开发者模式的 Chrome OS。按下组合键：<code>Ctrl + Alt + F2</code>。浏览器会打开新标签页，启动 crosh。</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/009.png\" class=\"\">\n\n<p>输入命令<code>shell</code>，回车，会启动真实的 Linux Shell。</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/010.png\" class=\"\">\n\n<p>插入空 U 盘，确保其已经挂载，随后在 Shell 内输入如下命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span></span><br><span class=\"line\">curl -LO mrchromebox.tech/firmware-util.sh</span><br><span class=\"line\">sudo install -Dt /usr/<span class=\"built_in\">local</span>/bin -m 755 firmware-util.sh</span><br><span class=\"line\">sudo firmware-util.sh</span><br></pre></td></tr></table></figure>\n\n<p>成功下载并启动脚本后，有如下界面：</p>\n<img src=\"/2021/03/29/020-asus-c302-linux-installation/011.png\" class=\"\">\n\n<p>选择第一个选项（注：标识了“Full ROM”的选项），按照提示备份 BIOS 和刷入 BIOS，重启，即可。</p>\n<h2 id=\"安装操作系统\"><a href=\"# 安装操作系统\" class=\"headerlink\" title=\"安装操作系统\"></a>安装操作系统 </h2><p> 与正常电脑安装操作系统无异。需要注意以下几点：</p>\n<ul>\n<li><p>只支持 UEFI 启动。因此诸如 Windows 7 或 Tiny Core Linux 之类的操作系统是不行的。</p>\n</li>\n<li><p>制作可启动 U 盘：Windows 系列推荐使用 Windows PE（如 <a href=\"https://www.itsk.com/forum.php?mod=viewthread&tid=415848\"> 优启通</a>），Linux 系列推荐使用<a href=\"https://rufus.akeo.ie/\">Rufus</a>。</p>\n</li>\n<li><p>需要先使用分区工具，删除 Chromebook 的 eMMC 上所有分区后再进行安装。</p>\n</li>\n<li><p>对于 C302，Linux 下驱动基本完美。Win 下驱动稍微复杂：</p>\n<ul>\n<li><p>准备有线鼠标，通过扩展坞连接到 Chromebook，临时代替触摸板。</p>\n</li>\n<li><p>链接 WiFi，然后下载安装<a href=\"https://www.iobit.com/en/driver-booster.php\">DriverBooster</a>，可检测绝大多数驱动程序。将所有可更新的驱动程序更新至最新版本。</p>\n</li>\n<li><p>到这里（<a href=\"https://github.com/coolstar/driverinstallers/tree/master/crostouchpad\">https://github.com/coolstar/driverinstallers/tree/master/crostouchpad</a>），下载安装 4.1 版本驱动。</p>\n</li>\n<li><p>触摸板可以使用。触摸屏目前无解。</p>\n</li>\n</ul>\n</li>\n<li><p>Windows 和主流 Linux 下声卡问题目前无解，可用外置 USB 声卡或蓝牙耳机代替。如果你迫切需要使用 Chromebook 的内置扬声器，请安装<a href=\"https://galliumos.org/\">GalliumOS</a>。</p>\n</li>\n<li><p>内置 eMMC 存储空间较小。可通过 SD 卡槽插入 SD 卡（推荐 Class10 或更高），结合软链接（<a href=\"https://man7.org/linux/man-pages/man1/ln.1.html\">Linux</a>、<a href=\"https://schinagl.priv.at/nt/hardlinkshellext/linkshellextension.html\">Windows</a>均可）的方式保留存储空间。</p>\n</li>\n<li><p>Windows 安装时推荐启用 Compact 压缩。</p>\n</li>\n</ul>\n","content_text":"图源：@山桂贰 87141455 最近在咸鱼上淘到了一个二手的华硕 Chromebook（具体型号是 ASUS C302CA）。四核 M3-6Y30 + 8G 运行内存 + 32G eMMC 存储 + 12.5 寸触摸屏，虽然机身有少量磕碰，笔记本的转折铰链也有问题，但 800 元的价格着实实惠。 机器寄过来的时候依然是原装系统（Power Wash 过的 Chrome OS）。写个文章记录一将 OS 从 Chrome OS 换成 Manjaro 和 Windows 10 的过程。 拆写保护（WP）螺丝Chromebook 的 BIOS 都是为了配合 Chrome OS 而特殊定做的，因此无法用来启动其他操作系统，没有 BIOS 设置界面，也无法升级 BIOS。但是可能是出于修理和防止可能的 BIOS 紧急固件更新，制造商仍然允许使用者解除 BIOS 的写入保护。常见的保护方式在 Chromium Projects Wiki 里有详细说明： Application Processor (AP) Firmware AP firmware (also known as “SOC firmware”, “host firmware”, “main firmware” or even “BIOS”) typically resides on a SPI ROM. Protection registers on the SPI ROM are programmed to protect the read-only region, and these registers normally cannot be modified while the SPI ROM WP (write protect) pin is asserted. This pin is asserted through various physical means (see below), but with effort, users can unprotect devices they own. Embedded Controller (EC) Firmware The Chrome OS Embedded Controller (EC) typically has a WP input pin driven by the same hardware that generates SOC firmware write protect. While this pin is asserted, certain debug features (eg. arbitrary I2C access through host commands) are locked out. Some ECs load code from external storage, and for these ECs, RO protection works similar to SOC firmware RO protection (WP pin is asserted to EC SPI ROM). Other ECs use internal flash, and these ECs emulate SPI ROM protection registers, disabling write access to certain regions while the WP pin is asserted. 解除写保护的操作在 Wiki 里同样有说明： Methods of Asserting Write Protect Throughout the history of Chrome OS devices, three main methods have been implemented for asserting (and removing) write protect: Switch - a toggle switch asserts WP to the SOC firmware SPI ROM and EC. WP can be deasserted by disassembling the device and flipping the switch. Screw - a screw shorts a pad on the PCB. While this screw is inserted, WP is asserted. WP can be deasserted by disassembling the device and removing this special screw. cr50 - a special security chip asserts the WP signal. While a battery is present on the device, the WP signal will be asserted. Disassembling the device and physically disconnecting the battery causes WP to be deasserted. More information about which protection method is used for a particular device, and where to locate the switch / screw, is available on the developer info page. ASUS C302CA 这个型号的超极本使用的是”Screw（螺丝）“方法，因此我们需要拆开后盖，拧下主板上的 BIOS 写保护螺丝。注意在拆卸背板的时候，有两颗螺丝藏在上侧脚垫下，需要先用工具去除脚垫再拆卸这两颗螺丝。下侧的两个脚垫下没有螺丝。如图所示，图片来源请 点击此处。 随后移除后盖，就能看到主板和电池。在主板上由小条黑布覆盖的螺丝即为写保护螺丝，小心拧下即可。位置见下图白色圈内，图片来源请 点击此处。 拧下保护螺丝后，将后盖放回拧好。之后进入 Chrome OS 开发者模式。 进入开发者模式 按住键盘上的 Esc 和“刷新”键不动，然后按下电源键。这样 Chromebook 会进入“恢复”模式——有点像安卓手机上的 Recovery。 此步骤开始，由于真实操作时没有保留图片，因此借用来源于网络的图片说明操作步骤。 同时按下键盘上的 Ctrl 键和 D 键，提示如下： 按下 Enter，系统重启： 这个时候应该会伴有一声 BIOS 提示音。这个提示音使用原版 BIOS 时是无法关闭的。为了安装其他操作系统和屏蔽该提示音，必须刷新 BIOS。 随后等待 Chrome OS 重置即可。你需要重新配置和登录 Chrome OS 以启动 Shell。 更换 BIOS 固件 使用到的是第三方维护的 BIOS，MrChromebox.tech。 可到这里（https://mrchromebox.tech/#devices）查询你的 Chromebook 有没有适配。 你需要准备：一个空的 U 盘 下面开始操作。首先开机登录已处于开发者模式的 Chrome OS。按下组合键：Ctrl + Alt + F2。浏览器会打开新标签页，启动 crosh。 输入命令shell，回车，会启动真实的 Linux Shell。 插入空 U 盘，确保其已经挂载，随后在 Shell 内输入如下命令： 1234cdcurl -LO mrchromebox.tech/firmware-util.shsudo install -Dt /usr/local/bin -m 755 firmware-util.shsudo firmware-util.sh 成功下载并启动脚本后，有如下界面： 选择第一个选项（注：标识了“Full ROM”的选项），按照提示备份 BIOS 和刷入 BIOS，重启，即可。 安装操作系统 与正常电脑安装操作系统无异。需要注意以下几点： 只支持 UEFI 启动。因此诸如 Windows 7 或 Tiny Core Linux 之类的操作系统是不行的。 制作可启动 U 盘：Windows 系列推荐使用 Windows PE（如 优启通），Linux 系列推荐使用Rufus。 需要先使用分区工具，删除 Chromebook 的 eMMC 上所有分区后再进行安装。 对于 C302，Linux 下驱动基本完美。Win 下驱动稍微复杂： 准备有线鼠标，通过扩展坞连接到 Chromebook，临时代替触摸板。 链接 WiFi，然后下载安装DriverBooster，可检测绝大多数驱动程序。将所有可更新的驱动程序更新至最新版本。 到这里（https://github.com/coolstar/driverinstallers/tree/master/crostouchpad），下载安装 4.1 版本驱动。 触摸板可以使用。触摸屏目前无解。 Windows 和主流 Linux 下声卡问题目前无解，可用外置 USB 声卡或蓝牙耳机代替。如果你迫切需要使用 Chromebook 的内置扬声器，请安装GalliumOS。 内置 eMMC 存储空间较小。可通过 SD 卡槽插入 SD 卡（推荐 Class10 或更高），结合软链接（Linux、Windows均可）的方式保留存储空间。 Windows 安装时推荐启用 Compact 压缩。","summary":"图源：@山桂贰 87141455 最近在咸鱼上淘到了一个二手的华硕 Chromebook（具体型号是 ASUS C302CA）。四核 M3-6Y30 + 8G 运行内存+ 32G eMMC 存储 + 12.5 寸触摸屏，虽然机身有少量磕碰，笔记本的转折铰链也有问题，但 800 元的价格着实实惠。 机器寄过来的时候依然是原装系统（Power Wash 过的 Chrome OS）。写个文章记录一将 OS 从 Chrome OS 换成 Manjaro 和 Windows 10 的过程。 拆写保护（WP）螺丝Chromebook 的 BIOS 都是为了配合 Chrome OS 而特殊定做的，因此无法用来启动其他操作系统，没有 BIOS 设置界面，也无法升级 BIOS。但是可能是出于修理和防止可能的 BIOS 紧急固件更新，制造商仍然允许使用者解除 BIOS 的写入保护。常见的保护方式在 Chromium Projects Wiki 里有详细说明： Application Processor (AP) Firmware AP firmware (also known as “SOC firmware”, “host firmware”, “main firmware” or even “BIOS”) typically resides on a SPI ROM. Protection registers on the SPI ROM are programmed to protect the read-only region, and these registers normally cannot be modified while the SPI ROM WP (write protect) pin is asserted. This pin is asserted through various physical means (see below), but with effort, users can unprotect devices they own. Embedded Controller (EC) Firmware The Chrome OS Embedded Controller (EC) typically has a WP input pin driven by the same hardware that generates SOC firmware write protect. While this pin is asserted, certain debug features (eg. arbitrary I2C access through host commands) are locked out. Some ECs load code from external storage, and for these ECs, RO protection works similar to SOC firmware RO protection (WP pin is asserted to EC SPI ROM). Other ECs use internal flash, and these ECs emulate SPI ROM protection registers, disabling write access to certain regions while the WP pin is asserted.","date_published":"2021-03-29T08:30:00.000Z","tags":["自由探索","完成编写","搞机玩家"]},{"id":"https://zhouweitong3.github.io/2021/03/26/028-c-programming-gaps-filling/","url":"https://zhouweitong3.github.io/2021/03/26/028-c-programming-gaps-filling/","title":"【WIP】C 语言拾遗 Part.1","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><h2 id=\"long- 与 -long-long\"><a href=\"#long- 与 -long-long\" class=\"headerlink\" title=\"long 与 long long\"></a>long 与 long long</h2><p>long 一般占用 4~8 字节，long long <strong>至少</strong> 占用 8 个字节。不同的平台和编译器，长度可能不同。</p>\n<h2 id=\"sizeof- 运算符\"><a href=\"#sizeof- 运算符\" class=\"headerlink\" title=\"sizeof() 运算符\"></a>sizeof() 运算符 </h2><p> 注意 sizeof() 属于运算符的一种，这个运算符用于测量括号内的变量（或类型）占用的字节数量。多数情况下，这一数量在编译时确定，因此 sizeof() 的运行结果是一个编译时常量。但也有例外，如 C99 标准引入的变长数组特性。该类数组的 size 需在程序运行时、数组开辟后确定。</p>\n<p>由于是编译时常量，括号内如果是表达式，则表达式不会被执行。</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">1</span>; <span class=\"comment\">// a = 1</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> b = <span class=\"keyword\">sizeof</span>(a++); <span class=\"comment\">// b = 4</span></span><br><span class=\"line\"><span class=\"comment\">// a = 1, a++ 没有执行</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"浮点数精度问题\"><a href=\"# 浮点数精度问题\" class=\"headerlink\" title=\"浮点数精度问题\"></a>浮点数精度问题 </h2><p> 老生长谈的话题了。由于误差，以下的逻辑判断结果都是成立（1）：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"number\">0.1</span> + <span class=\"number\">0.1</span> + <span class=\"number\">0.1</span>) != <span class=\"number\">0.3</span>; <span class=\"comment\">// 1;</span></span><br><span class=\"line\"><span class=\"number\">1</span> + (<span class=\"number\">1e123</span> - <span class=\"number\">1e123</span>) != (<span class=\"number\">1</span> + <span class=\"number\">1e123</span>) - <span class=\"number\">1e123</span>; <span class=\"comment\">// 1;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"没有 -body- 的 -for- 循环\"><a href=\"# 没有 -body- 的 -for- 循环\" class=\"headerlink\" title=\"没有 body 的 for 循环\"></a>没有 body 的 for 循环 </h2><p> 可以写成如下形式：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++) &#123;</span><br><span class=\"line\">    ;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>或者如下形式：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">for</span>(i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10</span>; i++);</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h2 id=\"三目运算符\"><a href=\"# 三目运算符\" class=\"headerlink\" title=\"三目运算符\"></a>三目运算符</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">a ? b : c</span><br></pre></td></tr></table></figure>\n\n<p>等价于</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span>(a)&#123;</span><br><span class=\"line\">    b;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">    c;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这没什么可说的。</p>\n<h2 id=\"面条式代码\"><a href=\"# 面条式代码\" class=\"headerlink\" title=\"面条式代码\"></a>面条式代码 </h2><p><a href=\"https://en.wikipedia.org/wiki/Spaghetti_code\"> 面条式代码（Spaghetti code）</a>最初指代码过度使用 <code>goto</code> 等破坏程序结构化（顺序结构、选择结构、循环结构）的关键字的代码。现也泛指不满足项目代码规范的代码、缺乏代码风格的代码、项目要求经常变化导致过度冗余的代码或缺乏项目编程经验者写出的代码。</p>\n<h2 id=\"limits-h\"><a href=\"#limits-h\" class=\"headerlink\" title=\"limits.h\"></a>limits.h</h2><p>C 语言标准库之一，包含了常见数据类型的数据上界和数据下界。节选代码：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Maximum value an `unsigned char&#x27; can hold.  (Minimum is 0).  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> UCHAR_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> UCHAR_MAX 255</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Minimum and maximum values a `char&#x27; can hold.  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> __CHAR_UNSIGNED__</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> CHAR_MIN</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CHAR_MIN 0</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> CHAR_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CHAR_MAX 255</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">else</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> CHAR_MIN</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CHAR_MIN (-128)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> CHAR_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> CHAR_MAX 127</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Minimum and maximum values a `signed short int&#x27; can hold.  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> SHRT_MIN</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHRT_MIN (-32768)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> SHRT_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHRT_MAX 32767</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Maximum value an `unsigned short int&#x27; can hold.  (Minimum is 0).  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> USHRT_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> USHRT_MAX 65535</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Minimum and maximum values a `signed int&#x27; can hold.  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __INT_MAX__</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __INT_MAX__ 2147483647</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> INT_MIN</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> INT_MIN (-INT_MAX-1)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> INT_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> INT_MAX __INT_MAX__</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* Maximum value an `unsigned int&#x27; can hold.  (Minimum is 0).  */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">undef</span> UINT_MAX</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> UINT_MAX (INT_MAX * 2U + 1)</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"十六进制和 -printf\"><a href=\"# 十六进制和 -printf\" class=\"headerlink\" title=\"十六进制和 printf\"></a>十六进制和 printf</h2><p>十六进制可以直接用于赋值。比如下列语句可将 a 赋值为 1：</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a = <span class=\"number\">0x01</span>;</span><br></pre></td></tr></table></figure>\n\n<p>要注意 <code>printf</code> 在进行格式化输出的时候，<code>float</code>和 <code>double</code> 类型都可以用 <code>%f</code>，而<code>dobule</code> 类型也可以用 <code>%lf</code>。<code>long double</code> 类型需要使用<code>%Lf</code>。</p>\n<p>具体标准（C99）如下：</p>\n<p><img src=\"/2021/03/26/028-c-programming-gaps-filling/image-20210409173302756.png\" alt=\"image-20210409173302756\"></p>\n<p><img src=\"/2021/03/26/028-c-programming-gaps-filling/image-20210409173314667.png\" alt=\"image-20210409173314667\"></p>\n<p><img src=\"/2021/03/26/028-c-programming-gaps-filling/image-20210409173324188.png\" alt=\"image-20210409173324188\"></p>\n","content_text":"long 与 long longlong 一般占用 4~8 字节，long long 至少 占用 8 个字节。不同的平台和编译器，长度可能不同。 sizeof() 运算符 注意 sizeof() 属于运算符的一种，这个运算符用于测量括号内的变量（或类型）占用的字节数量。多数情况下，这一数量在编译时确定，因此 sizeof() 的运行结果是一个编译时常量。但也有例外，如 C99 标准引入的变长数组特性。该类数组的 size 需在程序运行时、数组开辟后确定。 由于是编译时常量，括号内如果是表达式，则表达式不会被执行。 123int a = 1; // a = 1int b = sizeof(a++); // b = 4// a = 1, a++ 没有执行 浮点数精度问题 老生长谈的话题了。由于误差，以下的逻辑判断结果都是成立（1）： 12(0.1 + 0.1 + 0.1) != 0.3; // 1;1 + (1e123 - 1e123) != (1 + 1e123) - 1e123; // 1; 没有 body 的 for 循环 可以写成如下形式： 123for(i = 0; i &lt; 10; i++) &#123; ;&#125; 或者如下形式： 1for(i = 0; i &lt; 10; i++); 三目运算符1a ? b : c 等价于 123456if(a)&#123; b;&#125;else&#123; c;&#125; 这没什么可说的。 面条式代码 面条式代码（Spaghetti code）最初指代码过度使用 goto 等破坏程序结构化（顺序结构、选择结构、循环结构）的关键字的代码。现也泛指不满足项目代码规范的代码、缺乏代码风格的代码、项目要求经常变化导致过度冗余的代码或缺乏项目编程经验者写出的代码。 limits.hC 语言标准库之一，包含了常见数据类型的数据上界和数据下界。节选代码： 123456789101112131415161718192021222324252627282930313233343536373839/* Maximum value an `unsigned char&#x27; can hold. (Minimum is 0). */#undef UCHAR_MAX#define UCHAR_MAX 255/* Minimum and maximum values a `char&#x27; can hold. */#ifdef __CHAR_UNSIGNED__#undef CHAR_MIN#define CHAR_MIN 0#undef CHAR_MAX#define CHAR_MAX 255#else#undef CHAR_MIN#define CHAR_MIN (-128)#undef CHAR_MAX#define CHAR_MAX 127#endif/* Minimum and maximum values a `signed short int&#x27; can hold. */#undef SHRT_MIN#define SHRT_MIN (-32768)#undef SHRT_MAX#define SHRT_MAX 32767/* Maximum value an `unsigned short int&#x27; can hold. (Minimum is 0). */#undef USHRT_MAX#define USHRT_MAX 65535/* Minimum and maximum values a `signed int&#x27; can hold. */#ifndef __INT_MAX__#define __INT_MAX__ 2147483647#endif#undef INT_MIN#define INT_MIN (-INT_MAX-1)#undef INT_MAX#define INT_MAX __INT_MAX__/* Maximum value an `unsigned int&#x27; can hold. (Minimum is 0). */#undef UINT_MAX#define UINT_MAX (INT_MAX * 2U + 1) 十六进制和 printf十六进制可以直接用于赋值。比如下列语句可将 a 赋值为 1： 1int a = 0x01; 要注意 printf 在进行格式化输出的时候，float和 double 类型都可以用 %f，而dobule 类型也可以用 %lf。long double 类型需要使用%Lf。 具体标准（C99）如下：","summary":"long 与 long longlong 一般占用4~8字节，long long 至少 占用8个字节。不同的平台和编译器，长度可能不同。 sizeof() 运算符注意 sizeof() 属于运算符的一种，这个运算符用于测量括号内的变量（或类型）占用的字节数量。多数情况下，这一数量在编译时确定，因此 sizeof() 的运行结果是一个编译时常量。但也有例外，如C99标准引入的变长数组特性。该类数组的size需在程序运行时、数组开辟后确定。 由于是编译时常量，括号内如果是表达式，则表达式不会被执行。 123int a = 1; // a = 1int b = sizeof(a++); // b = 4// a = 1, a++ 没有执行 浮点数精度问题老生长谈的话题了。由于误差，以下的逻辑判断结果都是成立（1）： 12(0.1 + 0.1 + 0.1) != 0.3; // 1;1 + (1e123 - 1e123) != (1 + 1e123) - 1e123; // 1; 没有 body 的 for 循环可以写成如下形式： 123for(i = 0; i &lt; 10; i++) &#123; ;&#125; 或者如下形式： 1for(i = 0; i &lt; 10; i++);","date_published":"2021-03-26T07:00:00.000Z","tags":["开发与代码","笔记","WIP","C"]},{"id":"https://zhouweitong3.github.io/2021/03/26/031-dip-note/","url":"https://zhouweitong3.github.io/2021/03/26/031-dip-note/","title":"【WIP】数字图像处理 笔记 Part.1","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>课程笔记，筛选重点记录。</p>\n<h2 id=\"Bartlane 电缆图像传输系统\"><a href=\"#Bartlane 电缆图像传输系统\" class=\"headerlink\" title=\"Bartlane 电缆图像传输系统\"></a>Bartlane 电缆图像传输系统</h2><p>Bartlane 系统由哈里·G·巴塞洛缪和梅纳德·D·麦克法兰发明于 1920 年，因此以他们的名字命名。Bartlane 系统于 1921 年第一次横跨大西洋传送了一张新闻照片。照片可以通过 Bartlane 系统在三个小时内传输到大西洋对岸。照片为有线传输进行了特殊编码，并由接收端的电报打印机重新绘制出来。传输的图像最初为 5 级灰度，在 1929 年增加到了 15 级。</p>\n<p>这是数字图像的首次应用——即，数字图像技术被首次应用于新闻行业中。</p>\n<h2 id=\"模拟图像处理\"><a href=\"# 模拟图像处理\" class=\"headerlink\" title=\"模拟图像处理\"></a>模拟图像处理 </h2><p> 模拟图像处理包括对光的直接处理（如使用透镜等）和对电流的直接处理（指未经采样和量化的连续电流）。例如：传统胶片摄影、遥感图像处理、电视信号处理等。</p>\n<p>优点：</p>\n<ul>\n<li><p>高速，可达到几乎实时的处理速度，理论上处理速度与光子传播速率等同。</p>\n</li>\n<li><p>可并行处理。</p>\n</li>\n</ul>\n<p>缺点：</p>\n<ul>\n<li><p>精确度差。虽然信号处理前具有无限细节，但是处理时易引入误差和噪声。</p>\n</li>\n<li><p>灵活性差。以模拟方式存储和传输图像往往需要价格高昂的设备，而且过程缓慢（或在保证实时的前提下数据量不高）。</p>\n</li>\n</ul>\n<h2 id=\"为什么将图像数字化？\"><a href=\"# 为什么将图像数字化？\" class=\"headerlink\" title=\"为什么将图像数字化？\"></a>为什么将图像数字化？</h2><ul>\n<li><p>精准度高。具体表现在能够完美保证处理结果的一致性、完美复制处理后的结果。</p>\n</li>\n<li><p>利用当代计算机驱动的强大算力。性能足够的前提下可实现远超模拟图像处理复杂度的图像处理流程，且使用软件实现，简单方便。</p>\n</li>\n<li><p>传输与储存方便。如今网络可在几秒内传输高清图像，或在带宽足够时传输高比特率视频。</p>\n</li>\n</ul>\n<span id=\"more\"></span>\n\n<h2 id=\"数字图像处理的分级\"><a href=\"# 数字图像处理的分级\" class=\"headerlink\" title=\"数字图像处理的分级\"></a>数字图像处理的分级</h2>","content_text":"课程笔记，筛选重点记录。 Bartlane 电缆图像传输系统Bartlane 系统由哈里·G·巴塞洛缪和梅纳德·D·麦克法兰发明于 1920 年，因此以他们的名字命名。Bartlane 系统于 1921 年第一次横跨大西洋传送了一张新闻照片。照片可以通过 Bartlane 系统在三个小时内传输到大西洋对岸。照片为有线传输进行了特殊编码，并由接收端的电报打印机重新绘制出来。传输的图像最初为 5 级灰度，在 1929 年增加到了 15 级。 这是数字图像的首次应用——即，数字图像技术被首次应用于新闻行业中。 模拟图像处理 模拟图像处理包括对光的直接处理（如使用透镜等）和对电流的直接处理（指未经采样和量化的连续电流）。例如：传统胶片摄影、遥感图像处理、电视信号处理等。 优点： 高速，可达到几乎实时的处理速度，理论上处理速度与光子传播速率等同。 可并行处理。 缺点： 精确度差。虽然信号处理前具有无限细节，但是处理时易引入误差和噪声。 灵活性差。以模拟方式存储和传输图像往往需要价格高昂的设备，而且过程缓慢（或在保证实时的前提下数据量不高）。 为什么将图像数字化？ 精准度高。具体表现在能够完美保证处理结果的一致性、完美复制处理后的结果。 利用当代计算机驱动的强大算力。性能足够的前提下可实现远超模拟图像处理复杂度的图像处理流程，且使用软件实现，简单方便。 传输与储存方便。如今网络可在几秒内传输高清图像，或在带宽足够时传输高比特率视频。 数字图像处理的分级","summary":"课程笔记，筛选重点记录。 Bartlane电缆图像传输系统Bartlane系统由哈里·G·巴塞洛缪和梅纳德·D·麦克法兰发明于1920年，因此以他们的名字命名。Bartlane系统于1921年第一次横跨大西洋传送了一张新闻照片。照片可以通过Bartlane系统在三个小时内传输到大西洋对岸。照片为有线传输进行了特殊编码，并由接收端的电报打印机重新绘制出来。传输的图像最初为5级灰度，在1929年增加到了15级。 这是数字图像的首次应用——即，数字图像技术被首次应用于新闻行业中。 模拟图像处理模拟图像处理包括对光的直接处理（如使用透镜等）和对电流的直接处理（指未经采样和量化的连续电流）。例如：传统胶片摄影、遥感图像处理、电视信号处理等。 优点： 高速，可达到几乎实时的处理速度，理论上处理速度与光子传播速率等同。 可并行处理。 缺点： 精确度差。虽然信号处理前具有无限细节，但是处理时易引入误差和噪声。 灵活性差。以模拟方式存储和传输图像往往需要价格高昂的设备，而且过程缓慢（或在保证实时的前提下数据量不高）。 为什么将图像数字化？ 精准度高。具体表现在能够完美保证处理结果的一致性、完美复制处理后的结果。 利用当代计算机驱动的强大算力。性能足够的前提下可实现远超模拟图像处理复杂度的图像处理流程，且使用软件实现，简单方便。 传输与储存方便。如今网络可在几秒内传输高清图像，或在带宽足够时传输高比特率视频。","date_published":"2021-03-26T05:00:00.000Z","tags":["开发与代码","笔记","WIP","CG"]},{"id":"https://zhouweitong3.github.io/2021/03/22/030-algorithm-note-1/","url":"https://zhouweitong3.github.io/2021/03/22/030-algorithm-note-1/","title":"【WIP】算法与数据结构 回顾笔记 Part.1","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>由于高中接触过，所以这里记一些大纲、注意事项、概念和模板之类的东西。</p>\n<h2 id=\"算法与数据结构大纲\"><a href=\"# 算法与数据结构大纲\" class=\"headerlink\" title=\"算法与数据结构大纲\"></a>算法与数据结构大纲 </h2><h3 id=\"数据结构\"><a href=\"# 数据结构\" class=\"headerlink\" title=\"数据结构\"></a> 数据结构</h3><ul>\n<li><p>一维：</p>\n<ul>\n<li><p>基础：数组（Array），链表（Linked list)</p>\n</li>\n<li><p>高级：栈（Stack），队列（Queue），双端队列（Deque），集合（Set），映射（Map）等。</p>\n</li>\n</ul>\n</li>\n<li><p>二维：</p>\n<ul>\n<li><p>基础：树（Tree），图（Graph）</p>\n</li>\n<li><p>高级：二叉搜索树（BST），堆（Heap），并查集（Disjoint Set），字典树（Trie）等。</p>\n</li>\n</ul>\n</li>\n<li><p>特殊结构：</p>\n<ul>\n<li><p>位运算（Bitwise），布隆过滤器（BloomFilter）</p>\n</li>\n<li><p>缓存（LRU）</p>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n<h3 id=\"算法\"><a href=\"# 算法\" class=\"headerlink\" title=\"算法\"></a>算法</h3><ul>\n<li><p>分支（if-else，switch）</p>\n</li>\n<li><p>迭代（for，while）</p>\n</li>\n<li><p>递归（分治法，回溯法等）</p>\n</li>\n<li><p>搜索（深搜，广搜，A* 等）</p>\n</li>\n<li><p>动态规划</p>\n</li>\n<li><p>二分查找</p>\n</li>\n<li><p>贪心</p>\n</li>\n<li><p>计算几何</p>\n</li>\n<li><p>……</p>\n</li>\n</ul>\n","content_text":"由于高中接触过，所以这里记一些大纲、注意事项、概念和模板之类的东西。 算法与数据结构大纲 数据结构 一维： 基础：数组（Array），链表（Linked list) 高级：栈（Stack），队列（Queue），双端队列（Deque），集合（Set），映射（Map）等。 二维： 基础：树（Tree），图（Graph） 高级：二叉搜索树（BST），堆（Heap），并查集（Disjoint Set），字典树（Trie）等。 特殊结构： 位运算（Bitwise），布隆过滤器（BloomFilter） 缓存（LRU） …… …… 算法 分支（if-else，switch） 迭代（for，while） 递归（分治法，回溯法等） 搜索（深搜，广搜，A* 等） 动态规划 二分查找 贪心 计算几何 ……","summary":"由于高中接触过，所以这里记一些大纲、注意事项、概念和模板之类的东西。 算法与数据结构大纲 数据结构 一维： 基础：数组（Array），链表（Linked list) 高级：栈（Stack），队列（Queue），双端队列（Deque），集合（Set），映射（Map）等。 二维： 基础：树（Tree），图（Graph） 高级：二叉搜索树（BST），堆（Heap），并查集（Disjoint Set），字典树（Trie）等。 特殊结构： 位运算（Bitwise），布隆过滤器（BloomFilter） 缓存（LRU） …… …… 算法 分支（if-else，switch） 迭代（for，while） 递归（分治法，回溯法等） 搜索（深搜，广搜，A* 等） 动态规划 二分查找 贪心 计算几何 ……","date_published":"2021-03-22T06:00:00.000Z","tags":["开发与代码","笔记","WIP","算法"]},{"id":"https://zhouweitong3.github.io/2021/03/20/029-cmu-csapp-note-1/","url":"https://zhouweitong3.github.io/2021/03/20/029-cmu-csapp-note-1/","title":"【WIP】CMU 15-213 笔记 Part.1","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><h2 id=\"Lecture-1\"><a href=\"#Lecture-1\" class=\"headerlink\" title=\"Lecture 1\"></a>Lecture 1</h2><h3 id=\"实验\"><a href=\"# 实验\" class=\"headerlink\" title=\"实验\"></a>实验</h3><p>Lab1：数据实验，用位运算方式实现计算器</p>\n<p>Lab2：炸弹实验，学会 GDB</p>\n<p>Lab3：攻击实验，代码注入和 ROP</p>\n<p>Lab4：缓存实验，写个缓存模拟器并优化</p>\n<p>Lab5：Shell 实验，写一个完整的 Linux Shell</p>\n<p>Lab6：Malloc 实验，写自己的 Malloc 库</p>\n<p>Lab7：代理实验，写自己的 Web Proxy</p>\n<h2 id=\"Lecture-2\"><a href=\"#Lecture-2\" class=\"headerlink\" title=\"Lecture 2\"></a>Lecture 2</h2><blockquote>\n<p>比特、字节和整数</p>\n</blockquote>\n<ul>\n<li><p>long double 数据类型：在传统的 32 位架构或 64 位架构中是没有的。但在 x86-64 架构中占 10 或 16 字节（内存对齐）。</p>\n</li>\n<li><p>32 位架构的指针为 32 位（4 字节），64 位架构的指针为 64 位（8 字节）。</p>\n</li>\n<li><p>布尔代数：和 或 非 异或</p>\n</li>\n<li><p>位运算符 &amp; | ~ ^，逻辑运算符 &amp;&amp; || !</p>\n</li>\n<li><p>逻辑运算的短路特性</p>\n</li>\n<li><p>逻辑位移和算数位移：</p>\n<ul>\n<li>在位移运算符之前的数（比如 $x&lt;&lt;y$ 中的 $x$）是无符号数的话，位移运算对应的汇编指令为逻辑位移。若是有符号数，该运算对应的汇编指令是算数位移。</li>\n<li>对于左移：二者都是在右侧补 0。</li>\n<li>对于右移：逻辑位移补 0，算数位移补最高有效位（符号位）。如：令 $x=10100000_{(2)}$，右移 3 位，逻辑位移结果 $x&gt;&gt;3=00010100_{(2)}$，算数位移结果 $x&gt;&gt;3=11110100_{(2)}$。</li>\n</ul>\n</li>\n<li><p>位移数小于 0（即 $x&lt;&lt;y$ 中的 $y$ 小于 0）或大于数据类型占用的长度（如 char 类型中 y 大于 8）是未定义的操作。结果和编译情况依编译器和架构变化。</p>\n</li>\n<li><p>正数原码转十进制：求 2 的幂次加和即可。</p>\n</li>\n</ul>\n<p>$$\n    B2U(X) = \\sum^{w-1}_{i=0}{x_i \\cdot 2^i}\n$$</p>\n<ul>\n<li>补码转十进制：注意符号位。也可写成公式。</li>\n</ul>\n<p>$$\n    B2T(X) = -x_{w-1} \\cdot 2^{w-1} + \\sum^{w-2}_{i=0}{x_i \\cdot 2^i}\n$$</p>\n<ul>\n<li>补码计算举例：将补码 $101101_{(2)}$ 化为十进制。</li>\n</ul>\n<p>$$\n    依据公式，\\\\\n    101101_{2} = 2^{0} \\cdot 1 + 2^{1} \\cdot 0 + 2^{2} \\cdot 1 + 2^{3} \\cdot 1 + 2^{4} \\cdot 0 + 2^{5} \\cdot (-1) \\\\\n    = 1 + 0 + 4 + 8 + 0 - 32 = -19\n$$</p>\n<ul>\n<li>无符号数最大值 $2^w - 1$，最小值 $0$。有符号数最大值 $2^{w-1} - 1$，最小值 $-2^{w-1}$。</li>\n</ul>\n<span id=\"more\"></span>\n\n<ul>\n<li>补码对数的映射具有“对称性”。</li>\n</ul>\n<p><img src=\"/2021/03/20/029-cmu-csapp-note-1/image-20210411163333866.png\" alt=\"image-20210411163333866\"></p>\n<ul>\n<li>补码与原码（无符号位）间的转化。</li>\n</ul>\n<p><img src=\"/2021/03/20/029-cmu-csapp-note-1/image-20210411163354037.png\" alt=\"image-20210411163354037\"></p>\n<ul>\n<li>C 语言上二者的互相转化。</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">tx = (<span class=\"keyword\">int</span>) ux;</span><br><span class=\"line\">uy = (<span class=\"keyword\">unsigned</span>) ty; <span class=\"comment\">// unsigned 等价于 unsigned int</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>有符号数与无符号数进行操作时（例如，有符号数与无符号数相加），有符号数会被隐式转换为无符号数。</p>\n</li>\n<li><p>注意在有条件限定的情况下，下列运算的运算结果：</p>\n</li>\n</ul>\n<p><img src=\"/2021/03/20/029-cmu-csapp-note-1/image-20210411163406261.png\" alt=\"image-20210411163406261\"></p>\n<ul>\n<li>一个 C 编程中的典型错误：</li>\n</ul>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> a[<span class=\"number\">250</span>] = &#123;<span class=\"number\">0</span>&#125;;</span><br><span class=\"line\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> i; <span class=\"comment\">// 注意是无符号整型 </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span>(i = <span class=\"number\">249</span>; i &gt;= <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">    a[i] = <span class=\"number\">5</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> 运行的结果为：遍历数组 a，每个元素均赋值为 5 后，访问非法下标。</span></span><br><span class=\"line\"><span class=\"comment\">由于 i 是无符号的数，i=0 时 for 循环进行后，i--，导致 i 溢出为 4294967295。</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><p>符号扩展：对有符号整数的类型转换是通过左侧截断和左侧补最高有效位（符号位）实现的。</p>\n<p>  例子：设 6 位整数 a 的十进制值为 10，则其二进制位为 $001010$。将其扩展为 10 位整数，二进制位为 $0000001010$。</p>\n<p>  设 6 位整数的十进制值为 -10，则其二进制位（补码）为 $110110$。将其扩展为 10 位整数，二进制位为 $1111110110$。</p>\n</li>\n<li><p>原码取 2 的幂次模：相当于从右边截断。</p>\n<p>  例子：数字 10 对 4 取模。通过十进制计算，$10=4*2+2$，得取模结果为 2。</p>\n<p>  从原码的角度来看，10 的原码为 $1010_{(2)}$。对 4 取模，即对 $2^2$ 取模。从右向左保留两位后截断即可，结果即为 $10_{(2)}$，转化为 10 进制为 2。</p>\n</li>\n</ul>\n<h2 id=\"Lecture-3\"><a href=\"#Lecture-3\" class=\"headerlink\" title=\"Lecture 3\"></a>Lecture 3</h2>","content_text":"Lecture 1实验Lab1：数据实验，用位运算方式实现计算器 Lab2：炸弹实验，学会 GDB Lab3：攻击实验，代码注入和 ROP Lab4：缓存实验，写个缓存模拟器并优化 Lab5：Shell 实验，写一个完整的 Linux Shell Lab6：Malloc 实验，写自己的 Malloc 库 Lab7：代理实验，写自己的 Web Proxy Lecture 2 比特、字节和整数 long double 数据类型：在传统的 32 位架构或 64 位架构中是没有的。但在 x86-64 架构中占 10 或 16 字节（内存对齐）。 32 位架构的指针为 32 位（4 字节），64 位架构的指针为 64 位（8 字节）。 布尔代数：和 或 非 异或 位运算符 &amp; | ~ ^，逻辑运算符 &amp;&amp; || ! 逻辑运算的短路特性 逻辑位移和算数位移： 在位移运算符之前的数（比如 $x&lt;&lt;y$ 中的 $x$）是无符号数的话，位移运算对应的汇编指令为逻辑位移。若是有符号数，该运算对应的汇编指令是算数位移。 对于左移：二者都是在右侧补 0。 对于右移：逻辑位移补 0，算数位移补最高有效位（符号位）。如：令 $x=10100000_{(2)}$，右移 3 位，逻辑位移结果 $x&gt;&gt;3=00010100_{(2)}$，算数位移结果 $x&gt;&gt;3=11110100_{(2)}$。 位移数小于 0（即 $x&lt;&lt;y$ 中的 $y$ 小于 0）或大于数据类型占用的长度（如 char 类型中 y 大于 8）是未定义的操作。结果和编译情况依编译器和架构变化。 正数原码转十进制：求 2 的幂次加和即可。 $$ B2U(X) = \\sum^{w-1}_{i=0}{x_i \\cdot 2^i} $$ 补码转十进制：注意符号位。也可写成公式。 $$ B2T(X) = -x_{w-1} \\cdot 2^{w-1} + \\sum^{w-2}_{i=0}{x_i \\cdot 2^i} $$ 补码计算举例：将补码 $101101_{(2)}$ 化为十进制。 $$ 依据公式，\\\\ 101101_{2} = 2^{0} \\cdot 1 + 2^{1} \\cdot 0 + 2^{2} \\cdot 1 + 2^{3} \\cdot 1 + 2^{4} \\cdot 0 + 2^{5} \\cdot (-1) \\\\ = 1 + 0 + 4 + 8 + 0 - 32 = -19 $$ 无符号数最大值 $2^w - 1$，最小值 $0$。有符号数最大值 $2^{w-1} - 1$，最小值 $-2^{w-1}$。 补码对数的映射具有“对称性”。 补码与原码（无符号位）间的转化。 C 语言上二者的互相转化。 12tx = (int) ux;uy = (unsigned) ty; // unsigned 等价于 unsigned int 有符号数与无符号数进行操作时（例如，有符号数与无符号数相加），有符号数会被隐式转换为无符号数。 注意在有条件限定的情况下，下列运算的运算结果： 一个 C 编程中的典型错误： 1234567891011int a[250] = &#123;0&#125;;unsigned int i; // 注意是无符号整型 for(i = 249; i &gt;= 0; i--) &#123; a[i] = 5;&#125;/* 运行的结果为：遍历数组 a，每个元素均赋值为 5 后，访问非法下标。由于 i 是无符号的数，i=0 时 for 循环进行后，i--，导致 i 溢出为 4294967295。*/ 符号扩展：对有符号整数的类型转换是通过左侧截断和左侧补最高有效位（符号位）实现的。 例子：设 6 位整数 a 的十进制值为 10，则其二进制位为 $001010$。将其扩展为 10 位整数，二进制位为 $0000001010$。 设 6 位整数的十进制值为 -10，则其二进制位（补码）为 $110110$。将其扩展为 10 位整数，二进制位为 $1111110110$。 原码取 2 的幂次模：相当于从右边截断。 例子：数字 10 对 4 取模。通过十进制计算，$10=4*2+2$，得取模结果为 2。 从原码的角度来看，10 的原码为 $1010_{(2)}$。对 4 取模，即对 $2^2$ 取模。从右向左保留两位后截断即可，结果即为 $10_{(2)}$，转化为 10 进制为 2。 Lecture 3","summary":"Lecture 1实验Lab1：数据实验，用位运算方式实现计算器 Lab2：炸弹实验，学会GDB Lab3：攻击实验，代码注入和ROP Lab4：缓存实验，写个缓存模拟器并优化 Lab5：Shell实验，写一个完整的Linux Shell Lab6：Malloc实验，写自己的Malloc库 Lab7：代理实验，写自己的Web Proxy Lecture 2 比特、字节和整数 long double数据类型：在传统的32位架构或64位架构中是没有的。但在x86-64架构中占10或16字节（内存对齐）。 32位架构的指针为32位（4字节），64位架构的指针为64位（8字节）。 布尔代数：和 或 非 异或 位运算符 &amp; | ~ ^，逻辑运算符 &amp;&amp; || ! 逻辑运算的短路特性 逻辑位移和算数位移： 在位移运算符之前的数（比如$x&lt;&lt;y$中的$x$）是无符号数的话，位移运算对应的汇编指令为逻辑位移。若是有符号数，该运算对应的汇编指令是算数位移。 对于左移：二者都是在右侧补0。 对于右移：逻辑位移补0，算数位移补最高有效位（符号位）。如：令$x=10100000_{(2)}$，右移3位，逻辑位移结果$x&gt;&gt;3=00010100_{(2)}$，算数位移结果$x&gt;&gt;3=11110100_{(2)}$。 位移数小于0（即$x&lt;&lt;y$中的$y$小于0）或大于数据类型占用的长度（如char类型中y大于8）是未定义的操作。结果和编译情况依编译器和架构变化。 正数原码转十进制：求2的幂次加和即可。 $$ B2U(X) = \\sum^{w-1}_{i=0}{x_i \\cdot 2^i} $$ 补码转十进制：注意符号位。也可写成公式。 $$ B2T(X) = -x_{w-1} \\cdot 2^{w-1} + \\sum^{w-2}_{i=0}{x_i \\cdot 2^i} $$ 补码计算举例：将补码$101101_{(2)}$化为十进制。 $$ 依据公式，\\\\ 101101_{2} = 2^{0} \\cdot 1 + 2^{1} \\cdot 0 + 2^{2} \\cdot 1 + 2^{3} \\cdot 1 + 2^{4} \\cdot 0 + 2^{5} \\cdot (-1) \\\\ = 1 + 0 + 4 + 8 + 0 - 32 = -19 $$ 无符号数最大值$2^w - 1$，最小值$0$。有符号数最大值$2^{w-1} - 1$，最小值$-2^{w-1}$。","date_published":"2021-03-20T06:00:00.000Z","tags":["开发与代码","笔记","WIP","CSAPP"]},{"id":"https://zhouweitong3.github.io/2021/03/15/026-media-sharing/","url":"https://zhouweitong3.github.io/2021/03/15/026-media-sharing/","title":"【WIP】分享媒体：Kodi 和 Universal Media Server","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p> 有时你可能会撞见这样几种需求：深夜，躺在床上准备休息。临睡前刷刷手机，突然想到电脑上新下好的美剧还没来得及看。瞧瞧时间，正好够把它看完，但又懒得下床走到隔壁卧室把美剧传到手机里；家里来了朋友，想和他一起看个电影，但家里根本没有网络电视，或者网络电视没有这个电影的资源，只能拿部备用手机提前传好电影之后 USB Type-C 接 HDMI 投个屏…有没有更好更方便的解决办法呢？不妨试试媒体中心。</p>\n<p> 本文介绍两个知名的媒体中心软件——Kodi（前身为 XBMC）、Universal Media Center。二者均为免费软件。</p>\n<h2 id=\"Kodi\"><a href=\"#Kodi\" class=\"headerlink\" title=\"Kodi\"></a>Kodi</h2><p> 官方网站：<a href=\"https://kodi.tv/\">https://kodi.tv/</a></p>\n<p> 部分开发板镜像（LibreELEC）：<a href=\"https://libreelec.tv/\">https://libreelec.tv/</a></p>\n<p> 可能是使用最为广泛的开源媒体中心软件之一。支持多种操作系统、多种 CPU 架构，支持开发板安装（即摇身一遍成为“迷你网络机顶盒”），支持多种网络媒体协议。拥有大量的插件（这也是推荐它的重要原因之一）。</p>\n<p> 下面以 Windows 和 Linux 两种操作系统为例简单说明安装与配置过程：</p>\n<h3 id=\"Windows\"><a href=\"#Windows\" class=\"headerlink\" title=\"Windows\"></a>Windows</h3><blockquote>\n<p> 方法一：官方网站下载安装包进行安装。</p>\n</blockquote>\n<p> 至 <a href=\"https://kodi.tv/download/849\">https://kodi.tv/download/849</a> 处下载安装包安装即可。这里不过多叙述。</p>\n<blockquote>\n<p> 方法二：利用 chocolatey 进行安装。</p>\n</blockquote>\n<p> 以管理员身份启动 PowerShell，运行如下命令：</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">choco install kodi</span><br></pre></td></tr></table></figure>\n\n<p> 即可自动进行安装。</p>\n<p> 安装完成后，Kodi 的程序文件位置为：<code>C:\\Program Files\\Kodi</code>，用户文件（包括用户自行安装的插件、插件的设置、缓存、媒体数据库等）的位置为：<code>C:\\Users\\&lt;Username&gt;\\AppData\\Roaming\\Kodi</code>。</p>\n<h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3>","content_text":"有时你可能会撞见这样几种需求：深夜，躺在床上准备休息。临睡前刷刷手机，突然想到电脑上新下好的美剧还没来得及看。瞧瞧时间，正好够把它看完，但又懒得下床走到隔壁卧室把美剧传到手机里；家里来了朋友，想和他一起看个电影，但家里根本没有网络电视，或者网络电视没有这个电影的资源，只能拿部备用手机提前传好电影之后 USB Type-C 接 HDMI 投个屏…有没有更好更方便的解决办法呢？不妨试试媒体中心。 本文介绍两个知名的媒体中心软件——Kodi（前身为 XBMC）、Universal Media Center。二者均为免费软件。 Kodi 官方网站：https://kodi.tv/ 部分开发板镜像（LibreELEC）：https://libreelec.tv/ 可能是使用最为广泛的开源媒体中心软件之一。支持多种操作系统、多种 CPU 架构，支持开发板安装（即摇身一遍成为“迷你网络机顶盒”），支持多种网络媒体协议。拥有大量的插件（这也是推荐它的重要原因之一）。 下面以 Windows 和 Linux 两种操作系统为例简单说明安装与配置过程： Windows 方法一：官方网站下载安装包进行安装。 至 https://kodi.tv/download/849 处下载安装包安装即可。这里不过多叙述。 方法二：利用 chocolatey 进行安装。 以管理员身份启动 PowerShell，运行如下命令： 1choco install kodi 即可自动进行安装。 安装完成后，Kodi 的程序文件位置为：C:\\Program Files\\Kodi，用户文件（包括用户自行安装的插件、插件的设置、缓存、媒体数据库等）的位置为：C:\\Users\\&lt;Username&gt;\\AppData\\Roaming\\Kodi。 Linux","summary":"有时你可能会撞见这样几种需求：深夜，躺在床上准备休息。临睡前刷刷手机，突然想到电脑上新下好的美剧还没来得及看。瞧瞧时间，正好够把它看完，但又懒得下床走到隔壁卧室把美剧传到手机里；家里来了朋友，想和他一起看个电影，但家里根本没有网络电视，或者网络电视没有这个电影的资源，只能拿部备用手机提前传好电影之后 USB Type-C 接 HDMI 投个屏…有没有更好更方便的解决办法呢？不妨试试媒体中心。 本文介绍两个知名的媒体中心软件——Kodi（前身为 XBMC）、Universal Media Center。二者均为免费软件。 Kodi 官方网站：https://kodi.tv/ 部分开发板镜像（LibreELEC）：https://libreelec.tv/ 可能是使用最为广泛的开源媒体中心软件之一。支持多种操作系统、多种 CPU 架构，支持开发板安装（即摇身一遍成为“迷你网络机顶盒”），支持多种网络媒体协议。拥有大量的插件（这也是推荐它的重要原因之一）。 下面以 Windows 和 Linux 两种操作系统为例简单说明安装与配置过程： Windows 方法一：官方网站下载安装包进行安装。 至 https://kodi.tv/download/849 处下载安装包安装即可。这里不过多叙述。 方法二：利用 chocolatey 进行安装。 以管理员身份启动 PowerShell，运行如下命令： 1choco install kodi 即可自动进行安装。 安装完成后，Kodi 的程序文件位置为：C:\\Program Files\\Kodi，用户文件（包括用户自行安装的插件、插件的设置、缓存、媒体数据库等）的位置为：C:\\Users\\&lt;Username&gt;\\AppData\\Roaming\\Kodi。 Linux","date_published":"2021-03-15T04:00:00.000Z","tags":["自由探索","WIP","媒体分享"]},{"id":"https://zhouweitong3.github.io/2020/12/15/010-snort-1-intro/","url":"https://zhouweitong3.github.io/2020/12/15/010-snort-1-intro/","title":"认识 Snort3 （1）：编译、安装与简单使用","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：SAyuki - 《Gray》，Pid：<a href=\"https://www.pixiv.net/artworks/79912976\">79912976</a></p>\n<h2 id=\"Snort- 简介\"><a href=\"#Snort- 简介\" class=\"headerlink\" title=\"Snort 简介\"></a>Snort 简介</h2><p><a href=\"https://www.snort.org/\">Snort</a>，是一款开源的 IDS/IPS 软件，由思科公司（Cisco）主导开发，使用广泛。Snort 有三种模式——包嗅探模式（Packet Sniffer）、包记录模式（Packet Logging）、IPS 模式（Intrusion Prevention System）。搭配自定义的规则、不同的插件与其他软件，Snort 能在不同的系统中发挥不同的作用。</p>\n<p>本篇文章简单记录 Snort3 的编译、安装和简单使用流程。</p>\n<h2 id=\"编译安装 -Snort3\"><a href=\"# 编译安装 -Snort3\" class=\"headerlink\" title=\"编译安装 Snort3\"></a>编译安装 Snort3</h2><p>例子中使用的操作系统是 Ubuntu Server 20.04.1 LTS。当然你也可以使用 Ubuntu 18.04.5 LTS，或者其他 Linux 发行版。某些发行版由于内核配置原因无法编译 libdaq 的部分插件（例如 NFQ），这时 Snort 虽然无法提供防护功能，但仍然可以作为入侵检测系统（IDS）来使用。</p>\n<h3 id=\"快速设置 -Ubuntu-Server- 虚拟机\"><a href=\"# 快速设置 -Ubuntu-Server- 虚拟机\" class=\"headerlink\" title=\"快速设置 Ubuntu Server 虚拟机\"></a>快速设置 Ubuntu Server 虚拟机 </h3><p>Ubuntu Server 虚拟机其实不必下载 ISO 镜像后再利用 VMWare 等虚拟化软件从头进行安装。Ubuntu 官方已经提供了预安装的虚拟磁盘的下载（如 <a href=\"https://www.offensive-security.com/kali-linux-vm-vmware-virtualbox-image-download/\">Kali Linux 官方</a> 所做的那样），即 <a href=\"https://cloud-images.ubuntu.com/\">Ubuntu Cloud Images</a>。</p>\n<p><img src=\"/2020/12/15/010-snort-1-intro/image-20210411151459857.png\" alt=\"image-20210411151459857\"></p>\n<p>以 20.04 LTS daily build 为例，找到对应的 OVA 文件：</p>\n<p><img src=\"/2020/12/15/010-snort-1-intro/image-20210411151519613.png\" alt=\"image-20210411151519613\"></p>\n<h3 id=\"安装新版 -libpcap\"><a href=\"# 安装新版 -libpcap\" class=\"headerlink\" title=\"安装新版 libpcap\"></a>安装新版 libpcap</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 可能已有更新版本，可以去官网查看最新版本下载地址</span></span><br><span class=\"line\"><span class=\"comment\"># https://www.tcpdump.org/</span></span><br><span class=\"line\">wget https://www.tcpdump.org/release/libpcap-1.9.1.tar.gz</span><br><span class=\"line\">tar -xzf libpcap-1.9.1.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> libpcap-1.9.1/</span><br><span class=\"line\"><span class=\"comment\"># 有的时候 /usr/local/lib 不在 PATH 内，其实不妨直接安装到 /usr/lib</span></span><br><span class=\"line\">./configure --prefix=/usr</span><br></pre></td></tr></table></figure>\n","content_text":"图源：SAyuki - 《Gray》，Pid：79912976 Snort 简介Snort，是一款开源的 IDS/IPS 软件，由思科公司（Cisco）主导开发，使用广泛。Snort 有三种模式——包嗅探模式（Packet Sniffer）、包记录模式（Packet Logging）、IPS 模式（Intrusion Prevention System）。搭配自定义的规则、不同的插件与其他软件，Snort 能在不同的系统中发挥不同的作用。 本篇文章简单记录 Snort3 的编译、安装和简单使用流程。 编译安装 Snort3例子中使用的操作系统是 Ubuntu Server 20.04.1 LTS。当然你也可以使用 Ubuntu 18.04.5 LTS，或者其他 Linux 发行版。某些发行版由于内核配置原因无法编译 libdaq 的部分插件（例如 NFQ），这时 Snort 虽然无法提供防护功能，但仍然可以作为入侵检测系统（IDS）来使用。 快速设置 Ubuntu Server 虚拟机 Ubuntu Server 虚拟机其实不必下载 ISO 镜像后再利用 VMWare 等虚拟化软件从头进行安装。Ubuntu 官方已经提供了预安装的虚拟磁盘的下载（如 Kali Linux 官方 所做的那样），即 Ubuntu Cloud Images。 以 20.04 LTS daily build 为例，找到对应的 OVA 文件： 安装新版 libpcap1234567# 可能已有更新版本，可以去官网查看最新版本下载地址# https://www.tcpdump.org/wget https://www.tcpdump.org/release/libpcap-1.9.1.tar.gztar -xzf libpcap-1.9.1.tar.gzcd libpcap-1.9.1/# 有的时候 /usr/local/lib 不在 PATH 内，其实不妨直接安装到 /usr/lib./configure --prefix=/usr","summary":"图源：SAyuki - 《Gray》，Pid：79912976 Snort 简介Snort，是一款开源的 IDS/IPS 软件，由思科公司（Cisco）主导开发，使用广泛。Snort 有三种模式——包嗅探模式（Packet Sniffer）、包记录模式（Packet Logging）、IPS 模式（Intrusion Prevention System）。搭配自定义的规则、不同的插件与其他软件，Snort 能在不同的系统中发挥不同的作用。 本篇文章简单记录 Snort3 的编译、安装和简单使用流程。 编译安装 Snort3例子中使用的操作系统是 Ubuntu Server 20.04.1 LTS。当然你也可以使用 Ubuntu 18.04.5 LTS，或者其他 Linux 发行版。某些发行版由于内核配置原因无法编译 libdaq 的部分插件（例如 NFQ），这时 Snort 虽然无法提供防护功能，但仍然可以作为入侵检测系统（IDS）来使用。 快速设置 Ubuntu Server 虚拟机 Ubuntu Server 虚拟机其实不必下载 ISO 镜像后再利用 VMWare 等虚拟化软件从头进行安装。Ubuntu 官方已经提供了预安装的虚拟磁盘的下载（如 Kali Linux 官方 所做的那样），即 Ubuntu Cloud Images。 以 20.04 LTS daily build 为例，找到对应的 OVA 文件： 安装新版 libpcap1234567# 可能已有更新版本，可以去官网查看最新版本下载地址# https://www.tcpdump.org/wget https://www.tcpdump.org/release/libpcap-1.9.1.tar.gztar -xzf libpcap-1.9.1.tar.gzcd libpcap-1.9.1/# 有的时候 /usr/local/lib 不在 PATH 内，其实不妨直接安装到 /usr/lib./configure --prefix=/usr","date_published":"2020-12-15T10:00:00.000Z","tags":["网络安全","WIP","Snort","IDS","IPS"]},{"id":"https://zhouweitong3.github.io/2020/12/08/007-linux-windows-tricks-03/","url":"https://zhouweitong3.github.io/2020/12/08/007-linux-windows-tricks-03/","title":"Linux & Windows 小技巧（3）","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：Miv4t - 《MACHiNERY》，Pid：<a href=\"https://www.pixiv.net/artworks/77186528\">77186528</a></p>\n<h2 id=\"Windows- 下的 -cat- 和 -grep\"><a href=\"#Windows- 下的 -cat- 和 -grep\" class=\"headerlink\" title=\"Windows 下的 cat 和 grep\"></a>Windows 下的 cat 和 grep</h2><p><code>ls</code>、<code>cat</code>、<code>grep</code>这三个命令，往往是 Linux 初学者最先了解、日常使用 Linux 时不可或缺的。对于 Windows 系统而言，同样有三个命令可以完成上述工作：<code>dir</code>、<code>type</code>与<code>findstr</code>。</p>\n<p>例如，用 <code>type</code> 显示文件内容：</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151134589.png\" alt=\"image-20210413151134589\"></p>\n<p>或者用 <code>findstr</code> 结合管道匹配先前程序输出内容中的字符串：</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151152079.png\" alt=\"image-20210413151152079\"></p>\n<p>也可以结合正则表达式：</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151207393.png\" alt=\"image-20210413151207393\"></p>\n<p>当然，如果你不满足于系统命令的显示效果，你也可以尝试下面两款开源于 Github 的工具：</p>\n<h3 id=\"peco\"><a href=\"#peco\" class=\"headerlink\" title=\"peco\"></a>peco</h3><p>项目链接：<a href=\"https://github.com/peco/peco\">https://github.com/peco/peco</a></p>\n<p><code>peco</code>可以实现对管道输入的文本进行快速搜索、排序、多行选择等功能，使用 Golang 编写。目前仍不支持中文编码（GBK），且不支持默认的 Windows Powershell 终端（你需要使用传统的命令提示符，或者更先进的终端程序，比如 Hyper 或者 Windows Terminal）。该项目仍在活跃开发中，合理的使用可以提升效率。</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151244160.png\" alt=\"image-20210413151244160\"></p>\n<span id=\"more\"></span>\n\n<h3 id=\"bat\"><a href=\"#bat\" class=\"headerlink\" title=\"bat\"></a>bat</h3><p>项目链接：<a href=\"https://github.com/sharkdp/bat\">https://github.com/sharkdp/bat</a></p>\n<p><code>bat</code>是一款替代 <code>cat</code>/<code>type</code> 的工具，使用 Golang 编写。加入了代码高亮、Git 增删标识、不可打印字符显示等功能。</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151302358.png\" alt=\"image-20210413151302358\"></p>\n<p>使用参数 <code>-A</code> 可以显示所有不可打印字符：</p>\n<p><img src=\"/2020/12/08/007-linux-windows-tricks-03/image-20210413151355738.png\" alt=\"image-20210413151355738\"></p>\n<h2 id=\"软连接、硬链接\"><a href=\"# 软连接、硬链接\" class=\"headerlink\" title=\"软连接、硬链接\"></a>软连接、硬链接 </h2><h3 id=\"使用命令行\"><a href=\"# 使用命令行\" class=\"headerlink\" title=\"使用命令行\"></a> 使用命令行 </h3><p> 在 Linux 下，软连接（即符号链接）和硬链接的使用是非常普遍的。我们经常需要使用 <code>ln</code> 命令来进行创建。</p>\n<p>创建硬链接的命令是：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ln [Target] [Link name]</span><br></pre></td></tr></table></figure>\n\n<p>创建软连接，只需要再加上参数 <code>-s</code> 即可。既然是“链接”，那么说明对链接指向的文件进行修改实际上就是对源文件本身进行修改。</p>\n<p>硬链接与源文件必须处于同一文件系统内，且源文件必须真实存在。且硬链接的源文件必须是单一文件，不能是目录，因为这样会造成硬链接包含地狱。软连接的源文件则可以是文件，也可以是目录，且无需实际存在。源文件不存在的软连接成为死链接。软连接具有自己的权限与文件属性。软连接可以跨文件系统链接。删除硬链接和软连接均不会对源文件产生影响。</p>\n<p>Windows 下 NTFS 文件系统中也有类似的概念，且 Windows 中也提供了对应的创建链接的命令。</p>\n<p>创建软链接的命令是：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mklink [Link] [Target]</span><br></pre></td></tr></table></figure>\n\n<p>这个命令 Powershell 中是没有的，因此依然需要使用传统的命令提示符。同时注意，Link 和 Target 的顺序是相反的（这也导致我总是记错）。如果创建硬链接，加参数 <code>/H</code> 即可。</p>\n<p>同时要注意，对于目录的软连接与符号链接有稍许不同。目录符号连接与 Linux 下的目录软链接基本等同，具有独立的文件属性，在移动时仍保持相对或绝对路径的链接关系，在复制时创建源文件的副本（同 Linux 下使用 <code>cp</code> 直接复制软连接。Linux 下的 <code>cp -d</code> 可以将软连接复制为软连接，而不是将软连接复制为文件）。而 Win 下的目录软链接在移动时，会在目标位置创建同名文件夹，并把源目录内的所有文件移动至新的目录。</p>\n<p>创建目录符号连接的命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mklink /D [Link] [Target Dir]</span><br></pre></td></tr></table></figure>\n\n<p>创建目录软连接的命令：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mklink /J [Link] [Target Dir]</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"rm- 删除除指定文件外的其他文件\"><a href=\"#rm- 删除除指定文件外的其他文件\" class=\"headerlink\" title=\"rm 删除除指定文件外的其他文件\"></a>rm 删除除指定文件外的其他文件</h2><p>Linux 下，删除一个文件 / 文件夹，或删除该文件夹下所有文件等操作都很简单。但如果想保留文件夹下某一个或某几个文件，同时删除其他文件，该如何操作？</p>\n<p>可以结合 <code>ls</code>、<code>grep</code> 和<code>xargs</code>：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls | grep -vE &lt;FileName&gt; | xargs rm -rf</span><br></pre></td></tr></table></figure>\n\n<p>这是最传统的方式。你也可以使用一种 bash 技巧，无需借助 xargs 即可完成这一目的。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 开启需要的 shell option</span></span><br><span class=\"line\"><span class=\"built_in\">shopt</span> -s extglob</span><br><span class=\"line\"><span class=\"comment\"># 然后运行！</span></span><br><span class=\"line\">rm -rf !(&lt;FileName&gt;)</span><br></pre></td></tr></table></figure>\n\n<p>下面附上 shopt 的 cli 参数解释，以及 shell options 列表：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Syntax</span><br><span class=\"line\">      <span class=\"built_in\">shopt</span> [-pqsu] [-o] [optname ...]</span><br><span class=\"line\"></span><br><span class=\"line\">Options</span><br><span class=\"line\">     -s   Enable (<span class=\"built_in\">set</span>) each optname</span><br><span class=\"line\"></span><br><span class=\"line\">     -u   Disable (<span class=\"built_in\">unset</span>) each optname.</span><br><span class=\"line\"></span><br><span class=\"line\">     -p   Display a list of all settable options, with an indication of </span><br><span class=\"line\">          whether or not each is <span class=\"built_in\">set</span>. The output is displayed <span class=\"keyword\">in</span> a form </span><br><span class=\"line\">          that can be reused as input. (-p is the default action)</span><br><span class=\"line\"></span><br><span class=\"line\">     -q   Suppresses normal output; the <span class=\"built_in\">return</span> status indicates whether the optname</span><br><span class=\"line\">          is <span class=\"built_in\">set</span> or <span class=\"built_in\">unset</span>. If multiple optname arguments are given with <span class=\"string\">&#x27;-q&#x27;</span>,</span><br><span class=\"line\">          the <span class=\"built_in\">return</span> status is zero <span class=\"keyword\">if</span> all optnames are enabled; non-zero otherwise. </span><br><span class=\"line\"></span><br><span class=\"line\">     -o   Restricts the values of optname to be those defined <span class=\"keyword\">for</span> the <span class=\"string\">&#x27;-o&#x27;</span> option to </span><br><span class=\"line\">          the <span class=\"built_in\">set</span> <span class=\"built_in\">builtin</span>.</span><br><span class=\"line\"></span><br><span class=\"line\">If either <span class=\"string\">&#x27;-s&#x27;</span> or <span class=\"string\">&#x27;-u&#x27;</span> is used with no optname arguments, the display is limited to those options <span class=\"built_in\">which</span> are <span class=\"built_in\">set</span> or <span class=\"built_in\">unset</span>, respectively. Unless otherwise noted, the <span class=\"built_in\">shopt</span> options are disabled (off) by default.</span><br><span class=\"line\"></span><br><span class=\"line\">The <span class=\"built_in\">return</span> status is zero unless an optname was *not* enabled or was not a valid shell option.</span><br><span class=\"line\"></span><br><span class=\"line\">The list of <span class=\"built_in\">shopt</span> options is:</span><br><span class=\"line\"></span><br><span class=\"line\">cdable_vars</span><br><span class=\"line\">    If this is <span class=\"built_in\">set</span>, an argument to the <span class=\"built_in\">cd</span> <span class=\"built_in\">builtin</span> <span class=\"built_in\">command</span> that </span><br><span class=\"line\">    is not a directory is assumed to be the name of a variable whose value is </span><br><span class=\"line\">    the directory to change to. </span><br><span class=\"line\"></span><br><span class=\"line\">cdspell</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, minor errors <span class=\"keyword\">in</span> the spelling of a directory component <span class=\"keyword\">in</span> a <span class=\"built_in\">cd</span> </span><br><span class=\"line\">    <span class=\"built_in\">command</span> will be corrected. The errors checked <span class=\"keyword\">for</span> are transposed characters, </span><br><span class=\"line\">    a missing character, and a character too many. If a correction is found, the </span><br><span class=\"line\">    corrected path is printed, and the <span class=\"built_in\">command</span> proceeds. This option is only used </span><br><span class=\"line\">    by interactive shells.</span><br><span class=\"line\"></span><br><span class=\"line\">checkhash</span><br><span class=\"line\">    If this is <span class=\"built_in\">set</span>, Bash checks that a <span class=\"built_in\">command</span> found <span class=\"keyword\">in</span> the <span class=\"built_in\">hash</span> table exists </span><br><span class=\"line\">    before trying to execute it. If a hashed <span class=\"built_in\">command</span> no longer exists, a normal </span><br><span class=\"line\">    path search is performed. </span><br><span class=\"line\"></span><br><span class=\"line\">checkwinsize</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash checks the window size after each <span class=\"built_in\">command</span> and, <span class=\"keyword\">if</span> necessary, </span><br><span class=\"line\">    updates the values of LINES and COLUMNS. </span><br><span class=\"line\"></span><br><span class=\"line\">cmdhist</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash attempts to save all lines of a multiple-line <span class=\"built_in\">command</span> <span class=\"keyword\">in</span> the </span><br><span class=\"line\">    same <span class=\"built_in\">history</span> entry. This allows easy re-editing of multi-line commands. </span><br><span class=\"line\"></span><br><span class=\"line\">dotglob</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash includes filenames beginning with a <span class=\"string\">&#x27;.&#x27;</span> <span class=\"keyword\">in</span> the results of filename </span><br><span class=\"line\">    expansion. </span><br><span class=\"line\"></span><br><span class=\"line\">execfail</span><br><span class=\"line\">    If this is <span class=\"built_in\">set</span>, a non-interactive shell will not <span class=\"built_in\">exit</span> <span class=\"keyword\">if</span> it cannot execute </span><br><span class=\"line\">    the file specified as an argument to the <span class=\"built_in\">exec</span> <span class=\"built_in\">builtin</span> <span class=\"built_in\">command</span>. </span><br><span class=\"line\">    An interactive shell does not <span class=\"built_in\">exit</span> <span class=\"keyword\">if</span> <span class=\"built_in\">exec</span> fails. </span><br><span class=\"line\"></span><br><span class=\"line\">expand_aliases</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, aliases are expanded. This option is enabled by default <span class=\"keyword\">for</span> interactive </span><br><span class=\"line\">    shells. </span><br><span class=\"line\"></span><br><span class=\"line\">extglob</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, the extended pattern matching features described above are enabled. </span><br><span class=\"line\"></span><br><span class=\"line\">histappend</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, the <span class=\"built_in\">history</span> list is appended to the <span class=\"built_in\">history</span> file when the shell exits,</span><br><span class=\"line\">    rather than overwriting the <span class=\"built_in\">history</span> file. </span><br><span class=\"line\">       <span class=\"built_in\">shopt</span> -s histappend</span><br><span class=\"line\">    To append every line to <span class=\"built_in\">history</span> individually <span class=\"built_in\">set</span>:</span><br><span class=\"line\">       PROMPT_COMMAND=<span class=\"string\">&#x27;history -a&#x27;</span></span><br><span class=\"line\">    With these two settings, a new shell will get the <span class=\"built_in\">history</span> lines from all previous</span><br><span class=\"line\">    shells instead of the default <span class=\"string\">&#x27;last window closed&#x27;</span>&gt;<span class=\"built_in\">history</span></span><br><span class=\"line\">   (the <span class=\"built_in\">history</span> file is named by the value of the HISTFILE variable)</span><br><span class=\"line\"></span><br><span class=\"line\">histreedit</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, and Readline is being used, a user is given the opportunity to re-edit </span><br><span class=\"line\">    a failed <span class=\"built_in\">history</span> substitution. </span><br><span class=\"line\"></span><br><span class=\"line\">histverify</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, and Readline is being used, the results of <span class=\"built_in\">history</span> substitution </span><br><span class=\"line\">    are not immediately passed to the shell parser. Instead, the resulting line </span><br><span class=\"line\">    is loaded into the Readline editing buffer, allowing further modification. </span><br><span class=\"line\"></span><br><span class=\"line\">hostcomplete</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, and Readline is being used, Bash will attempt to perform hostname </span><br><span class=\"line\">    completion when a word containing a <span class=\"string\">&#x27;@&#x27;</span> is being completed. </span><br><span class=\"line\">    This option is enabled by default. </span><br><span class=\"line\"></span><br><span class=\"line\">huponexit</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash will send SIGHUP to all <span class=\"built_in\">jobs</span> when an interactive </span><br><span class=\"line\">    login shell exits. </span><br><span class=\"line\"></span><br><span class=\"line\">interactive_comments</span><br><span class=\"line\">    Allow a word beginning with <span class=\"string\">&#x27;#&#x27;</span> to cause that word and all </span><br><span class=\"line\">    remaining characters on that line to be ignored <span class=\"keyword\">in</span> an interactive shell. This </span><br><span class=\"line\">    option is enabled by default. </span><br><span class=\"line\"></span><br><span class=\"line\">lithist</span><br><span class=\"line\">    If enabled, and the cmdhist option is enabled, multi-line commands </span><br><span class=\"line\">    are saved to the <span class=\"built_in\">history</span> with embedded newlines rather than using semicolon </span><br><span class=\"line\">    separators <span class=\"built_in\">where</span> possible. </span><br><span class=\"line\"></span><br><span class=\"line\">mailwarn</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, and a file that Bash is checking <span class=\"keyword\">for</span> mail has been accessed since </span><br><span class=\"line\">    the last time it was checked, the message <span class=\"string\">&quot;The mail in mailfile </span></span><br><span class=\"line\"><span class=\"string\">    has been read&quot;</span> is displayed. </span><br><span class=\"line\"></span><br><span class=\"line\">no_empty_cmd_completion</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, and Readline is being used, Bash will not attempt to search the </span><br><span class=\"line\">    PATH <span class=\"keyword\">for</span> possible completions when completion is attempted on </span><br><span class=\"line\">    an empty line. </span><br><span class=\"line\"></span><br><span class=\"line\">nocaseglob</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash matches filenames <span class=\"keyword\">in</span> a case-insensitive fashion when performing </span><br><span class=\"line\">    filename expansion. </span><br><span class=\"line\"></span><br><span class=\"line\">nullglob</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, Bash allows filename patterns <span class=\"built_in\">which</span> match no files to expand to </span><br><span class=\"line\">    a null string, rather than themselves. </span><br><span class=\"line\"></span><br><span class=\"line\">progcomp</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, the programmable completion facilities are enabled. This option </span><br><span class=\"line\">    is enabled by default. </span><br><span class=\"line\"></span><br><span class=\"line\">promptvars</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, prompt strings undergo variable and parameter expansion after being </span><br><span class=\"line\">    expanded. This option is enabled by default. </span><br><span class=\"line\"></span><br><span class=\"line\">restricted_shell</span><br><span class=\"line\">    The shell sets this option <span class=\"keyword\">if</span> it is started <span class=\"keyword\">in</span> restricted mode. The value </span><br><span class=\"line\">    can not be changed. This is not reset when the startup files are executed, </span><br><span class=\"line\">    allowing the startup files to discover whether or not a shell is restricted. </span><br><span class=\"line\"></span><br><span class=\"line\">shift_verbose</span><br><span class=\"line\">    If this is <span class=\"built_in\">set</span>, the <span class=\"built_in\">shift</span> <span class=\"built_in\">builtin</span> prints an error message when </span><br><span class=\"line\">    the <span class=\"built_in\">shift</span> count exceeds the number of positional parameters. </span><br><span class=\"line\"></span><br><span class=\"line\">sourcepath</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, the <span class=\"built_in\">source</span> <span class=\"built_in\">builtin</span> uses the value of PATH </span><br><span class=\"line\">    to find the directory containing the file supplied as an argument. This option </span><br><span class=\"line\">    is enabled by default. </span><br><span class=\"line\"></span><br><span class=\"line\">xpg_echo</span><br><span class=\"line\">    If <span class=\"built_in\">set</span>, the <span class=\"built_in\">echo</span> <span class=\"built_in\">builtin</span> expands backslash-escape sequences </span><br><span class=\"line\">    by default. </span><br></pre></td></tr></table></figure>\n","content_text":"图源：Miv4t - 《MACHiNERY》，Pid：77186528 Windows 下的 cat 和 grepls、cat、grep这三个命令，往往是 Linux 初学者最先了解、日常使用 Linux 时不可或缺的。对于 Windows 系统而言，同样有三个命令可以完成上述工作：dir、type与findstr。 例如，用 type 显示文件内容： 或者用 findstr 结合管道匹配先前程序输出内容中的字符串： 也可以结合正则表达式： 当然，如果你不满足于系统命令的显示效果，你也可以尝试下面两款开源于 Github 的工具： peco项目链接：https://github.com/peco/peco peco可以实现对管道输入的文本进行快速搜索、排序、多行选择等功能，使用 Golang 编写。目前仍不支持中文编码（GBK），且不支持默认的 Windows Powershell 终端（你需要使用传统的命令提示符，或者更先进的终端程序，比如 Hyper 或者 Windows Terminal）。该项目仍在活跃开发中，合理的使用可以提升效率。 bat项目链接：https://github.com/sharkdp/bat bat是一款替代 cat/type 的工具，使用 Golang 编写。加入了代码高亮、Git 增删标识、不可打印字符显示等功能。 使用参数 -A 可以显示所有不可打印字符： 软连接、硬链接 使用命令行 在 Linux 下，软连接（即符号链接）和硬链接的使用是非常普遍的。我们经常需要使用 ln 命令来进行创建。 创建硬链接的命令是： 1ln [Target] [Link name] 创建软连接，只需要再加上参数 -s 即可。既然是“链接”，那么说明对链接指向的文件进行修改实际上就是对源文件本身进行修改。 硬链接与源文件必须处于同一文件系统内，且源文件必须真实存在。且硬链接的源文件必须是单一文件，不能是目录，因为这样会造成硬链接包含地狱。软连接的源文件则可以是文件，也可以是目录，且无需实际存在。源文件不存在的软连接成为死链接。软连接具有自己的权限与文件属性。软连接可以跨文件系统链接。删除硬链接和软连接均不会对源文件产生影响。 Windows 下 NTFS 文件系统中也有类似的概念，且 Windows 中也提供了对应的创建链接的命令。 创建软链接的命令是： 1mklink [Link] [Target] 这个命令 Powershell 中是没有的，因此依然需要使用传统的命令提示符。同时注意，Link 和 Target 的顺序是相反的（这也导致我总是记错）。如果创建硬链接，加参数 /H 即可。 同时要注意，对于目录的软连接与符号链接有稍许不同。目录符号连接与 Linux 下的目录软链接基本等同，具有独立的文件属性，在移动时仍保持相对或绝对路径的链接关系，在复制时创建源文件的副本（同 Linux 下使用 cp 直接复制软连接。Linux 下的 cp -d 可以将软连接复制为软连接，而不是将软连接复制为文件）。而 Win 下的目录软链接在移动时，会在目标位置创建同名文件夹，并把源目录内的所有文件移动至新的目录。 创建目录符号连接的命令： 1mklink /D [Link] [Target Dir] 创建目录软连接的命令： 1mklink /J [Link] [Target Dir] rm 删除除指定文件外的其他文件Linux 下，删除一个文件 / 文件夹，或删除该文件夹下所有文件等操作都很简单。但如果想保留文件夹下某一个或某几个文件，同时删除其他文件，该如何操作？ 可以结合 ls、grep 和xargs： 1ls | grep -vE &lt;FileName&gt; | xargs rm -rf 这是最传统的方式。你也可以使用一种 bash 技巧，无需借助 xargs 即可完成这一目的。 1234# 开启需要的 shell optionshopt -s extglob# 然后运行！rm -rf !(&lt;FileName&gt;) 下面附上 shopt 的 cli 参数解释，以及 shell options 列表： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147Syntax shopt [-pqsu] [-o] [optname ...]Options -s Enable (set) each optname -u Disable (unset) each optname. -p Display a list of all settable options, with an indication of whether or not each is set. The output is displayed in a form that can be reused as input. (-p is the default action) -q Suppresses normal output; the return status indicates whether the optname is set or unset. If multiple optname arguments are given with &#x27;-q&#x27;, the return status is zero if all optnames are enabled; non-zero otherwise. -o Restricts the values of optname to be those defined for the &#x27;-o&#x27; option to the set builtin.If either &#x27;-s&#x27; or &#x27;-u&#x27; is used with no optname arguments, the display is limited to those options which are set or unset, respectively. Unless otherwise noted, the shopt options are disabled (off) by default.The return status is zero unless an optname was *not* enabled or was not a valid shell option.The list of shopt options is:cdable_vars If this is set, an argument to the cd builtin command that is not a directory is assumed to be the name of a variable whose value is the directory to change to. cdspell If set, minor errors in the spelling of a directory component in a cd command will be corrected. The errors checked for are transposed characters, a missing character, and a character too many. If a correction is found, the corrected path is printed, and the command proceeds. This option is only used by interactive shells.checkhash If this is set, Bash checks that a command found in the hash table exists before trying to execute it. If a hashed command no longer exists, a normal path search is performed. checkwinsize If set, Bash checks the window size after each command and, if necessary, updates the values of LINES and COLUMNS. cmdhist If set, Bash attempts to save all lines of a multiple-line command in the same history entry. This allows easy re-editing of multi-line commands. dotglob If set, Bash includes filenames beginning with a &#x27;.&#x27; in the results of filename expansion. execfail If this is set, a non-interactive shell will not exit if it cannot execute the file specified as an argument to the exec builtin command. An interactive shell does not exit if exec fails. expand_aliases If set, aliases are expanded. This option is enabled by default for interactive shells. extglob If set, the extended pattern matching features described above are enabled. histappend If set, the history list is appended to the history file when the shell exits, rather than overwriting the history file. shopt -s histappend To append every line to history individually set: PROMPT_COMMAND=&#x27;history -a&#x27; With these two settings, a new shell will get the history lines from all previous shells instead of the default &#x27;last window closed&#x27;&gt;history (the history file is named by the value of the HISTFILE variable)histreedit If set, and Readline is being used, a user is given the opportunity to re-edit a failed history substitution. histverify If set, and Readline is being used, the results of history substitution are not immediately passed to the shell parser. Instead, the resulting line is loaded into the Readline editing buffer, allowing further modification. hostcomplete If set, and Readline is being used, Bash will attempt to perform hostname completion when a word containing a &#x27;@&#x27; is being completed. This option is enabled by default. huponexit If set, Bash will send SIGHUP to all jobs when an interactive login shell exits. interactive_comments Allow a word beginning with &#x27;#&#x27; to cause that word and all remaining characters on that line to be ignored in an interactive shell. This option is enabled by default. lithist If enabled, and the cmdhist option is enabled, multi-line commands are saved to the history with embedded newlines rather than using semicolon separators where possible. mailwarn If set, and a file that Bash is checking for mail has been accessed since the last time it was checked, the message &quot;The mail in mailfile has been read&quot; is displayed. no_empty_cmd_completion If set, and Readline is being used, Bash will not attempt to search the PATH for possible completions when completion is attempted on an empty line. nocaseglob If set, Bash matches filenames in a case-insensitive fashion when performing filename expansion. nullglob If set, Bash allows filename patterns which match no files to expand to a null string, rather than themselves. progcomp If set, the programmable completion facilities are enabled. This option is enabled by default. promptvars If set, prompt strings undergo variable and parameter expansion after being expanded. This option is enabled by default. restricted_shell The shell sets this option if it is started in restricted mode. The value can not be changed. This is not reset when the startup files are executed, allowing the startup files to discover whether or not a shell is restricted. shift_verbose If this is set, the shift builtin prints an error message when the shift count exceeds the number of positional parameters. sourcepath If set, the source builtin uses the value of PATH to find the directory containing the file supplied as an argument. This option is enabled by default. xpg_echo If set, the echo builtin expands backslash-escape sequences by default.","summary":"图源：Miv4t - 《MACHiNERY》，Pid：77186528 Windows 下的 cat 和 grepls、cat、grep这三个命令，往往是Linux初学者最先了解、日常使用Linux时不可或缺的。对于Windows系统而言，同样有三个命令可以完成上述工作：dir、type与findstr。 例如，用type显示文件内容： 或者用findstr结合管道匹配先前程序输出内容中的字符串： 也可以结合正则表达式： 当然，如果你不满足于系统命令的显示效果，你也可以尝试下面两款开源于Github的工具： peco项目链接：https://github.com/peco/peco peco可以实现对管道输入的文本进行快速搜索、排序、多行选择等功能，使用Golang编写。目前仍不支持中文编码（GBK），且不支持默认的Windows Powershell终端（你需要使用传统的命令提示符，或者更先进的终端程序，比如Hyper或者Windows Terminal）。该项目仍在活跃开发中，合理的使用可以提升效率。","date_published":"2020-12-07T17:00:00.000Z","tags":["自由探索","完成编写","小tricks","笔记"]},{"id":"https://zhouweitong3.github.io/2020/11/22/019-hexo-new-things/","url":"https://zhouweitong3.github.io/2020/11/22/019-hexo-new-things/","title":"Hexo 新姿势！","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《三色Δ绘恋》第 8 幕 烟花大会</p>\n<p>Hexo 的插件真是个好东西！一开始部署博客的时候并没有太在意插件的问题，毕竟觉得博客主题自带的插件其实挺全面的，足够使用了。但是用久了总是会腻，就想着简单的博客能不能有一些新操作新方法加入。即使是添加写功能也好。于是就翻了翻插件目录，挑了些比较有用的插件，拿出来做个总结，同时也是为了方便以后使用做的一个简单记录。</p>\n<h2 id=\"文字上标\"><a href=\"# 文字上标\" class=\"headerlink\" title=\"文字上标\"></a>文字上标 </h2><p> 插件是<code>hexo-ruby-character</code>，需要在 Linux 环境下编译 npm 包。</p>\n<p>示例：<code>&#123;% ruby Chocolate | Vanilla %&#125;</code> ，也可方便的给汉字注音，例如：<code>&#123;% ruby 鬼魅魍魉 | 鬼魅魍魉 %&#125;</code>，又或者是恶搞，类似： <code>&#123;% ruby 精彩节目 | 前方高能 %&#125;</code>，同时也适用于其他语言，譬如：<code>&#123;% ruby 噓 | うそ %&#125; だの？</code></p>\n<p>由于其依赖包 nodejieba 兼容性问题，此处不再提供演示。</p>\n<h2 id=\"管理员界面\"><a href=\"# 管理员界面\" class=\"headerlink\" title=\"管理员界面\"></a>管理员界面 </h2><p> 插件是 <code>hexo-admin</code>，效果是一个类似 CodiMD 编辑页面的“管理控制台”，可以实时编辑预览 Markdown 文章，修改 tag，从剪贴板粘贴图片到文章等操作。注意：仅用于<code>hexo s</code> 状态下的博客实例。</p>\n<h2 id=\"文章加密\"><a href=\"# 文章加密\" class=\"headerlink\" title=\"文章加密\"></a>文章加密 </h2><p> 插件是<code>hexo-blog-encrypt</code>，使用前须在站点配置文件加入以下内容：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">encrypt:</span></span><br><span class=\"line\">    <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>随后在文章的开头部分加入 <code>password:</code> 字段设置密码即可。</p>\n<p>同时，配合 <code>abstract:</code> 字段和 <code>message:</code> 字段可以设置对无密码人的提示信息。同时注意不要设置 toc。</p>\n<h2 id=\"中英文自动空格\"><a href=\"# 中英文自动空格\" class=\"headerlink\" title=\"中英文自动空格\"></a>中英文自动空格 </h2><p> 插件为 <code>hexo-filter-auto-spacing</code>，<code>npm install --save</code> 之后就可以用，无需手动设置。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"插入行内 JS-CSS- 图片\"><a href=\"# 插入行内 JS-CSS- 图片\" class=\"headerlink\" title=\"插入行内 JS/CSS/ 图片\"></a>插入行内 JS/CSS/ 图片 </h2><p> 插件为<code>hexo-filter-inline-assets</code>。</p>\n<p>站点设置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">inline_assets:</span></span><br><span class=\"line\">    <span class=\"attr\">enabled:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"attr\">limit:</span> <span class=\"number\">100000</span></span><br></pre></td></tr></table></figure>\n\n<p>随后引入：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;css/main.css?__inline=true&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">&quot;myscript.js?__inline=true&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"插入 -ASCIInema- 终端短视频\"><a href=\"# 插入 -ASCIInema- 终端短视频\" class=\"headerlink\" title=\"插入 ASCIInema 终端短视频\"></a>插入 ASCIInema 终端短视频 </h2><p> 插件为 <code>hexo-filter-asciinema</code>，作用是允许向博客文章内插入<a href=\"https://asciinema.org/\">ASCIInema</a> 平台的视频。</p>\n<p>站点设置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">asciinema:</span></span><br><span class=\"line\">    <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n\n<p>随后演示机安装 asciinema，<code>sudo apt install asciinema</code>，并对 asciinema 进行授权，<code>asciinema auth</code>。浏览器打开程序给出的链接，登入账号、查收验证邮件，即可成功启用。使用 <code>asciinema rec</code> 开始录制。由于该网站被墙，因此可以在录制结束后按 <code>&lt;Ctrl+C&gt;</code> 保存至本地，并在本地引用。</p>\n<p>实例：<link rel=\"stylesheet\" type=\"text/css\" href=\"/assets/asciinema-player.css\" /><script src=\"/assets/asciinema-player.js\"></script><asciinema-player src=\"./tmplqth0fkw-ascii.cast\"></asciinema-player></p>\n<h2 id=\"快速上标\"><a href=\"# 快速上标\" class=\"headerlink\" title=\"快速上标\"></a>快速上标 </h2><p> 插件为<code>hexo-filter-sup</code>，站点设置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">sup:</span></span><br><span class=\"line\">    <span class=\"attr\">markup:</span> <span class=\"string\">&#x27;^&#x27;</span></span><br></pre></td></tr></table></figure>\n\n<p>实例：x^2^+5=10</p>\n<h2 id=\"文本提示\"><a href=\"# 文本提示\" class=\"headerlink\" title=\"文本提示\"></a>文本提示 </h2><p> 插件为<code>hexo-tag-hint</code>，实例：大家好，这个博客用了<span style=\"border-bottom: 1px dashed #389fff;\"><span class=\"hint--top hint--rounded hint--info\" aria-label=\"一个静态博客框架\" ontouchstart>Hexo</span></span>。</p>\n<p>注意字符串中有单引号的时候加反斜线转义。</p>\n<h2 id=\"H5 视频\"><a href=\"#H5 视频\" class=\"headerlink\" title=\"H5 视频\"></a>H5 视频 </h2><p> 插件为<code>hexo-tag-html5video</code>，实例：</p>\n<video width='100%' height='250px' controls><source src='/2020/11/22/019-hexo-new-things/2.5_CG_Live_01_mux.mp4' type=video/mp4> Your browser does not support the webm tag.</video>\n\n<p>第一行三个参数必须带上，不然默认<code>video/webm</code>。</p>\n<h2 id=\"统一 ID\"><a href=\"# 统一 ID\" class=\"headerlink\" title=\"统一 ID\"></a>统一 ID</h2><p>插件为<code>hexo-uuid</code>，作用是给每一个页面自动生成一个 UUID 字段。你可以拿这个字段做些别的事情，比如将其设置为博文链接什么的。</p>\n<h2 id=\"二维码\"><a href=\"# 二维码\" class=\"headerlink\" title=\"二维码\"></a>二维码 </h2><p> 插件为<code>hexo-tag-qrcode</code>，实例：</p>\n<img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAB9CAAAAACq6zP5AAABKElEQVR42u3auxLDIAxEUf7/p0nnCuRdmUnBXqpMHjp4xgFJZoz3MZ+xfW8uxjgz0G/V527Ueh1PiIwer9cR6ljbudWR0dHf9Xr1RUf/g776H6CjO3q9v9e7+jYZOJRdoF+oC7VG89WhSgr9Ln2KQ5hbIyh6pq7Ww/WGrqaby6+gx+lqt6bu2whl9DIeerD+pQHYTBWGlRKg36qrWV8dUG0yoifrfu+lubXvLxM9Uxcmo2aafuGNHqpbj3i79/L2y+jBunCwpe5Hqwu0sr+jJ+nC75pVzX7S6HG61U722zgvH6Bn6lZxYS3Bh54Qot+qW3e6f7DZyyrRk/TPJw66NQ86utts9k8yo6P3dHWRVZZb9GBdLZTryQiXhI7u7MxCQ+fLyQT0EP0HKVolV1ZRM98AAAAASUVORK5CYII=\" alt=\"\"title=\" 扫扫看！\"class=\" 扫我 \">\n\n<h2 id=\"下拉抽屉\"><a href=\"# 下拉抽屉\" class=\"headerlink\" title=\"下拉抽屉\"></a>下拉抽屉 </h2><p> 插件为<code>hexo-tag-details</code>，实例：</p>\n<details><summary>怎样才能订阅你博客的更新？</summary><p>订阅 RSS 啊！</p>\n</details>\n\n<h2 id=\"SoundCloud\"><a href=\"#SoundCloud\" class=\"headerlink\" title=\"SoundCloud\"></a>SoundCloud</h2><p>插件为<code>hexo-tag-soundcloud</code>，实例：</p>\n<div class=\"soundcloud-wrapper\"><iframe width=\"100%\" height=\"450\" scrolling=\"no\" frameborder=\"no\" src=\"https://w.soundcloud.com/player/?url=https%3A%2F%2Fsoundcloud.com%2Fkawaii-music-192471320%2Fost-weathering-with-you-theme-song-grand-escape-radwimps-feattoko-miura&amp;auto_play=false&amp;hide_related=true&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;visual=true\"></iframe></div>\n\n<p>当然，不加链接加 Track ID 也是可以的。</p>\n<h2 id=\"脚注\"><a href=\"# 脚注\" class=\"headerlink\" title=\"脚注\"></a>脚注 </h2><p> 插件为<code>hexo-footnotes</code>，实例：我真的喜欢读《三体》<sup id=\"fnref:1\"><a href=\"#fn:1\" rel=\"footnote\">1</a></sup></p>\n<p>支持多行注释和 Markdown 注释。</p>\n<h2 id=\"HTML- 标签\"><a href=\"#HTML- 标签\" class=\"headerlink\" title=\"HTML 标签\"></a>HTML 标签 </h2><p> 插件为<code>hexo-tag-htmltag</code>，使用：</p>\n<figure class=\"highlight markdown\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% htmlTag button type=&quot;button&quot; data-submit data-action=&quot;add&quot; aria-controls=&quot;calc&quot;%&#125;</span><br><span class=\"line\">Add 10</span><br><span class=\"line\">&#123;% endhtmlTag %&#125;</span><br></pre></td></tr></table></figure>\n\n<p>等效 HTML 代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">button</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;button&quot;</span> <span class=\"attr\">data-submit</span> <span class=\"attr\">data-action</span>=<span class=\"string\">&quot;add&quot;</span> <span class=\"attr\">aria-controls</span>=<span class=\"string\">&quot;calc&quot;</span>&gt;</span>Add 10<span class=\"tag\">&lt;/<span class=\"name\">button</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"PDF- 文件\"><a href=\"#PDF- 文件\" class=\"headerlink\" title=\"PDF 文件\"></a>PDF 文件 </h2><p> 插件为<code>hexo-pdf</code>，实例：（Modeling Singing F0 With Neural Network Driven Transition-Sustain Models - By Kanru Hua）</p>\n\n\n\t<div class=\"row\">\n    <embed src=\"./Modeling-Singing-F0-With-Neural-Network-Driven-Transition-Sustain-Models.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n\n\n<h2 id=\"MPlayer\"><a href=\"#MPlayer\" class=\"headerlink\" title=\"MPlayer\"></a>MPlayer</h2><p>插入本地 MP3 文件。插件为<code>hexo-tag-mplayer</code>，实例：</p>\n<div id=\"mplayer1716\"></div>\r\n<script src=\"https://cdn.jsdelivr.net/gh/MoePlayer/cPlayer/dist/cplayer.js\"></script>\r\n<script>\r\n    new cplayer({element: document.getElementById('mplayer1716'),\r\n      playlist: [\n    {\n        name: 'm_sys_title_intro',\n        artist: 'Arknights',\n        src: './m_sys_title_intro.mp3'\n    },\n    {},],\nautoplay: false,\nvolume: 0.75,\nplaymode: \"listloop\",\nbig: false,\ndark: false\r\n    })\r\n</script>\n<div id=\"footnotes\"><hr><div id=\"footnotelist\"><ol style=\"list-style:none; padding-left: 0;\"><li id=\"fn:1\"><span style=\"display: inline-block; vertical-align: top; padding-right: 10px;\">1.</span><span style=\"display: inline-block; vertical-align: top;\">作者为 刘慈欣。</span><a href=\"#fnref:1\" rev=\"footnote\"> ↩</a></li></ol></div></div>","content_text":"图源：《三色Δ绘恋》第 8 幕 烟花大会 Hexo 的插件真是个好东西！一开始部署博客的时候并没有太在意插件的问题，毕竟觉得博客主题自带的插件其实挺全面的，足够使用了。但是用久了总是会腻，就想着简单的博客能不能有一些新操作新方法加入。即使是添加写功能也好。于是就翻了翻插件目录，挑了些比较有用的插件，拿出来做个总结，同时也是为了方便以后使用做的一个简单记录。 文字上标 插件是hexo-ruby-character，需要在 Linux 环境下编译 npm 包。 示例：&#123;% ruby Chocolate | Vanilla %&#125; ，也可方便的给汉字注音，例如：&#123;% ruby 鬼魅魍魉 | 鬼魅魍魉 %&#125;，又或者是恶搞，类似： &#123;% ruby 精彩节目 | 前方高能 %&#125;，同时也适用于其他语言，譬如：&#123;% ruby 噓 | うそ %&#125; だの？ 由于其依赖包 nodejieba 兼容性问题，此处不再提供演示。 管理员界面 插件是 hexo-admin，效果是一个类似 CodiMD 编辑页面的“管理控制台”，可以实时编辑预览 Markdown 文章，修改 tag，从剪贴板粘贴图片到文章等操作。注意：仅用于hexo s 状态下的博客实例。 文章加密 插件是hexo-blog-encrypt，使用前须在站点配置文件加入以下内容： 12encrypt: enable: true 随后在文章的开头部分加入 password: 字段设置密码即可。 同时，配合 abstract: 字段和 message: 字段可以设置对无密码人的提示信息。同时注意不要设置 toc。 中英文自动空格 插件为 hexo-filter-auto-spacing，npm install --save 之后就可以用，无需手动设置。 插入行内 JS/CSS/ 图片 插件为hexo-filter-inline-assets。 站点设置： 123inline_assets: enabled: true limit: 100000 随后引入： 12&lt;link rel=&quot;stylesheet&quot; href=&quot;css/main.css?__inline=true&quot;&gt;&lt;script src=&quot;myscript.js?__inline=true&quot;&gt;&lt;/script&gt; 插入 ASCIInema 终端短视频 插件为 hexo-filter-asciinema，作用是允许向博客文章内插入ASCIInema 平台的视频。 站点设置： 12asciinema: enable: true 随后演示机安装 asciinema，sudo apt install asciinema，并对 asciinema 进行授权，asciinema auth。浏览器打开程序给出的链接，登入账号、查收验证邮件，即可成功启用。使用 asciinema rec 开始录制。由于该网站被墙，因此可以在录制结束后按 &lt;Ctrl+C&gt; 保存至本地，并在本地引用。 实例： 快速上标 插件为hexo-filter-sup，站点设置： 12sup: markup: &#x27;^&#x27; 实例：x^2^+5=10 文本提示 插件为hexo-tag-hint，实例：大家好，这个博客用了Hexo。 注意字符串中有单引号的时候加反斜线转义。 H5 视频 插件为hexo-tag-html5video，实例： Your browser does not support the webm tag. 第一行三个参数必须带上，不然默认video/webm。 统一 ID插件为hexo-uuid，作用是给每一个页面自动生成一个 UUID 字段。你可以拿这个字段做些别的事情，比如将其设置为博文链接什么的。 二维码 插件为hexo-tag-qrcode，实例： 下拉抽屉 插件为hexo-tag-details，实例： 怎样才能订阅你博客的更新？订阅 RSS 啊！ SoundCloud插件为hexo-tag-soundcloud，实例： 当然，不加链接加 Track ID 也是可以的。 脚注 插件为hexo-footnotes，实例：我真的喜欢读《三体》1 支持多行注释和 Markdown 注释。 HTML 标签 插件为hexo-tag-htmltag，使用： 123&#123;% htmlTag button type=&quot;button&quot; data-submit data-action=&quot;add&quot; aria-controls=&quot;calc&quot;%&#125;Add 10&#123;% endhtmlTag %&#125; 等效 HTML 代码： 1&lt;button type=&quot;button&quot; data-submit data-action=&quot;add&quot; aria-controls=&quot;calc&quot;&gt;Add 10&lt;/button&gt; PDF 文件 插件为hexo-pdf，实例：（Modeling Singing F0 With Neural Network Driven Transition-Sustain Models - By Kanru Hua） MPlayer插入本地 MP3 文件。插件为hexo-tag-mplayer，实例： new cplayer({element: document.getElementById('mplayer1716'), playlist: [ { name: 'm_sys_title_intro', artist: 'Arknights', src: './m_sys_title_intro.mp3' }, {},], autoplay: false, volume: 0.75, playmode: \"listloop\", big: false, dark: false }) 1.作者为 刘慈欣。 ↩","summary":"图源：《三色Δ绘恋》第8幕 烟花大会 Hexo的插件真是个好东西！一开始部署博客的时候并没有太在意插件的问题，毕竟觉得博客主题自带的插件其实挺全面的，足够使用了。但是用久了总是会腻，就想着简单的博客能不能有一些新操作新方法加入。即使是添加写功能也好。于是就翻了翻插件目录，挑了些比较有用的插件，拿出来做个总结，同时也是为了方便以后使用做的一个简单记录。 文字上标插件是hexo-ruby-character，需要在Linux环境下编译npm包。 示例：&#123;% ruby Chocolate | Vanilla %&#125; ，也可方便的给汉字注音，例如：&#123;% ruby 鬼魅魍魉 | 鬼魅魍魉 %&#125;，又或者是恶搞，类似： &#123;% ruby 精彩节目 | 前方高能 %&#125;，同时也适用于其他语言，譬如：&#123;% ruby 噓 | うそ %&#125; だの？ 由于其依赖包nodejieba兼容性问题，此处不再提供演示。 管理员界面插件是hexo-admin，效果是一个类似CodiMD编辑页面的“管理控制台”，可以实时编辑预览Markdown文章，修改tag，从剪贴板粘贴图片到文章等操作。注意：仅用于hexo s状态下的博客实例。 文章加密插件是hexo-blog-encrypt，使用前须在站点配置文件加入以下内容： 12encrypt: enable: true 随后在文章的开头部分加入password:字段设置密码即可。 同时，配合abstract:字段和message:字段可以设置对无密码人的提示信息。同时注意不要设置toc。 中英文自动空格插件为hexo-filter-auto-spacing，npm install --save之后就可以用，无需手动设置。","date_published":"2020-11-22T13:40:00.000Z","tags":["自由探索","完成编写","hexo"]},{"id":"https://zhouweitong3.github.io/2019/10/07/015-unpack-tricolour-lovestory/","url":"https://zhouweitong3.github.io/2019/10/07/015-unpack-tricolour-lovestory/","title":"【WIP】解包《三色Δ绘恋》，与 Kirikiri 初探","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《三色Δ绘恋》内附 圣诞节特别篇 “圣夜钟音” 主题桌面壁纸</p>\n<p>舍友买了一份《三色Δ绘恋》，其中的立绘和音乐水准相当不错。某天于是突发奇想，从舍友那里拷贝了份游戏的文件，打算把里面的立绘和音频提取出来。</p>\n<p><img src=\"/2019/10/07/015-unpack-tricolour-lovestory/image-20210411162311645.png\" alt=\"image-20210411162311645\"></p>\n<p>于是开始操作。</p>\n<h2 id=\"确定引擎，准备工具\"><a href=\"# 确定引擎，准备工具\" class=\"headerlink\" title=\"确定引擎，准备工具\"></a>确定引擎，准备工具 </h2><p> 整体的文件结构相当清晰，显然 TricolourLovestory_chs.exe 是中文版本的主程序，TricolourLovestory_chs.cf 是中文版本的启动配置文件，steam_api.dll 是连接 Steam 进行软件正版验证、存档上传等功能的插件，其他的 xp3 文件就是我们要找的资源包了。所以针对此文件格式，寻找对应的工具，进行解包。</p>\n<p>经过 Google 和 Github 的多方搜索，找到了两个最为常用的工具，<a href=\"https://github.com/lioncash/ExtractData\">ExtractData</a> 与 <a href=\"https://github.com/xmoeproject/KrkrExtract\">KrkrExtract</a>。前者可以对资源包内的文件进行提取，后者可以对资源包内的文件进行提取、修改和删除。这里我们使用普适性更强的 ExtractData 进行提取操作。</p>\n<span id=\"more\"></span>\n\n<h2 id=\"无脑提取\"><a href=\"# 无脑提取\" class=\"headerlink\" title=\"无脑提取\"></a>无脑提取 </h2><p> 打开 ExtractData，再打开待分析的 xp3 文件即可。</p>\n<p><img src=\"/2019/10/07/015-unpack-tricolour-lovestory/image-20210411162342815.png\" alt=\"image-20210411162342815\"></p>\n<p>上图即是分析后的结果，在想要提取的文件上右键，“Extract Selected Range”即可提取出此文件。同时在“Quick Settings”中可以看到 ExtractData 对某些格式文件默认的转换设置（比如 JPG 转换为 PNG），如果不需要自动转换可以在解压的时候选择“Extract Selection without conversion”。</p>\n<p>xp3 类型一般都是 Kirikiri 游戏引擎的资源包类型。某些非媒体类的内容，如脚本和文本，在 Kirikiri 引擎打包资源的过程中会被 zlib 库压缩。ExtractData 也可以识别并解压。</p>\n","content_text":"图源：《三色Δ绘恋》内附 圣诞节特别篇 “圣夜钟音” 主题桌面壁纸 舍友买了一份《三色Δ绘恋》，其中的立绘和音乐水准相当不错。某天于是突发奇想，从舍友那里拷贝了份游戏的文件，打算把里面的立绘和音频提取出来。 于是开始操作。 确定引擎，准备工具 整体的文件结构相当清晰，显然 TricolourLovestory_chs.exe 是中文版本的主程序，TricolourLovestory_chs.cf 是中文版本的启动配置文件，steam_api.dll 是连接 Steam 进行软件正版验证、存档上传等功能的插件，其他的 xp3 文件就是我们要找的资源包了。所以针对此文件格式，寻找对应的工具，进行解包。 经过 Google 和 Github 的多方搜索，找到了两个最为常用的工具，ExtractData 与 KrkrExtract。前者可以对资源包内的文件进行提取，后者可以对资源包内的文件进行提取、修改和删除。这里我们使用普适性更强的 ExtractData 进行提取操作。 无脑提取 打开 ExtractData，再打开待分析的 xp3 文件即可。 上图即是分析后的结果，在想要提取的文件上右键，“Extract Selected Range”即可提取出此文件。同时在“Quick Settings”中可以看到 ExtractData 对某些格式文件默认的转换设置（比如 JPG 转换为 PNG），如果不需要自动转换可以在解压的时候选择“Extract Selection without conversion”。 xp3 类型一般都是 Kirikiri 游戏引擎的资源包类型。某些非媒体类的内容，如脚本和文本，在 Kirikiri 引擎打包资源的过程中会被 zlib 库压缩。ExtractData 也可以识别并解压。","summary":"图源：《三色Δ绘恋》内附 圣诞节特别篇 “圣夜钟音” 主题桌面壁纸 舍友买了一份《三色Δ绘恋》，其中的立绘和音乐水准相当不错。某天于是突发奇想，从舍友那里拷贝了份游戏的文件，打算把里面的立绘和音频提取出来。 于是开始操作。 确定引擎，准备工具整体的文件结构相当清晰，显然 TricolourLovestory_chs.exe 是中文版本的主程序，TricolourLovestory_chs.cf 是中文版本的启动配置文件，steam_api.dll 是连接 Steam 进行软件正版验证、存档上传等功能的插件，其他的 xp3 文件就是我们要找的资源包了。所以针对此文件格式，寻找对应的工具，进行解包。 经过 Google 和 Github 的多方搜索，找到了两个最为常用的工具，ExtractData 与 KrkrExtract。前者可以对资源包内的文件进行提取，后者可以对资源包内的文件进行提取、修改和删除。这里我们使用普适性更强的 ExtractData 进行提取操作。","date_published":"2019-10-07T08:00:00.000Z","tags":["自由探索","WIP","游戏解包"]},{"id":"https://zhouweitong3.github.io/2019/07/23/018-php-7-3-compile-and-ext/","url":"https://zhouweitong3.github.io/2019/07/23/018-php-7-3-compile-and-ext/","title":"PHP 及 PHP 插件编译","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《明日方舟》 战场背景 2</p>\n<p>今后文章会同步更新在 <a href=\"https://blog.csdn.net/weixin_44911246\"> 我的 CSDN 博客</a>，但是还是以这个自己拿阿里云服务器搭建的网站为主的。不过 CSDN 有个好处是可以被国内的搜索引擎抓取到，嗯，省得我做搜索引擎优化了啊。</p>\n<p>如果有人只想看完整写完的文章的话，也请左拐 CSDN，或者 <a href=\"https://www.zhouweitong.site/tags/%E5%AE%8C%E6%88%90%E7%BC%96%E5%86%99/\"> 这里</a>。主站开了七牛云加速，顺便做了 Google 、 Bing 和百度等的搜索引擎收录。最近身体欠佳。原定的学习计划和博客更新计划也不出意外的咕了。没有办法。健康是第一要务。等待过后慢慢去补吧。</p>\n<h2 id=\"编译 -PHP\"><a href=\"# 编译 -PHP\" class=\"headerlink\" title=\"编译 PHP\"></a>编译 PHP</h2><h3 id=\"安装必要环境\"><a href=\"# 安装必要环境\" class=\"headerlink\" title=\"安装必要环境\"></a>安装必要环境 </h3><p> 包含编译器，和编译需要的库。所有的编译操作均在 Ubuntu 19.04 下进行。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt install -y gcc g++ cmake make libxml2-dev libbz2-dev libcurl4-gnutls-dev libzip-dev libwebp-dev libpng-dev libjpeg-dev libxpm-dev libfreetype6-dev</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"下载源码\"><a href=\"# 下载源码\" class=\"headerlink\" title=\"下载源码\"></a>下载源码 </h3><p> 你可以 clone GitHub 上的代码：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/php/php-src.git</span><br></pre></td></tr></table></figure>\n\n<p>当然也可以到 <a href=\"https://www.php.net/downloads.php\">php.net</a> 下载源码并解压：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://www.php.net/distributions/php-7.3.7.tar.gz</span><br><span class=\"line\">tar -xvzf php-7.3.7.tar.gz</span><br><span class=\"line\">rm php-7.3.7.tar.gz</span><br><span class=\"line\"><span class=\"built_in\">cd</span> php-7.3.7/</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"开始编译\"><a href=\"# 开始编译\" class=\"headerlink\" title=\"开始编译\"></a>开始编译 </h3><p> 首先读取插件列表（插件列表没有修改的时候可跳过此步骤）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./buildconf --force</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<p>然后进行基本配置：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir phpbin</span><br><span class=\"line\">./configure \\</span><br><span class=\"line\">            --prefix=~/Document/phpbin \\ <span class=\"comment\"># 是非程序文件 install 的位置</span></span><br><span class=\"line\">            --exec-prefix=~/Document/phpbin \\ <span class=\"comment\"># 是程序文件 install 的位置</span></span><br><span class=\"line\">            --enable-fpm \\</span><br><span class=\"line\">            --enable-cli \\</span><br><span class=\"line\">            --enable-embed=shared \\</span><br><span class=\"line\">            --enable-phpdbg \\</span><br><span class=\"line\">            --enable-phpdbg-webhelper \\</span><br><span class=\"line\">            --enable-phpdbg-debug \\</span><br><span class=\"line\">            --enable-debug \\</span><br><span class=\"line\">            --enable-bcmath \\</span><br><span class=\"line\">            --enable-calendar \\</span><br><span class=\"line\">            --enable-exif \\</span><br><span class=\"line\">            --enable-ftp \\</span><br><span class=\"line\">            --enable-intl \\</span><br><span class=\"line\">            --enable-mbstring \\</span><br><span class=\"line\">            --with-curl \\</span><br><span class=\"line\">            --enable-embedded-mysqli \\</span><br><span class=\"line\">            --enable-pcntl \\</span><br><span class=\"line\">            --enable-shmop \\</span><br><span class=\"line\">            --enable-soap \\</span><br><span class=\"line\">            --enable-sockets \\</span><br><span class=\"line\">            --enable-sysvmsg \\</span><br><span class=\"line\">            --enable-sysvsem \\</span><br><span class=\"line\">            --enable-sysvshm \\</span><br><span class=\"line\">            --enable-wddx \\</span><br><span class=\"line\">            --enable-zip \\</span><br><span class=\"line\">            --with-zlib \\</span><br><span class=\"line\">            --with-zlib-dir \\</span><br><span class=\"line\">            --with-pcre-jit \\</span><br><span class=\"line\">            --with-pcre-regex \\</span><br><span class=\"line\">            --with-iconv \\</span><br><span class=\"line\">            --enable-mysqlnd \\</span><br><span class=\"line\">            --enable-pdo \\</span><br><span class=\"line\">            --enable-hash \\</span><br><span class=\"line\">            --enable-ctype \\</span><br><span class=\"line\">            --enable-json \\</span><br><span class=\"line\">            --enable-session \\</span><br><span class=\"line\">            --enable-xml \\</span><br><span class=\"line\">            --enable-libxml \\</span><br><span class=\"line\">            --enable-simplexml \\</span><br><span class=\"line\">            --enable-fileinfo \\</span><br><span class=\"line\">            --with-openssl \\</span><br><span class=\"line\">            --with-gd \\</span><br><span class=\"line\">            --with-webp-dir \\</span><br><span class=\"line\">            --with-jpeg-dir \\</span><br><span class=\"line\">            --with-png-dir \\</span><br><span class=\"line\">            --with-xpm-dir</span><br></pre></td></tr></table></figure>\n\n<p>随后手动修改 <code>Makefile</code>，手动将<code>CFLAGS_CLEAN</code> 改成如下内容：</p>\n<figure class=\"highlight makefile\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">CFLAGS_CLEAN = -I/usr/<span class=\"keyword\">include</span> -g -O0 -Wall <span class=\"variable\">$(PROF_FLAGS)</span></span><br></pre></td></tr></table></figure>\n\n<p>最后，开始多线程编译：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make all -j8</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p>php 程序主文件在  <code>~/Document/phpbin/bin/php</code> 处。</p>\n<h2 id=\"生成插件\"><a href=\"# 生成插件\" class=\"headerlink\" title=\"生成插件\"></a>生成插件 </h2><p> 生成插件需使用刚刚编译好的 php 可执行文件。当然你也可以额外在系统中安装一套 php（环境）以备不时之需。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install -y apache2 php7 php-xdebug mysql-server mysql-client</span><br></pre></td></tr></table></figure>\n\n<p>随后到 php 源码文件夹、ext 文件夹下，运行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php ./ext_skel.php --ext hello_obj</span><br></pre></td></tr></table></figure>\n\n<p>如果已知插件应用的平台的话，可以加上 <code>--onlyunix</code> 或 <code>--onlywindows</code> 避免生成其他平台的 config 文件。</p>\n<p>在 <code>config.m4</code> 文件中，注意前面的编译命令部分，如果你的插件是独立的，取消掉下面两行的注释（<code>dnl</code>）：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP_ARG_ENABLE(hello_obj, whether to enable hello_obj support,</span><br><span class=\"line\">[--enable-hello_obj          Enable hello_obj support], no)</span><br></pre></td></tr></table></figure>\n\n<p>但是如果你的插件依赖了其他插件的代码（头文件等），你需要保持上面两行的注释并取消下面两行的注释：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">PHP_ARG_WITH(hello_obj, for hello_obj support,</span><br><span class=\"line\">[--with-hello_obj             Include hello_obj support])</span><br></pre></td></tr></table></figure>\n\n<p>注意，不同段的注释要保证对齐。</p>\n<h2 id=\"编译插件\"><a href=\"# 编译插件\" class=\"headerlink\" title=\"编译插件\"></a>编译插件 </h2><p> 最常见的两种方法：重新编译 php 本体和使用 phpize 单独编译插件。</p>\n<p>编译 php 本体的办法很简单，即在 <code>./configure</code> 步骤处看情况加入 <code>--enable-hello_obj</code> 或 <code>--with-hello_obj</code> 参数即可。这种情况下，当没有 php.ini 配置文件时，插件是默认启用的，利用</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">php -r <span class=\"string\">&quot;phpinfo();&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>命令可以查看 phpinfo()输出信息。</p>\n<p>用 phpize 的话，请注意使用 <strong>你编译 PHP 时 prefix 指定的目录下的 phpize（~/Document/phpbin/bin/phpize）</strong>，保证版本一致。</p>\n<p><code>cd</code>到插件源码所在的目录，运行<code>phpsize</code>，会生成编译所需文件。</p>\n<p>随后执行</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./configure --with-php-config=&lt;php-config bin&gt;</span><br></pre></td></tr></table></figure>\n\n<p>其中 php-config bin 为 <strong>你编译 PHP 时 prefix 指定的目录下的 php-config（~/Document/phpbin/bin/php-config）</strong>。</p>\n<p>编译并安装。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">make</span><br><span class=\"line\">make install</span><br></pre></td></tr></table></figure>\n\n<p>.so 文件会自动复制到插件文件夹。在 php.ini 中加载插件即可。</p>\n<figure class=\"highlight ini\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">extension</span>=hello_obj.so</span><br></pre></td></tr></table></figure>\n\n<p>当然，你也可以用 phpize 编译安装 Xdebug 等外置 php 插件。</p>\n","content_text":"图源：《明日方舟》 战场背景 2 今后文章会同步更新在 我的 CSDN 博客，但是还是以这个自己拿阿里云服务器搭建的网站为主的。不过 CSDN 有个好处是可以被国内的搜索引擎抓取到，嗯，省得我做搜索引擎优化了啊。 如果有人只想看完整写完的文章的话，也请左拐 CSDN，或者 这里。主站开了七牛云加速，顺便做了 Google 、 Bing 和百度等的搜索引擎收录。最近身体欠佳。原定的学习计划和博客更新计划也不出意外的咕了。没有办法。健康是第一要务。等待过后慢慢去补吧。 编译 PHP安装必要环境 包含编译器，和编译需要的库。所有的编译操作均在 Ubuntu 19.04 下进行。 12sudo apt-get updatesudo apt install -y gcc g++ cmake make libxml2-dev libbz2-dev libcurl4-gnutls-dev libzip-dev libwebp-dev libpng-dev libjpeg-dev libxpm-dev libfreetype6-dev 下载源码 你可以 clone GitHub 上的代码： 1git clone https://github.com/php/php-src.git 当然也可以到 php.net 下载源码并解压： 1234wget https://www.php.net/distributions/php-7.3.7.tar.gztar -xvzf php-7.3.7.tar.gzrm php-7.3.7.tar.gzcd php-7.3.7/ 开始编译 首先读取插件列表（插件列表没有修改的时候可跳过此步骤）： 1./buildconf --force 然后进行基本配置： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849mkdir phpbin./configure \\ --prefix=~/Document/phpbin \\ # 是非程序文件 install 的位置 --exec-prefix=~/Document/phpbin \\ # 是程序文件 install 的位置 --enable-fpm \\ --enable-cli \\ --enable-embed=shared \\ --enable-phpdbg \\ --enable-phpdbg-webhelper \\ --enable-phpdbg-debug \\ --enable-debug \\ --enable-bcmath \\ --enable-calendar \\ --enable-exif \\ --enable-ftp \\ --enable-intl \\ --enable-mbstring \\ --with-curl \\ --enable-embedded-mysqli \\ --enable-pcntl \\ --enable-shmop \\ --enable-soap \\ --enable-sockets \\ --enable-sysvmsg \\ --enable-sysvsem \\ --enable-sysvshm \\ --enable-wddx \\ --enable-zip \\ --with-zlib \\ --with-zlib-dir \\ --with-pcre-jit \\ --with-pcre-regex \\ --with-iconv \\ --enable-mysqlnd \\ --enable-pdo \\ --enable-hash \\ --enable-ctype \\ --enable-json \\ --enable-session \\ --enable-xml \\ --enable-libxml \\ --enable-simplexml \\ --enable-fileinfo \\ --with-openssl \\ --with-gd \\ --with-webp-dir \\ --with-jpeg-dir \\ --with-png-dir \\ --with-xpm-dir 随后手动修改 Makefile，手动将CFLAGS_CLEAN 改成如下内容： 1CFLAGS_CLEAN = -I/usr/include -g -O0 -Wall $(PROF_FLAGS) 最后，开始多线程编译： 12make all -j8make install php 程序主文件在 ~/Document/phpbin/bin/php 处。 生成插件 生成插件需使用刚刚编译好的 php 可执行文件。当然你也可以额外在系统中安装一套 php（环境）以备不时之需。 1sudo apt install -y apache2 php7 php-xdebug mysql-server mysql-client 随后到 php 源码文件夹、ext 文件夹下，运行 1php ./ext_skel.php --ext hello_obj 如果已知插件应用的平台的话，可以加上 --onlyunix 或 --onlywindows 避免生成其他平台的 config 文件。 在 config.m4 文件中，注意前面的编译命令部分，如果你的插件是独立的，取消掉下面两行的注释（dnl）： 12PHP_ARG_ENABLE(hello_obj, whether to enable hello_obj support,[--enable-hello_obj Enable hello_obj support], no) 但是如果你的插件依赖了其他插件的代码（头文件等），你需要保持上面两行的注释并取消下面两行的注释： 12PHP_ARG_WITH(hello_obj, for hello_obj support,[--with-hello_obj Include hello_obj support]) 注意，不同段的注释要保证对齐。 编译插件 最常见的两种方法：重新编译 php 本体和使用 phpize 单独编译插件。 编译 php 本体的办法很简单，即在 ./configure 步骤处看情况加入 --enable-hello_obj 或 --with-hello_obj 参数即可。这种情况下，当没有 php.ini 配置文件时，插件是默认启用的，利用 1php -r &quot;phpinfo();&quot; 命令可以查看 phpinfo()输出信息。 用 phpize 的话，请注意使用 你编译 PHP 时 prefix 指定的目录下的 phpize（~/Document/phpbin/bin/phpize），保证版本一致。 cd到插件源码所在的目录，运行phpsize，会生成编译所需文件。 随后执行 1./configure --with-php-config=&lt;php-config bin&gt; 其中 php-config bin 为 你编译 PHP 时 prefix 指定的目录下的 php-config（~/Document/phpbin/bin/php-config）。 编译并安装。 12makemake install .so 文件会自动复制到插件文件夹。在 php.ini 中加载插件即可。 1extension=hello_obj.so 当然，你也可以用 phpize 编译安装 Xdebug 等外置 php 插件。","summary":"图源：《明日方舟》 战场背景2 今后文章会同步更新在我的 CSDN 博客，但是还是以这个自己拿阿里云服务器搭建的网站为主的。不过CSDN有个好处是可以被国内的搜索引擎抓取到，嗯，省得我做搜索引擎优化了啊。 如果有人只想看完整写完的文章的话，也请左拐 CSDN，或者这里。主站开了七牛云加速，顺便做了 Google 、 Bing 和百度等的搜索引擎收录。最近身体欠佳。原定的学习计划和博客更新计划也不出意外的咕了。没有办法。健康是第一要务。等待过后慢慢去补吧。 编译 PHP安装必要环境包含编译器，和编译需要的库。所有的编译操作均在 Ubuntu 19.04 下进行。 12sudo apt-get updatesudo apt install -y gcc g++ cmake make libxml2-dev libbz2-dev libcurl4-gnutls-dev libzip-dev libwebp-dev libpng-dev libjpeg-dev libxpm-dev libfreetype6-dev 下载源码你可以 clone GitHub 上的代码： 1git clone https://github.com/php/php-src.git 当然也可以到 php.net 下载源码并解压： 1234wget https://www.php.net/distributions/php-7.3.7.tar.gztar -xvzf php-7.3.7.tar.gzrm php-7.3.7.tar.gzcd php-7.3.7/ 开始编译首先读取插件列表（插件列表没有修改的时候可跳过此步骤）： 1./buildconf --force","date_published":"2019-07-23T13:30:00.000Z","tags":["开发与代码","完成编写","PHP相关"]},{"id":"https://zhouweitong3.github.io/2019/07/02/008-linux-windows-tricks-02/","url":"https://zhouweitong3.github.io/2019/07/02/008-linux-windows-tricks-02/","title":"Linux & Windows 小技巧（2）","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《ソード・アート・オンライン（刀剑神域）》第一季第二集 CM</p>\n<p>博客一直在慢速更新…之前一直忙于各种事情，学校的课、比赛、不断接触和学习新的东西，因此没什么机会静下心来好好整理、记录我学到的东西，也就没有办法一并记下我对某些问题的理解和思考。</p>\n<p>之前一度认为，“有写博客文章的时间，还不如好好学点新的东西”。但是自从领悟到我和舍友之间记忆力和知识熟练程度的差距之后，终于肯下定决心好好写自己的博客了——我比不上他们，我真的不是那种过目不忘的人，所以只能通过不断的复习和总结才能勉强记住些东西。</p>\n<p>有人说，初学者是“什么都不会，同时自己不知道自己会什么”，稍有学识的普通人是“自己会些东西，但是自己觉得自己会的很多”，而大神则是“自己会很多东西，但是自己觉得自己学的不多而且不知道自己已经会了什么”。</p>\n<p>可能我还是初学者吧。</p>\n<h2 id=\"git-push- 反复输密码很烦？\"><a href=\"#git-push- 反复输密码很烦？\" class=\"headerlink\" title=\"git push 反复输密码很烦？\"></a>git push 反复输密码很烦？</h2><p>有的时候可能会遇到一种极端情况：假设你要编写脚本，比如：自动化运维脚本。其中涉及到一些对 git 仓库的操作，而且需要密码，比如：在自动脚本中让部署机器拉取私有仓库，或是让部署机器将构建后的代码使用某个 github 账号推送到某个 git 仓库。这个时候需要用户手动输入用户名和密码，但是我们往往不能手动输入——比如公用的 docker build machine，根本不允许用户在构建过程中进行交互。</p>\n<span id=\"more\"></span>\n\n<p>那么我们该如何将用户名和密码“固化”在 clone 的本地仓库里，免去输入用户名密码的麻烦呢？一般有两种做法：首先是手动注册一个 OAuth App，并分配权限。部署机通过此 App 对相关 Repo 进行操作。但是这样做较为复杂，而且也可能存在 Token 过期的问题。</p>\n<p>第二种则较为简便了，只要将 clone 时的链接：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://github.com/&lt;repo owner name&gt;/&lt;repo name&gt;.git</span><br></pre></td></tr></table></figure>\n\n<p>替换成如下的形式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://&lt;your user name&gt;:&lt;your password&gt;@github.com/&lt;repo owner name&gt;/&lt;repo name&gt;.git</span><br></pre></td></tr></table></figure>\n\n<p>即可以实现全程无需输入密码对该本地分支对应的远程分支进行操作。譬如，你要拉取 <code>ObjectNF/hello-word</code> 这个仓库，用户名是 <code>guest</code>，密码是 <code>123456</code>，则链接看起来就是这个样子：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://guest:123456@github.com/ObjectNF/hello-world.git</span><br></pre></td></tr></table></figure>\n\n<p>这种方法是不安全的，因此已被 GitHub 废弃，但仍能在某些其他基于 Git 的代码托管服务提供商（比如 Gitee，或者自建的 Gitea）上使用。</p>\n<p>以下介绍更为安全的替代方法——SSH Key。</p>\n<p>登录 GitHub，找到 Settings -&gt; SSH and GPG keys:</p>\n<p><img src=\"/2019/07/02/008-linux-windows-tricks-02/image-20210411162009437.png\" alt=\"image-20210411162009437\"></p>\n<p>随后进行密钥的生成。启动 Git Bash：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh-keygen</span><br></pre></td></tr></table></figure>\n\n<p>程序会自动生成密钥并将公钥和私钥保存至<code>~/.ssh</code>。</p>\n<p>随后在 GitHub 中添加公钥。通过 <code>cat ~/.ssh/id_rsa.pub</code> 查看公钥，点击 New SSH Key，然后将命令输出粘贴到输入框里即可。</p>\n<p><img src=\"/2019/07/02/008-linux-windows-tricks-02/image-20210411162020976.png\" alt=\"image-20210411162020976\"></p>\n<h2 id=\"Linux- 下查看文件的占用情况\"><a href=\"#Linux- 下查看文件的占用情况\" class=\"headerlink\" title=\"Linux 下查看文件的占用情况\"></a>Linux 下查看文件的占用情况</h2><p><code>lsof</code> 是 List open files 的简称，作用是查看系统中进程占用的文件列表。比如，你想查看自己编写的程序使用了哪些文件，或者想要删除某个文件但却提示“文件被占用”的时候，就可以利用该程序进行查询。</p>\n<p>安装：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install lsof</span><br></pre></td></tr></table></figure>\n\n<p>结合 <code>grep</code> 来查找文件的占用情况：</p>\n<p><img src=\"/2019/07/02/008-linux-windows-tricks-02/image-20210411161018192.png\" alt=\"image-20210411161018192\"></p>\n<p>当然，受到 Linux 哲学（“一切皆文件”）的影响，<code>lsof</code> 工具也可以用来查看端口占用、TCP 连接等。</p>\n<p><img src=\"/2019/07/02/008-linux-windows-tricks-02/image-20210411161047195.png\" alt=\"image-20210411161047195\"></p>\n<h2 id=\"查看 -Linux-ELF- 文件详情？\"><a href=\"# 查看 -Linux-ELF- 文件详情？\" class=\"headerlink\" title=\"查看 Linux ELF 文件详情？\"></a>查看 Linux ELF 文件详情？</h2><p>前一阵子入手了一个路由器，想着在寝室放一个无线 AP。然而比较不巧的是，寝室宽带并非那种可以直接拨号的 PPPoE，而是通过闪讯客户端进行软件拨号，好像还有时间匹配和心跳响应什么的。不过多亏了万能的 GitHub，可以下载到其他大神编写的用于 OpenWRT PPPoE 的 pptd 闪讯插件。</p>\n<p>于是满心欢喜地给路由器插好线，通上电，开 SSH，照着 Repo 里面写的步骤执行。但是拨号阶段却怎么也没成功，不断提示“配置错误”。在检查完脚本、设备号、防火墙、用户名密码、配置文件和插件可执行权限都没问题的情况下，我开始怀疑起插件本身的问题来。</p>\n<p>于是查看系统日志。果然提示“Exec format error.”，即可执行文件的格式错误。那么问题来了，我怎样才能知道该 ELF 格式的各种信息呢？这就需要 <code>readelf</code> 这个工具。</p>\n<p><img src=\"/2019/07/02/008-linux-windows-tricks-02/image-20210411161105478.png\" alt=\"image-20210411161105478\"></p>\n<p>这样就能清楚地看到 ELF 格式的区别，简单方便。</p>\n","content_text":"图源：《ソード・アート・オンライン（刀剑神域）》第一季第二集 CM 博客一直在慢速更新…之前一直忙于各种事情，学校的课、比赛、不断接触和学习新的东西，因此没什么机会静下心来好好整理、记录我学到的东西，也就没有办法一并记下我对某些问题的理解和思考。 之前一度认为，“有写博客文章的时间，还不如好好学点新的东西”。但是自从领悟到我和舍友之间记忆力和知识熟练程度的差距之后，终于肯下定决心好好写自己的博客了——我比不上他们，我真的不是那种过目不忘的人，所以只能通过不断的复习和总结才能勉强记住些东西。 有人说，初学者是“什么都不会，同时自己不知道自己会什么”，稍有学识的普通人是“自己会些东西，但是自己觉得自己会的很多”，而大神则是“自己会很多东西，但是自己觉得自己学的不多而且不知道自己已经会了什么”。 可能我还是初学者吧。 git push 反复输密码很烦？有的时候可能会遇到一种极端情况：假设你要编写脚本，比如：自动化运维脚本。其中涉及到一些对 git 仓库的操作，而且需要密码，比如：在自动脚本中让部署机器拉取私有仓库，或是让部署机器将构建后的代码使用某个 github 账号推送到某个 git 仓库。这个时候需要用户手动输入用户名和密码，但是我们往往不能手动输入——比如公用的 docker build machine，根本不允许用户在构建过程中进行交互。 那么我们该如何将用户名和密码“固化”在 clone 的本地仓库里，免去输入用户名密码的麻烦呢？一般有两种做法：首先是手动注册一个 OAuth App，并分配权限。部署机通过此 App 对相关 Repo 进行操作。但是这样做较为复杂，而且也可能存在 Token 过期的问题。 第二种则较为简便了，只要将 clone 时的链接： 1https://github.com/&lt;repo owner name&gt;/&lt;repo name&gt;.git 替换成如下的形式： 1https://&lt;your user name&gt;:&lt;your password&gt;@github.com/&lt;repo owner name&gt;/&lt;repo name&gt;.git 即可以实现全程无需输入密码对该本地分支对应的远程分支进行操作。譬如，你要拉取 ObjectNF/hello-word 这个仓库，用户名是 guest，密码是 123456，则链接看起来就是这个样子： 1https://guest:123456@github.com/ObjectNF/hello-world.git 这种方法是不安全的，因此已被 GitHub 废弃，但仍能在某些其他基于 Git 的代码托管服务提供商（比如 Gitee，或者自建的 Gitea）上使用。 以下介绍更为安全的替代方法——SSH Key。 登录 GitHub，找到 Settings -&gt; SSH and GPG keys: 随后进行密钥的生成。启动 Git Bash： 1ssh-keygen 程序会自动生成密钥并将公钥和私钥保存至~/.ssh。 随后在 GitHub 中添加公钥。通过 cat ~/.ssh/id_rsa.pub 查看公钥，点击 New SSH Key，然后将命令输出粘贴到输入框里即可。 Linux 下查看文件的占用情况lsof 是 List open files 的简称，作用是查看系统中进程占用的文件列表。比如，你想查看自己编写的程序使用了哪些文件，或者想要删除某个文件但却提示“文件被占用”的时候，就可以利用该程序进行查询。 安装： 1sudo apt-get install lsof 结合 grep 来查找文件的占用情况： 当然，受到 Linux 哲学（“一切皆文件”）的影响，lsof 工具也可以用来查看端口占用、TCP 连接等。 查看 Linux ELF 文件详情？前一阵子入手了一个路由器，想着在寝室放一个无线 AP。然而比较不巧的是，寝室宽带并非那种可以直接拨号的 PPPoE，而是通过闪讯客户端进行软件拨号，好像还有时间匹配和心跳响应什么的。不过多亏了万能的 GitHub，可以下载到其他大神编写的用于 OpenWRT PPPoE 的 pptd 闪讯插件。 于是满心欢喜地给路由器插好线，通上电，开 SSH，照着 Repo 里面写的步骤执行。但是拨号阶段却怎么也没成功，不断提示“配置错误”。在检查完脚本、设备号、防火墙、用户名密码、配置文件和插件可执行权限都没问题的情况下，我开始怀疑起插件本身的问题来。 于是查看系统日志。果然提示“Exec format error.”，即可执行文件的格式错误。那么问题来了，我怎样才能知道该 ELF 格式的各种信息呢？这就需要 readelf 这个工具。 这样就能清楚地看到 ELF 格式的区别，简单方便。","summary":"图源：《ソード・アート・オンライン（刀剑神域）》第一季第二集 CM 博客一直在慢速更新…之前一直忙于各种事情，学校的课、比赛、不断接触和学习新的东西，因此没什么机会静下心来好好整理、记录我学到的东西，也就没有办法一并记下我对某些问题的理解和思考。 之前一度认为，“有写博客文章的时间，还不如好好学点新的东西”。但是自从领悟到我和舍友之间记忆力和知识熟练程度的差距之后，终于肯下定决心好好写自己的博客了——我比不上他们，我真的不是那种过目不忘的人，所以只能通过不断的复习和总结才能勉强记住些东西。 有人说，初学者是“什么都不会，同时自己不知道自己会什么”，稍有学识的普通人是“自己会些东西，但是自己觉得自己会的很多”，而大神则是“自己会很多东西，但是自己觉得自己学的不多而且不知道自己已经会了什么”。 可能我还是初学者吧。 git push 反复输密码很烦？有的时候可能会遇到一种极端情况：假设你要编写脚本，比如：自动化运维脚本。其中涉及到一些对 git 仓库的操作，而且需要密码，比如：在自动脚本中让部署机器拉取私有仓库，或是让部署机器将构建后的代码使用某个 github 账号推送到某个 git 仓库。这个时候需要用户手动输入用户名和密码，但是我们往往不能手动输入——比如公用的 docker build machine，根本不允许用户在构建过程中进行交互。","date_published":"2019-07-02T06:30:00.000Z","tags":["自由探索","完成编写","小tricks","笔记"]},{"id":"https://zhouweitong3.github.io/2019/06/28/006-linux-windows-tricks-01/","url":"https://zhouweitong3.github.io/2019/06/28/006-linux-windows-tricks-01/","title":"Linux & Windows 小技巧（1）","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《三色绘恋》 游戏背景图</p>\n<p>最近又学到了一些零零碎碎的 Linux、Windows 命令，和一些可能今后会用得着的小技巧，怕自己忘记，所以把它们写在博客里面提醒一下自己，免得到时候再花费大量时间去百度、Google 找文章。</p>\n<h2 id=\"Linux- 下查看进程树？\"><a href=\"#Linux- 下查看进程树？\" class=\"headerlink\" title=\"Linux 下查看进程树？\"></a>Linux 下查看进程树？</h2><p>查看进程有好几种方式，<code>top</code>、<code>htop</code> 这种可视化的，还有 <code>ps</code> 这种纯文本输出的程序都可以做到。但是如果想要查看某一进程的父进程或者子进程 PID 该怎么办？可以借助另一个程序，<code>pstree</code>。参数很灵活，可以根据需要启用或关闭。程序截图如下：</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411152055083.png\" alt=\"image-20210411152055083\"></p>\n<h2 id=\"WinHex- 的替代品？\"><a href=\"#WinHex- 的替代品？\" class=\"headerlink\" title=\"WinHex 的替代品？\"></a>WinHex 的替代品？</h2><p>WinHex 是很强大的一个二进制文件查看和编辑工具（尤其是做 CTF 杂项题的时候 :）。虽然说现在全网随便搜搜就有破解版（Cracked Version）可以用，但是多了解几个 WinHex 的替代品，有备无患。</p>\n<h3 id=\"EditPlus\"><a href=\"#EditPlus\" class=\"headerlink\" title=\"EditPlus\"></a>EditPlus</h3><p>说起来很巧，这个神器还是我在学校图书馆电脑上发现的。本来以为这东西只能编辑编辑文本，做 Notepad++ 的小弟，没想到这还能打开二进制文件查看 16 进制数据（emmm，不能编辑），而且…还支持 Windows ARM。</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411151916081.png\" alt=\"image-20210411151916081\"></p>\n<p>打开文件之后，点击 Edit-&gt;Hex Viewer 即可查看十六进制数据。</p>\n<span id=\"more\"></span>\n\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411151927139.png\" alt=\"image-20210411151927139\"></p>\n<p>只不过这个并不是免费软件，但是注册码很容易搜到，<a href=\"https://blog.csdn.net/anhldd/article/details/85088715\">点击这里</a>。</p>\n<h3 id=\"GHex\"><a href=\"#GHex\" class=\"headerlink\" title=\"GHex\"></a>GHex</h3><p>上面提到的 WinHex 和 EditPlus 都仅限于 Windows 系统。Linux 和 Mac 平台下虽然可以使用 <code>Vim + 插件 </code> 或是 <code>Visual Studio Code + 插件 </code> 来实现查看（甚至是编辑）二进制数据，但是有不少使用者吐槽体验不好，设置复杂。因此多个 Linux 包管理器的软件源中包含的开源工具 GHex 便成为了首选。</p>\n<p>安装非常简单，<code>sudo apt-get install ghex</code></p>\n<p>界面展示如下：</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411151939864.png\" alt=\"image-20210411151939864\"></p>\n<h3 id=\"010Editor\"><a href=\"#010Editor\" class=\"headerlink\" title=\"010Editor\"></a>010Editor</h3><p>010Editor 也是一款收费软件，正版价格在 130 USD （每年）左右，且不提供中文语言界面。它的特点是可以载入预定义的文件格式模板（*.bt，即 Binary Template）。现如今已有不少用户向 010Editor 贡献了常见二进制文件的格式模板，可以方便的一键下载安装。</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411152023454.png\" alt=\"image-20210411152023454\"></p>\n<p>以 PNG 文件格式为例。安装 PNG 文件对应的文件格式模板后，加载 PNG 文件，可以看到：</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411152036337.png\" alt=\"image-20210411152036337\"></p>\n<p>能够直接看到该文件格式各字段对应的值。双击即可对该字段的值进行修改。</p>\n<h2 id=\"怎么关掉 -Windows- 的强制驱动程序签名认证？\"><a href=\"# 怎么关掉 -Windows- 的强制驱动程序签名认证？\" class=\"headerlink\" title=\"怎么关掉 Windows 的强制驱动程序签名认证？\"></a>怎么关掉 Windows 的强制驱动程序签名认证？</h2><p>一般来说，设备的驱动程序都会内含数字签名，防止操作系统开机时加载恶意制作的，或被程序等恶意修改的驱动程序。同时，微软公司也提供了一系列的通用驱动程序和 API，方便程序员开发和使用。</p>\n<p>但是有些时候我们需要自己开发驱动，又或是需要安装些特殊的、不经由官方发布的驱动（例如某些玩机达人针对某一 Android 手机修改的 Fastboot 驱动等）时，Windows 会自动拦截安装请求。强制将文件复制到 drivers 文件夹并注册又会引起系统蓝屏。这个时候常见的操作是在开机时按 F8，选择“高级启动”菜单中的“禁用驱动程序签名强制”，然后系统便可以正常启动并加载未签名的驱动程序。</p>\n<p>但是每次开机都需要按 F8 选择，不太方便。如果能默认“允许加载无数字签名的驱动程序“进行启动的话就好了。于是翻阅 BCD 文件，发现了下面这个参数：</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411151959773.png\" alt=\"image-20210411151959773\"></p>\n<p>上图中红色箭头标识的参数就是开启 Windows” 测试模式“的参数。当其值为 <code>Yes</code> 时，Windows 启动时自动进入测试模式，允许非官方的驱动程序的加载。而“无完整性检查”模式，允许无签名的驱动程序加载。</p>\n<p>测试模式启用时，桌面上会出现这样的水印：</p>\n<p><img src=\"/2019/06/28/006-linux-windows-tricks-01/image-20210411152011062.png\" alt=\"image-20210411152011062\"></p>\n<p>启用两种模式的命令很简单，管理员身份运行 cmd，输入如下命令即可：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bcdedit /set testsigning on</span><br><span class=\"line\">bcdedit /set nointegritychecks on</span><br></pre></td></tr></table></figure>\n\n<p>当然，关闭的话，以此类推：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">bcdedit /set testsigning off</span><br><span class=\"line\">bcdedit /set nointegritychecks off</span><br></pre></td></tr></table></figure>\n\n<p>注：Windows ”测试模式“与 Windows ”安全模式“类似，是 Windows 自身为了某些特定目的而设计的内置模式，和 Windows 内测版、评估版的”机密模式”（就是右下角有 Microsoft Confidential 水印的内测模式）和“评估模式”（就是微软官方的 180 天测试版系统）并不相同。</p>\n","content_text":"图源：《三色绘恋》 游戏背景图 最近又学到了一些零零碎碎的 Linux、Windows 命令，和一些可能今后会用得着的小技巧，怕自己忘记，所以把它们写在博客里面提醒一下自己，免得到时候再花费大量时间去百度、Google 找文章。 Linux 下查看进程树？查看进程有好几种方式，top、htop 这种可视化的，还有 ps 这种纯文本输出的程序都可以做到。但是如果想要查看某一进程的父进程或者子进程 PID 该怎么办？可以借助另一个程序，pstree。参数很灵活，可以根据需要启用或关闭。程序截图如下： WinHex 的替代品？WinHex 是很强大的一个二进制文件查看和编辑工具（尤其是做 CTF 杂项题的时候 :）。虽然说现在全网随便搜搜就有破解版（Cracked Version）可以用，但是多了解几个 WinHex 的替代品，有备无患。 EditPlus说起来很巧，这个神器还是我在学校图书馆电脑上发现的。本来以为这东西只能编辑编辑文本，做 Notepad++ 的小弟，没想到这还能打开二进制文件查看 16 进制数据（emmm，不能编辑），而且…还支持 Windows ARM。 打开文件之后，点击 Edit-&gt;Hex Viewer 即可查看十六进制数据。 只不过这个并不是免费软件，但是注册码很容易搜到，点击这里。 GHex上面提到的 WinHex 和 EditPlus 都仅限于 Windows 系统。Linux 和 Mac 平台下虽然可以使用 Vim + 插件 或是 Visual Studio Code + 插件 来实现查看（甚至是编辑）二进制数据，但是有不少使用者吐槽体验不好，设置复杂。因此多个 Linux 包管理器的软件源中包含的开源工具 GHex 便成为了首选。 安装非常简单，sudo apt-get install ghex 界面展示如下： 010Editor010Editor 也是一款收费软件，正版价格在 130 USD （每年）左右，且不提供中文语言界面。它的特点是可以载入预定义的文件格式模板（*.bt，即 Binary Template）。现如今已有不少用户向 010Editor 贡献了常见二进制文件的格式模板，可以方便的一键下载安装。 以 PNG 文件格式为例。安装 PNG 文件对应的文件格式模板后，加载 PNG 文件，可以看到： 能够直接看到该文件格式各字段对应的值。双击即可对该字段的值进行修改。 怎么关掉 Windows 的强制驱动程序签名认证？一般来说，设备的驱动程序都会内含数字签名，防止操作系统开机时加载恶意制作的，或被程序等恶意修改的驱动程序。同时，微软公司也提供了一系列的通用驱动程序和 API，方便程序员开发和使用。 但是有些时候我们需要自己开发驱动，又或是需要安装些特殊的、不经由官方发布的驱动（例如某些玩机达人针对某一 Android 手机修改的 Fastboot 驱动等）时，Windows 会自动拦截安装请求。强制将文件复制到 drivers 文件夹并注册又会引起系统蓝屏。这个时候常见的操作是在开机时按 F8，选择“高级启动”菜单中的“禁用驱动程序签名强制”，然后系统便可以正常启动并加载未签名的驱动程序。 但是每次开机都需要按 F8 选择，不太方便。如果能默认“允许加载无数字签名的驱动程序“进行启动的话就好了。于是翻阅 BCD 文件，发现了下面这个参数： 上图中红色箭头标识的参数就是开启 Windows” 测试模式“的参数。当其值为 Yes 时，Windows 启动时自动进入测试模式，允许非官方的驱动程序的加载。而“无完整性检查”模式，允许无签名的驱动程序加载。 测试模式启用时，桌面上会出现这样的水印： 启用两种模式的命令很简单，管理员身份运行 cmd，输入如下命令即可： 12bcdedit /set testsigning onbcdedit /set nointegritychecks on 当然，关闭的话，以此类推： 12bcdedit /set testsigning offbcdedit /set nointegritychecks off 注：Windows ”测试模式“与 Windows ”安全模式“类似，是 Windows 自身为了某些特定目的而设计的内置模式，和 Windows 内测版、评估版的”机密模式”（就是右下角有 Microsoft Confidential 水印的内测模式）和“评估模式”（就是微软官方的 180 天测试版系统）并不相同。","summary":"图源：《三色绘恋》 游戏背景图 最近又学到了一些零零碎碎的 Linux、Windows 命令，和一些可能今后会用得着的小技巧，怕自己忘记，所以把它们写在博客里面提醒一下自己，免得到时候再花费大量时间去百度、Google 找文章。 Linux 下查看进程树？查看进程有好几种方式，top、htop 这种可视化的，还有 ps 这种纯文本输出的程序都可以做到。但是如果想要查看某一进程的父进程或者子进程PID该怎么办？可以借助另一个程序，pstree。参数很灵活，可以根据需要启用或关闭。程序截图如下： WinHex 的替代品？WinHex是很强大的一个二进制文件查看和编辑工具（尤其是做 CTF 杂项题的时候 :）。虽然说现在全网随便搜搜就有破解版（Cracked Version）可以用，但是多了解几个 WinHex 的替代品，有备无患。 EditPlus说起来很巧，这个神器还是我在学校图书馆电脑上发现的。本来以为这东西只能编辑编辑文本，做 Notepad++ 的小弟，没想到这还能打开二进制文件查看16进制数据（emmm，不能编辑），而且…还支持 Windows ARM。 打开文件之后，点击 Edit-&gt;Hex Viewer 即可查看十六进制数据。","date_published":"2019-06-28T15:00:00.000Z","tags":["自由探索","完成编写","小tricks","笔记"]},{"id":"https://zhouweitong3.github.io/2019/06/18/013-ripping-training-basics-0/","url":"https://zhouweitong3.github.io/2019/06/18/013-ripping-training-basics-0/","title":"压制技术 A：光盘的种类、资源发布标注与常见名词解释","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：《终将成为你》BD-1 声优特典 背景图</p>\n<h2 id=\"常见光盘种类\"><a href=\"# 常见光盘种类\" class=\"headerlink\" title=\"常见光盘种类\"></a>常见光盘种类</h2><h3 id=\"CD\"><a href=\"#CD\" class=\"headerlink\" title=\"CD\"></a>CD</h3><p>Compact Disc，又叫做“小型镭射盘”、“激光唱片”，通过激光来读写数据。单层容量大概 700MB。其中一般存储的是音乐，但也有存储视频、相片、软件（多数是游戏）的 CD。常见分类如下：  </p>\n<ol>\n<li>按存储内容分类：<ul>\n<li>CD-DA: 音乐 CD</li>\n<li>CD-I: 交互式 CD（游戏 CD）</li>\n<li>VCD: 视频 CD</li>\n<li>CD+G: 带有专辑图片和歌词的音乐 CD</li>\n<li>Photo CD: 图片 CD</li>\n</ul>\n</li>\n<li>按读写情况分类：<ul>\n<li>CD-ROM: 只读光盘。光盘背面的凹槽为厂家印制。</li>\n<li>CD-R: 一次性写入光盘。 光盘背面的凹槽为刻录机烧制。</li>\n<li>CD-RW: 可读写光盘。</li>\n</ul>\n</li>\n</ol>\n<span id=\"more\"></span>\n\n<h3 id=\"DVD\"><a href=\"#DVD\" class=\"headerlink\" title=\"DVD\"></a>DVD</h3><p>Digital Video Disc，（高密度）数字视频光盘。也称作“数字多功能光盘”。单层容量大概 4.7GB。使用红色激光（650nm）来读写数据。其中一般存放的是视频。也有用于存放音乐和数据的 DVD。常见分类如下：</p>\n<ol>\n<li>按读写情况分类：<ul>\n<li>DVD-R: 一次性写入 DVD。</li>\n<li>DVD-RW: 可重复读写 DVD。</li>\n<li>DVD+R: DVD-R 的变种。</li>\n<li>DVD+RW: DVD-RW 的变种。</li>\n</ul>\n</li>\n<li>按数据类型分类：<ul>\n<li>DVD-Video: 视频 DVD</li>\n<li>DVD-Audio: 音频 DVD</li>\n<li>DVD-Multi: 多功能 DVD</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"BD\"><a href=\"#BD\" class=\"headerlink\" title=\"BD\"></a>BD</h3><p>Blue-ray Disc，蓝光光盘。单层容量大概 27GB。使用蓝紫色激光（405nm）来读写数据。其中一般存储的是视频。也有用于存放数据的 BD。常见分类如下：</p>\n<ol>\n<li>按容量大小分类：<ul>\n<li>BD-DL: 50GB 空间的 BD</li>\n<li>BD-XL TL: 三层 BD，存储空间 100GB</li>\n<li>BD-XL QL: 四层 BD，存储空间 128GB</li>\n</ul>\n</li>\n<li>按读写情况分类：<ul>\n<li>BD-R: 一次性写入 BD</li>\n<li>BD-RE: 可重复读写 BD</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"资源发布标注\"><a href=\"# 资源发布标注\" class=\"headerlink\" title=\"资源发布标注\"></a>资源发布标注 </h2><p> 这里列举一些各资源小组发布资源时常用的标识，并附带简单的解释。  </p>\n<h3 id=\"例一\"><a href=\"# 例一\" class=\"headerlink\" title=\"例一\"></a>例一</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[悠哈璃羽字幕社 &amp;LoliHouse] 五等分的新娘 / Go-toubun no Hanayome - 09 [WebRip 1080p HEVC-10bit AAC][简繁内封字幕]</span><br></pre></td></tr></table></figure>\n\n<p><code>[悠哈璃羽字幕社 &amp;LoliHouse]</code>: 字幕社与压制组的名称。如果是原盘发布，一般是购买人 / 自行购买小组 / 合并团购小组的名称。<br><code>五等分的新娘</code>: 番剧的中文名称。<br><code>Go-toubun no Hanayome</code>: 番剧的罗马音。<br><code>09</code>: 番剧的集数。<br><code>Web</code>: 压制素材的来源标识。  </p>\n<ul>\n<li>Web: 从在线播放网站（GYAO!/Netflix/Amazon 等）提取链接下载得到高清视频进行压制。</li>\n<li>BD: 从蓝光光碟提取的原 m2ts 视频进行压制。</li>\n<li>DVD: 从 DVD 光碟提取的 DAT 视频进行压制。</li>\n<li>TV：从 IPTV 流中截取的 ts 视频进行压制。</li>\n</ul>\n<p><code>Rip</code>: 指“将碟片中的数据转至硬盘上”这一过程，即压制。<br><code>1080</code>: 分辨率大小。<br><code>p</code>: 场扫描方式，这里是 progressive，即“逐行扫描”。<br><code>HEVC</code>: 指所用到的编码规范。AVC 与 H.264 等同，HEVC 与 H.265 等同。<br><code>10bit</code>: 指颜色位深。常见的位深有 8 位、10 位、12 位等。<br><code>AAC</code>: 指视频中音轨的音频编码。<br><code>内封字幕</code>: 指视频容器中带有字幕。相对之下的是“外挂字幕”，指字幕文件与视频文件分离的字幕类型。  </p>\n<h3 id=\"例二\"><a href=\"# 例二\" class=\"headerlink\" title=\"例二\"></a>例二</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Re：从零开始的异世界生活 Memory Snow][Re: Zero kara Hajimeru Isekai Seikatsu Memory Snow][Re: ゼロから始める異世界生活 Memory Snow][BDMV][1080p][OVA][JP][TQYSY]</span><br></pre></td></tr></table></figure>\n\n<p>与上面例一的区别部分列举如下：</p>\n<p><code>Re: ゼロから始める異世界生活 Memory Snow</code>：番剧的日语名称。</p>\n<p><code>BDMV</code>：指文件类型为蓝光光碟视频文件。</p>\n<p><code>OVA</code>：标识剧集类型。</p>\n<p><code>JP</code>：购买国家（光碟是 XX 国家版）。部分番剧会分美版和日版等。</p>\n<p>当然，标题的类型不止这些，这里只举出最常见的两种类型。其他文件类型（图片集、漫画杂志扫描件、轻小说扫描件、Live 现场、音乐专辑等）标题各有规范，这里就不举例了。</p>\n<h2 id=\"常见名词释义\"><a href=\"# 常见名词释义\" class=\"headerlink\" title=\"常见名词释义\"></a>常见名词释义</h2><p><code>Season</code>：季度</p>\n<p><code>Episode</code>：集</p>\n<p><code>Romaji</code>：罗马音</p>\n<p><code>Disc X</code>：光盘分盘销售编号</p>\n<p><code>SP</code>：特典</p>\n<p><code>OVA</code>：光盘发售动画</p>\n<p><code>RAW</code>：原生视频（不做画面修改和字幕添加）</p>\n<p><code>Track</code>：轨道（视频轨或音频轨）</p>\n<p><code>p/i</code>：场扫描方式（逐行扫描 / 隔行扫描）</p>\n<p><code>fps</code>：帧速率（25，30，24000/1001，30000/1001 较常见）</p>\n<p><code>5.1</code>：声道数（1，2，5.1，7.1 较常见）</p>\n<p><code>YUV420</code>：色彩空间（RGB-Rec.709，RGB-Rec.601，RGB-Rec.2020，YUV420，YUV422，YUV444，GRAY 较常见）</p>\n<p><code>副音轨</code>：指光盘附带的，和画面同步进行的声优 / 导演 / 编剧评论和访谈音轨</p>\n<p><code>NCOP/NCED</code>：没有制作人员名单、字幕等遮挡的 OP 和 ED 部分</p>\n<p><code>码率</code>：单位时间内画面包含的数据位数</p>\n<p><code>Chapter</code>：章节，某些 BD 中包含视频章节点，和迅速跳过 OP、ED，标识剧情转折等</p>\n<p><code>Scan</code>：扫描，特指扫描光盘喷绘、光盘盒包装、附带设定集等</p>\n<p><code>BDBOX</code>：盒装 BD，有时也指最终发售的、一次性包含所有分销光盘的典藏盒装 BD</p>\n","content_text":"图源：《终将成为你》BD-1 声优特典 背景图 常见光盘种类CDCompact Disc，又叫做“小型镭射盘”、“激光唱片”，通过激光来读写数据。单层容量大概 700MB。其中一般存储的是音乐，但也有存储视频、相片、软件（多数是游戏）的 CD。常见分类如下： 按存储内容分类： CD-DA: 音乐 CD CD-I: 交互式 CD（游戏 CD） VCD: 视频 CD CD+G: 带有专辑图片和歌词的音乐 CD Photo CD: 图片 CD 按读写情况分类： CD-ROM: 只读光盘。光盘背面的凹槽为厂家印制。 CD-R: 一次性写入光盘。 光盘背面的凹槽为刻录机烧制。 CD-RW: 可读写光盘。 DVDDigital Video Disc，（高密度）数字视频光盘。也称作“数字多功能光盘”。单层容量大概 4.7GB。使用红色激光（650nm）来读写数据。其中一般存放的是视频。也有用于存放音乐和数据的 DVD。常见分类如下： 按读写情况分类： DVD-R: 一次性写入 DVD。 DVD-RW: 可重复读写 DVD。 DVD+R: DVD-R 的变种。 DVD+RW: DVD-RW 的变种。 按数据类型分类： DVD-Video: 视频 DVD DVD-Audio: 音频 DVD DVD-Multi: 多功能 DVD BDBlue-ray Disc，蓝光光盘。单层容量大概 27GB。使用蓝紫色激光（405nm）来读写数据。其中一般存储的是视频。也有用于存放数据的 BD。常见分类如下： 按容量大小分类： BD-DL: 50GB 空间的 BD BD-XL TL: 三层 BD，存储空间 100GB BD-XL QL: 四层 BD，存储空间 128GB 按读写情况分类： BD-R: 一次性写入 BD BD-RE: 可重复读写 BD 资源发布标注 这里列举一些各资源小组发布资源时常用的标识，并附带简单的解释。 例一1[悠哈璃羽字幕社 &amp;LoliHouse] 五等分的新娘 / Go-toubun no Hanayome - 09 [WebRip 1080p HEVC-10bit AAC][简繁内封字幕] [悠哈璃羽字幕社 &amp;LoliHouse]: 字幕社与压制组的名称。如果是原盘发布，一般是购买人 / 自行购买小组 / 合并团购小组的名称。五等分的新娘: 番剧的中文名称。Go-toubun no Hanayome: 番剧的罗马音。09: 番剧的集数。Web: 压制素材的来源标识。 Web: 从在线播放网站（GYAO!/Netflix/Amazon 等）提取链接下载得到高清视频进行压制。 BD: 从蓝光光碟提取的原 m2ts 视频进行压制。 DVD: 从 DVD 光碟提取的 DAT 视频进行压制。 TV：从 IPTV 流中截取的 ts 视频进行压制。 Rip: 指“将碟片中的数据转至硬盘上”这一过程，即压制。1080: 分辨率大小。p: 场扫描方式，这里是 progressive，即“逐行扫描”。HEVC: 指所用到的编码规范。AVC 与 H.264 等同，HEVC 与 H.265 等同。10bit: 指颜色位深。常见的位深有 8 位、10 位、12 位等。AAC: 指视频中音轨的音频编码。内封字幕: 指视频容器中带有字幕。相对之下的是“外挂字幕”，指字幕文件与视频文件分离的字幕类型。 例二1[Re：从零开始的异世界生活 Memory Snow][Re: Zero kara Hajimeru Isekai Seikatsu Memory Snow][Re: ゼロから始める異世界生活 Memory Snow][BDMV][1080p][OVA][JP][TQYSY] 与上面例一的区别部分列举如下： Re: ゼロから始める異世界生活 Memory Snow：番剧的日语名称。 BDMV：指文件类型为蓝光光碟视频文件。 OVA：标识剧集类型。 JP：购买国家（光碟是 XX 国家版）。部分番剧会分美版和日版等。 当然，标题的类型不止这些，这里只举出最常见的两种类型。其他文件类型（图片集、漫画杂志扫描件、轻小说扫描件、Live 现场、音乐专辑等）标题各有规范，这里就不举例了。 常见名词释义Season：季度 Episode：集 Romaji：罗马音 Disc X：光盘分盘销售编号 SP：特典 OVA：光盘发售动画 RAW：原生视频（不做画面修改和字幕添加） Track：轨道（视频轨或音频轨） p/i：场扫描方式（逐行扫描 / 隔行扫描） fps：帧速率（25，30，24000/1001，30000/1001 较常见） 5.1：声道数（1，2，5.1，7.1 较常见） YUV420：色彩空间（RGB-Rec.709，RGB-Rec.601，RGB-Rec.2020，YUV420，YUV422，YUV444，GRAY 较常见） 副音轨：指光盘附带的，和画面同步进行的声优 / 导演 / 编剧评论和访谈音轨 NCOP/NCED：没有制作人员名单、字幕等遮挡的 OP 和 ED 部分 码率：单位时间内画面包含的数据位数 Chapter：章节，某些 BD 中包含视频章节点，和迅速跳过 OP、ED，标识剧情转折等 Scan：扫描，特指扫描光盘喷绘、光盘盒包装、附带设定集等 BDBOX：盒装 BD，有时也指最终发售的、一次性包含所有分销光盘的典藏盒装 BD","summary":"图源：《终将成为你》BD-1 声优特典 背景图 常见光盘种类CDCompact Disc，又叫做“小型镭射盘”、“激光唱片”，通过激光来读写数据。单层容量大概 700MB。其中一般存储的是音乐，但也有存储视频、相片、软件（多数是游戏）的 CD。常见分类如下： 按存储内容分类： CD-DA: 音乐 CD CD-I: 交互式 CD（游戏CD） VCD: 视频 CD CD+G: 带有专辑图片和歌词的音乐 CD Photo CD: 图片 CD 按读写情况分类： CD-ROM: 只读光盘。光盘背面的凹槽为厂家印制。 CD-R: 一次性写入光盘。 光盘背面的凹槽为刻录机烧制。 CD-RW: 可读写光盘。","date_published":"2019-06-18T04:00:00.000Z","tags":["媒体技术","完成编写","笔记","压制技术"]},{"id":"https://zhouweitong3.github.io/2019/06/05/017-rctf-2019-misc-disk-writup/","url":"https://zhouweitong3.github.io/2019/06/05/017-rctf-2019-misc-disk-writup/","title":"RCTF 2019 杂项 Disk WriteUp","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p> 图源：《明日方舟》游戏背景 龙门之夜 </p>\n<p> 我又来随便糊一篇文章了。</p>\n<p> 题目设定如下：</p>\n<blockquote>\n<p>An otaku used VeraCrypt to encrypt his favorites.</p>\n<p>Password: <code>rctf</code></p>\n<p>Flag format: <code>rctf&#123;a-zA-Z0-9_&#125;</code></p>\n</blockquote>\n<p> 题目给的提示十分简单。于是准备 VeraCrypt，开始解题。</p>\n<h3 id=\"找前半段 Flag\"><a href=\"# 找前半段 Flag\" class=\"headerlink\" title=\"找前半段 Flag\"></a> 找前半段 Flag</h3><p> 首先下载题目附件，得到 rctf-disk.zip，解压得到 encrypt.vmdk。因为无法确定 vmdk 是 VeraCrypt 加密完的虚拟硬盘文件随便改了个格式，还是存储了 VeraCrypt 加密后虚拟磁盘文件的虚拟磁盘（这话真的超级绕 hhh），因此先尝试使用 7zip 打开该文件。</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411162623460.png\" alt=\"7zip 可以成功打开\"></p>\n<span id=\"more\"></span>\n\n<p> 说明外层的 vmdk 只是容器，并没有加密。将 0.fat 解压出来，再次尝试用 7zip 打开，报错，说明 vmdk 中包含的这个 FAT32 分区被加密了。使用 WinHex 载入这个文件可以看到：</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411162703195.png\" alt=\"前半段 Flag\"></p>\n<p> 这样我们就得到了前半段 Flag，为：<code>rctf&#123;unseCure_quick_form4t_vo1ume</code></p>\n<h3 id=\"找后半段 Flag\"><a href=\"# 找后半段 Flag\" class=\"headerlink\" title=\"找后半段 Flag\"></a> 找后半段 Flag</h3><p> 使用题目中所给的 VeraCrypt 密码对 0.fat 文件进行解密并加载，发现加载成功，为常规卷，加密类型为 AES。</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411162724851.png\" alt=\"成功加载加密盘\"></p>\n<p> 访问该磁盘，文件如下：</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411162905636.png\" alt=\"加密盘内文件\"></p>\n<p> 注意左侧文件的文件名 <code>70056639_useless_file_for_ctf_just_ignore_it.jpg</code>，说明其不包含解题的有效信息。于是打开 <code>password.txt</code>，文件内容为：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Password 2: RCTF2019</span><br><span class=\"line\">You&#x27;re late... So sad</span><br></pre></td></tr></table></figure>\n\n<p> 将此加密盘卸载，使用得到的第二个密码再次加载，加载成功。加密方式是 AES，但是注意该分区是隐藏分区。</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411162942168.png\" alt=\"第二次加载成功\"></p>\n<p> 由于是隐藏分区所以无法直接访问。因此使用 WinHex 载入磁盘，提示无法自动检测分区格式后选择“分区无格式”，并查看该分区扇区数据（DiskGenius 查看磁盘扇区数据也可以）。</p>\n<p><img src=\"/2019/06/05/017-rctf-2019-misc-disk-writup/image-20210411163028809.png\" alt=\"后半段 Flag\"></p>\n<p> 得到后半段 Flag：<code>_and_corrupted__1nner_v0lume&#125;</code></p>\n<p> 拼接后得到完整的 Flag：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">rctf&#123;unseCure_quick_form4t_vo1ume_and_corrupted_1nner_v0lume&#125;</span><br></pre></td></tr></table></figure>\n","content_text":"图源：《明日方舟》游戏背景 龙门之夜 我又来随便糊一篇文章了。 题目设定如下： An otaku used VeraCrypt to encrypt his favorites. Password: rctf Flag format: rctf&#123;a-zA-Z0-9_&#125; 题目给的提示十分简单。于是准备 VeraCrypt，开始解题。 找前半段 Flag 首先下载题目附件，得到 rctf-disk.zip，解压得到 encrypt.vmdk。因为无法确定 vmdk 是 VeraCrypt 加密完的虚拟硬盘文件随便改了个格式，还是存储了 VeraCrypt 加密后虚拟磁盘文件的虚拟磁盘（这话真的超级绕 hhh），因此先尝试使用 7zip 打开该文件。 说明外层的 vmdk 只是容器，并没有加密。将 0.fat 解压出来，再次尝试用 7zip 打开，报错，说明 vmdk 中包含的这个 FAT32 分区被加密了。使用 WinHex 载入这个文件可以看到： 这样我们就得到了前半段 Flag，为：rctf&#123;unseCure_quick_form4t_vo1ume 找后半段 Flag 使用题目中所给的 VeraCrypt 密码对 0.fat 文件进行解密并加载，发现加载成功，为常规卷，加密类型为 AES。 访问该磁盘，文件如下： 注意左侧文件的文件名 70056639_useless_file_for_ctf_just_ignore_it.jpg，说明其不包含解题的有效信息。于是打开 password.txt，文件内容为： 12Password 2: RCTF2019You&#x27;re late... So sad 将此加密盘卸载，使用得到的第二个密码再次加载，加载成功。加密方式是 AES，但是注意该分区是隐藏分区。 由于是隐藏分区所以无法直接访问。因此使用 WinHex 载入磁盘，提示无法自动检测分区格式后选择“分区无格式”，并查看该分区扇区数据（DiskGenius 查看磁盘扇区数据也可以）。 得到后半段 Flag：_and_corrupted__1nner_v0lume&#125; 拼接后得到完整的 Flag： 1rctf&#123;unseCure_quick_form4t_vo1ume_and_corrupted_1nner_v0lume&#125;","summary":"图源：《明日方舟》游戏背景 龙门之夜 我又来随便糊一篇文章了。 题目设定如下： An otaku used VeraCrypt to encrypt his favorites. Password: rctf Flag format: rctf&#123;a-zA-Z0-9_&#125; 题目给的提示十分简单。于是准备 VeraCrypt，开始解题。 找前半段Flag首先下载题目附件，得到 rctf-disk.zip，解压得到 encrypt.vmdk。因为无法确定 vmdk 是 VeraCrypt 加密完的虚拟硬盘文件随便改了个格式，还是存储了 VeraCrypt 加密后虚拟磁盘文件的虚拟磁盘（这话真的超级绕hhh），因此先尝试使用 7zip 打开该文件。","date_published":"2019-06-05T04:00:00.000Z","tags":["网络安全","完成编写","CTF","WriteUp"]},{"id":"https://zhouweitong3.github.io/2019/04/07/016-xihuctf-misc2-writeup/","url":"https://zhouweitong3.github.io/2019/04/07/016-xihuctf-misc2-writeup/","title":"西湖论剑预选赛 Misc 第二题 Write-UP","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：“西湖论剑”线上赛主页</p>\n<p>所以说，近期铺天盖地宣传的“西湖论剑”网络安全技能赛预选已经结束了。在这里随便糊一篇文章（也是我第一次写 Write-Up 文章），就聊聊杂项最先放出的那个第二题的解法。  </p>\n<p>首先拿到题，解压，发现里面有“题目描述”，先看描述，是这么写的：  </p>\n<p><strong>我们截获了一些 IP 数据报，发现报文头中的 TTL 值特别可疑，怀疑是通信方嵌入了数据到 TTL，我们将这些 TTL 值提取了出来，你能看出什么端倪吗？</strong></p>\n<p>然后看给出的另一个文件，<code>ttl.txt</code>，里面的内容是这样的：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411163821143.png\" alt=\"image-20210411163821143\"></p>\n<p>不难发现 TTL 值只有 $63$，$127$，$191$，$255$ 四种，都是 $2$ 的某次幂 $-1$ 的值。于是将这四个数都转换成二进制，得到 $111111_2$、$1111111_2$、$10111111_2$、$11111111_2$ 四个二进制数。从后面两个数字可以观察到二进制数的开头两位似乎有关系。又因为 TTL 值为一个 8 位整数，进行合理猜想，不妨将不足 8 位的二进制数开头补 0，变为 8 位后再取开头两位。即：$00111111_2$、$01111111_2$、$10111111_2$、$11111111_2$ 提取开头两位为：$00_2$、$01_2$、$10_2$、$11_2$，恰好为全排列，可以用于数据的存储。  </p>\n<p>这样每组两个比特，四组就可以组成一个字节。博客园上也有文章提到了这种数据隐藏方式（<a href=\"https://www.cnblogs.com/k1two2/p/5170213.html\">点击这里</a>）。  </p>\n<span id=\"more\"></span>\n\n<p>随后编写脚本，将这些数据进行处理并将得到的二进制数据转为十六进制明文。Python 脚本代码如下：（假设输入文件为<code>ttl.txt</code>，输出文件为<code>ttl_res.txt</code>)  </p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">infile = <span class=\"built_in\">open</span>(<span class=\"string\">&quot;ttl.txt&quot;</span>, <span class=\"string\">&quot;r&quot;</span>)</span><br><span class=\"line\">outfile = <span class=\"built_in\">open</span>(<span class=\"string\">&quot;ttl_res.txt&quot;</span>, <span class=\"string\">&quot;w&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">ascii_data = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\">num = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">295376</span>):</span><br><span class=\"line\">    tmp = infile.readline();</span><br><span class=\"line\">    tmp = tmp[<span class=\"number\">4</span>:<span class=\"built_in\">len</span>(tmp)-<span class=\"number\">1</span>]</span><br><span class=\"line\">    bin_data = <span class=\"built_in\">bin</span>(<span class=\"built_in\">int</span>(tmp))[<span class=\"number\">2</span>:]</span><br><span class=\"line\">    bin_len = <span class=\"built_in\">len</span>(bin_data)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> bin_len != <span class=\"number\">8</span>:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> j <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">8</span>-bin_len):</span><br><span class=\"line\">            bin_data = <span class=\"string\">&quot;0&quot;</span> + bin_data</span><br><span class=\"line\">    bin_val = bin_data[:<span class=\"number\">2</span>]</span><br><span class=\"line\">    ascii_data += bin_val</span><br><span class=\"line\">    num += <span class=\"number\">1</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> num == <span class=\"number\">4</span>:</span><br><span class=\"line\">        num = <span class=\"number\">0</span></span><br><span class=\"line\">        msg_hex = <span class=\"built_in\">hex</span>(<span class=\"built_in\">int</span>(ascii_data, <span class=\"number\">2</span>))[<span class=\"number\">2</span>:]</span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">len</span>(msg_hex) &lt; <span class=\"number\">2</span>:</span><br><span class=\"line\">            msg_hex = <span class=\"string\">&quot;0&quot;</span> + msg_hex</span><br><span class=\"line\">        outfile.write(msg_hex)</span><br><span class=\"line\">        ascii_data = <span class=\"string\">&quot;&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">infile.close()</span><br><span class=\"line\">outfile.close()</span><br></pre></td></tr></table></figure>\n\n<p>得到的文件是这个样子的：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411163935534.png\" alt=\"image-20210411163935534\"></p>\n<p>随后打开 WinHex，新建文件，将记事本中的内容全选、复制，粘贴到 WinHex 中，粘贴方式选择“ASCII Hex”，得到如下结果：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164018969.png\" alt=\"image-20210411164018969\"></p>\n<p>另存为 txt 文件，怀疑其仍为 16 进制数据。在 WinHex 中再次新建文件，重复上述操作，得到：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164115718.png\" alt=\"image-20210411164115718\"></p>\n<p><code>FF D8 FF E1</code>是 JPEG 文件头部标志，因此保存为 jpg。能从缩略图发现这是一个二维码，但是不完整。  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164141680.png\" alt=\"image-20210411164141680\"></p>\n<p>怀疑该文件中含有多张 JPEG 图片。搜索 JPEG 文件尾标志<code>FF D9</code>，结果如下：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164204548.png\" alt=\"image-20210411164204548\"></p>\n<p>将 6 个 JPEG 文件分别提取保存为新的文件，得：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164228812.png\" alt=\"image-20210411164228812\"></p>\n<p>分别是同一个二维码的不同部分。利用 Photoshop 拼接得到完整二维码：  </p>\n<p><img src=\"/2019/04/07/016-xihuctf-misc2-writeup/image-20210411164248559.png\" alt=\"image-20210411164248559\"></p>\n<p>二维码识别，扫描结果为：  </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">key:AutomaticKey cipher:fftu&#123;2028mb39927wn1f96o6e12z03j58002p&#125;</span><br></pre></td></tr></table></figure>\n\n<p>这并非 flag 原文而是密文。前面的 key 字段有两个含义：加密方式为 <strong>AutoKey Chiper</strong> 且加密密钥为 <code>AutomaticKey</code>。找到<a href=\"http://www.practicalcryptography.com/ciphers/classical-era/autokey/\"> 在线解密网站 </a> 进行解密（注意：这个网站只会将字母解密，因为符号和数字在密码加密前后不变，因此网站自动忽略了对它们的处理），用解密后的字母替换解密之前的字母得到真正的 flag：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">flag&#123;2028ab39927df1d96e6a12b03e58002e&#125;</span><br></pre></td></tr></table></figure>\n","content_text":"图源：“西湖论剑”线上赛主页 所以说，近期铺天盖地宣传的“西湖论剑”网络安全技能赛预选已经结束了。在这里随便糊一篇文章（也是我第一次写 Write-Up 文章），就聊聊杂项最先放出的那个第二题的解法。 首先拿到题，解压，发现里面有“题目描述”，先看描述，是这么写的： 我们截获了一些 IP 数据报，发现报文头中的 TTL 值特别可疑，怀疑是通信方嵌入了数据到 TTL，我们将这些 TTL 值提取了出来，你能看出什么端倪吗？ 然后看给出的另一个文件，ttl.txt，里面的内容是这样的： 不难发现 TTL 值只有 $63$，$127$，$191$，$255$ 四种，都是 $2$ 的某次幂 $-1$ 的值。于是将这四个数都转换成二进制，得到 $111111_2$、$1111111_2$、$10111111_2$、$11111111_2$ 四个二进制数。从后面两个数字可以观察到二进制数的开头两位似乎有关系。又因为 TTL 值为一个 8 位整数，进行合理猜想，不妨将不足 8 位的二进制数开头补 0，变为 8 位后再取开头两位。即：$00111111_2$、$01111111_2$、$10111111_2$、$11111111_2$ 提取开头两位为：$00_2$、$01_2$、$10_2$、$11_2$，恰好为全排列，可以用于数据的存储。 这样每组两个比特，四组就可以组成一个字节。博客园上也有文章提到了这种数据隐藏方式（点击这里）。 随后编写脚本，将这些数据进行处理并将得到的二进制数据转为十六进制明文。Python 脚本代码如下：（假设输入文件为ttl.txt，输出文件为ttl_res.txt) 123456789101112131415161718192021222324252627infile = open(&quot;ttl.txt&quot;, &quot;r&quot;)outfile = open(&quot;ttl_res.txt&quot;, &quot;w&quot;)ascii_data = &quot;&quot;num = 0for i in range(295376): tmp = infile.readline(); tmp = tmp[4:len(tmp)-1] bin_data = bin(int(tmp))[2:] bin_len = len(bin_data) if bin_len != 8: for j in range(8-bin_len): bin_data = &quot;0&quot; + bin_data bin_val = bin_data[:2] ascii_data += bin_val num += 1 if num == 4: num = 0 msg_hex = hex(int(ascii_data, 2))[2:] if len(msg_hex) &lt; 2: msg_hex = &quot;0&quot; + msg_hex outfile.write(msg_hex) ascii_data = &quot;&quot;infile.close()outfile.close() 得到的文件是这个样子的： 随后打开 WinHex，新建文件，将记事本中的内容全选、复制，粘贴到 WinHex 中，粘贴方式选择“ASCII Hex”，得到如下结果： 另存为 txt 文件，怀疑其仍为 16 进制数据。在 WinHex 中再次新建文件，重复上述操作，得到： FF D8 FF E1是 JPEG 文件头部标志，因此保存为 jpg。能从缩略图发现这是一个二维码，但是不完整。 怀疑该文件中含有多张 JPEG 图片。搜索 JPEG 文件尾标志FF D9，结果如下： 将 6 个 JPEG 文件分别提取保存为新的文件，得： 分别是同一个二维码的不同部分。利用 Photoshop 拼接得到完整二维码： 二维码识别，扫描结果为： 1key:AutomaticKey cipher:fftu&#123;2028mb39927wn1f96o6e12z03j58002p&#125; 这并非 flag 原文而是密文。前面的 key 字段有两个含义：加密方式为 AutoKey Chiper 且加密密钥为 AutomaticKey。找到 在线解密网站 进行解密（注意：这个网站只会将字母解密，因为符号和数字在密码加密前后不变，因此网站自动忽略了对它们的处理），用解密后的字母替换解密之前的字母得到真正的 flag： 1flag&#123;2028ab39927df1d96e6a12b03e58002e&#125;","summary":"图源：“西湖论剑”线上赛主页 所以说，近期铺天盖地宣传的“西湖论剑”网络安全技能赛预选已经结束了。在这里随便糊一篇文章（也是我第一次写Write-Up文章），就聊聊杂项最先放出的那个第二题的解法。 首先拿到题，解压，发现里面有“题目描述”，先看描述，是这么写的： 我们截获了一些IP数据报，发现报文头中的TTL值特别可疑，怀疑是通信方嵌入了数据到TTL，我们将这些TTL值提取了出来，你能看出什么端倪吗？ 然后看给出的另一个文件，ttl.txt，里面的内容是这样的： 不难发现TTL值只有 $63$，$127$，$191$，$255$ 四种，都是$2$的某次幂$-1$的值。于是将这四个数都转换成二进制，得到 $111111_2$、$1111111_2$、$10111111_2$、$11111111_2$ 四个二进制数。从后面两个数字可以观察到二进制数的开头两位似乎有关系。又因为TTL值为一个8位整数，进行合理猜想，不妨将不足8位的二进制数开头补0，变为8位后再取开头两位。即：$00111111_2$、$01111111_2$、$10111111_2$、$11111111_2$提取开头两位为：$00_2$、$01_2$、$10_2$、$11_2$，恰好为全排列，可以用于数据的存储。 这样每组两个比特，四组就可以组成一个字节。博客园上也有文章提到了这种数据隐藏方式（点击这里）。","date_published":"2019-04-07T10:08:18.000Z","tags":["网络安全","完成编写","CTF","WriteUp"]},{"id":"https://zhouweitong3.github.io/2019/02/13/009-bilibili-playlink-findings/","url":"https://zhouweitong3.github.io/2019/02/13/009-bilibili-playlink-findings/","title":"拜年祭启发的小小探索","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p>图源：Bilibili 2019 拜年祭 视频截图</p>\n<p>2019 年 2 月 4 日，一年一度的哔哩哔哩拜年祭如约而至。不得不说，今年的拜年祭在节目质量和形式上相较于前三年都有较大的提升。出于在电视上离线播放（即非网络电视，而是读取存储设备上的媒体文件）的需求，及家中的缓慢网速达不到 Bilibili 大会员 1080P+ 无卡顿播放的程度，我利用少量的空余时间对 Bilibili 高清视频的下载方式进行了简单实践，并在本文中进行简单总结。  </p>\n<h2 id=\"ID\"><a href=\"#ID\" class=\"headerlink\" title=\"ID\"></a>ID</h2><p>熟悉 B 站的用户应该都会了解到，B 站上的视频、音频、专栏文章、用户都是以唯一的 ID 进行标识的。以“【星尘原创】尘降【PV 付 /COP】”这个视频为例：其视频地址为：<code>https://www.bilibili.com/video/av4402328</code>，该视频所对应的音频的地址为：<code>https://www.bilibili.com/audio/au18065</code>，上传该视频的 UP 主的个人主页地址为：<code>https://space.bilibili.com/396194</code>。由此我们可以获取到以下类型的唯一 ID：</p>\n<ul>\n<li>视频 ID [Anime (Video) ID, aid/avid]：<code>4402328</code></li>\n<li>音频 ID [Audio ID, auid]：<code>18065</code></li>\n<li>用户 ID [User ID, uid]：<code>396194</code></li>\n</ul>\n<p>中包含的“av”、“au”、“cv”等均是为了区分 ID 的类型所用。在 Ajax 请求过程中各 ID 的值均为数字，不包含字符。  </p>\n<span id=\"more\"></span>\n\n<p>在上述例子中没有包括的、实际应用的 ID 类型还有（不完全）<sup>[1]</sup>：</p>\n<ul>\n<li>文章 ID [Content Viewing ID, cvid]</li>\n<li>内容 ID [Content ID, cid]</li>\n<li>通知 ID [Notification ID, nfid]</li>\n<li>会员 ID [Member ID, mid]</li>\n<li>标签 ID [Tag ID, tid]</li>\n<li>顺序 ID [Order ID, oid]</li>\n<li>分类 ID [Type ID, typeid]</li>\n<li>直播间 ID [Room ID, roomid]</li>\n<li>剧集 ID [Episode ID, epid]</li>\n</ul>\n<p>在下载视频的时候，起到主要作用的是 aid 和 cid 这两个唯一 ID。aid 和 cid 的区别是：aid 既可以指单个视频，也可以指含有多个视频的播放列表，而 cid 是视频级唯一的。</p>\n<h2 id=\"活动专题页面找 -aid\"><a href=\"# 活动专题页面找 -aid\" class=\"headerlink\" title=\"活动专题页面找 aid\"></a>活动专题页面找 aid</h2><p>Bilibili 为拜年祭活动设计了专门的活动页面。链接为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://www.bilibili.com/blackboard/bnj2019.html</span><br></pre></td></tr></table></figure>\n\n<p>播放拜年祭视频的小电视播放器作为 HTML5 组件放置在活动页面内。使用开发者工具查看视频统计数据的 HTTP 请求，可以发现该播放器播放视频对应的 aid。比如默认情况下播放页面均会展示视频的总播放量、回复数、投币数等。如下图：</p>\n<p><img src=\"/2019/02/13/009-bilibili-playlink-findings/image-20210411165922139.png\" alt=\"普通播放页面的统计信息\"></p>\n<p><img src=\"/2019/02/13/009-bilibili-playlink-findings/image-20210411165947103.png\" alt=\"拜年祭播放页面的统计信息\"></p>\n<p>不难发现，获取这些统计信息所请求的链接地址（以拜年祭为例）是：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://api.bilibili.com/x/web-interface/archive/stat?aid=36570401</span><br></pre></td></tr></table></figure>\n\n<p>返回的 JSON 数据（格式化后）如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;code&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;message&quot;</span>: <span class=\"string\">&quot;0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;ttl&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;data&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;aid&quot;</span>: <span class=\"number\">36570401</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;view&quot;</span>: <span class=\"number\">34739455</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;danmaku&quot;</span>: <span class=\"number\">1328696</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;reply&quot;</span>: <span class=\"number\">195310</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;favorite&quot;</span>: <span class=\"number\">1299858</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;coin&quot;</span>: <span class=\"number\">1859584</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;share&quot;</span>: <span class=\"number\">300501</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;like&quot;</span>: <span class=\"number\">1465982</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;now_rank&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;his_rank&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;no_reprint&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;copyright&quot;</span>: <span class=\"number\">1</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>上面链接和 JSON 数据中“aid”均为视频对应的视频 ID。注：该链接实际上也是获取视频统计数据的 API 接口。在此处不对此链接进行进一步说明。</p>\n<p>由此我们得到了拜年祭视频的正常播放地址应为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://www.bilibili.com/video/av36570401/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"下载 1080P 及以下清晰度视频的办法\"><a href=\"# 下载 1080P 及以下清晰度视频的办法\" class=\"headerlink\" title=\"下载 1080P 及以下清晰度视频的办法\"></a>下载 1080P 及以下清晰度视频的办法 </h2><p> 最为简便的方法是，我们可以利用已有的视频下载网站进行下载。这里我们举两个例子。</p>\n<h3 id=\"唧唧下载站，分段法\"><a href=\"# 唧唧下载站，分段法\" class=\"headerlink\" title=\"唧唧下载站，分段法\"></a>唧唧下载站，分段法 </h3><p><a href=\"https://www.jijidown.com/\"> 唧唧视频下载站 </a> 也是一种下载视频的办法。它通过视频的热度高低来判断视频是否应预先解析和缓存在云端。较热门的视频可以直接从唧唧网站的服务器获取。较冷门的视频则可以通过客户端下载。客户端会尝试直接解析视频直连、修改 Referer 等进行分段下载然后合并。同时，该网站同时也拥有 MP3 转换服务，将视频中的音轨提取、转码后供用户下载。</p>\n<h3 id=\"ParseVideo，直链法\"><a href=\"#ParseVideo，直链法\" class=\"headerlink\" title=\"ParseVideo，直链法\"></a>ParseVideo，直链法</h3><p><a href=\"https://www.parsevideo.com/\">ParseVideo</a> 则不提供客户端和云端缓存。这个网站的作用是直接解析出对应视频、对应清晰度的完整视频的直链，获得的直链可以用下载工具直接下载。例如：2019 拜年祭中，第一部分“珠”的 1080P 清晰度完整视频直链如下：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://upos-hz-mirrorwcsu.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-208.mp4?ua=tvproj&amp;deadline=1550125016&amp;gen=playurl&amp;nbs=1&amp;oi=2501663261&amp;os=wcsu&amp;trid=c01282c601bb4b0cb444a9b53342fc2e&amp;uipk=5&amp;upsig=556e65a3992c1531227fb43bcb6705a3</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"视频地址从哪来？\"><a href=\"# 视频地址从哪来？\" class=\"headerlink\" title=\"视频地址从哪来？\"></a>视频地址从哪来？</h2><p>视频地址（参数的作用其实绝大部分都是鉴权和防盗链）可以从 Bilibili 的视频播放页获得。在加载视频前，HTML5 播放器会首先加载一个包含当前清晰度的视频链接的文件，名为 <code>playurl</code>。获取播放地址的完整链接为（登录状态下的 1080P+ 链接，Session MD5 部分隐去）：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://api.bilibili.com/x/player/playurl?avid=36570401&amp;cid=74633794&amp;qn=112&amp;type=&amp;otype=json&amp;fnver=0&amp;fnval=16&amp;session=4710f|sec|</span><br></pre></td></tr></table></figure>\n\n<p>得到的 JSON 数据（格式化并去除转义字符后）类似这样（部分参数含有隐私信息，因此隐去，隐去部分用 <code>|sec|</code> 标识）：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    <span class=\"attr\">&quot;code&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;message&quot;</span>: <span class=\"string\">&quot;0&quot;</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;ttl&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">    <span class=\"attr\">&quot;data&quot;</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">&quot;from&quot;</span>: <span class=\"string\">&quot;local&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;result&quot;</span>: <span class=\"string\">&quot;suee&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;message&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;quality&quot;</span>: <span class=\"number\">112</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;format&quot;</span>: <span class=\"string\">&quot;hdflv2&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;timelength&quot;</span>: <span class=\"number\">2961402</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;accept_format&quot;</span>: <span class=\"string\">&quot;hdflv2,flv,flv720,flv480,flv360&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;accept_description&quot;</span>: [<span class=\"string\">&quot; 高清 1080P+&quot;</span>, <span class=\"string\">&quot; 高清 1080P&quot;</span>, <span class=\"string\">&quot; 高清 720P&quot;</span>, <span class=\"string\">&quot; 清晰 480P&quot;</span>, <span class=\"string\">&quot; 流畅 360P&quot;</span>],</span><br><span class=\"line\">        <span class=\"attr\">&quot;accept_quality&quot;</span>: [<span class=\"number\">112</span>, <span class=\"number\">80</span>, <span class=\"number\">64</span>, <span class=\"number\">32</span>, <span class=\"number\">16</span>],</span><br><span class=\"line\">        <span class=\"attr\">&quot;video_codecid&quot;</span>: <span class=\"number\">7</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;seek_param&quot;</span>: <span class=\"string\">&quot;start&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;seek_type&quot;</span>: <span class=\"string\">&quot;offset&quot;</span>,</span><br><span class=\"line\">        <span class=\"attr\">&quot;dash&quot;</span>: &#123;</span><br><span class=\"line\">            <span class=\"attr\">&quot;duration&quot;</span>: <span class=\"number\">2961</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;minBufferTime&quot;</span>: <span class=\"number\">1.5</span>,</span><br><span class=\"line\">            <span class=\"attr\">&quot;video&quot;</span>: [&#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span>: <span class=\"number\">112</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;http://upos-hz-mirrorks3u.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-30112.m4s?e=ig8eux|sec|&amp;deadline=1550136700&amp;gen=playurl&amp;nbs=1&amp;oi=1885698042&amp;os=ks3u&amp;platform=pc&amp;trid=126ef7|sec|&amp;uipk=5&amp;upsig=c71526|sec|&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;backupUrl&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;bandwidth&quot;</span>: <span class=\"number\">5826637</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;mimeType&quot;</span>: <span class=\"string\">&quot;video/mp4&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecs&quot;</span>: <span class=\"string\">&quot;avc1.640028&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;width&quot;</span>: <span class=\"number\">1920</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;height&quot;</span>: <span class=\"number\">1080</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;frameRate&quot;</span>: <span class=\"string\">&quot;16000/672&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;sar&quot;</span>: <span class=\"string\">&quot;1:1&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;startWithSap&quot;</span>: <span class=\"number\">1</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;SegmentBase&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;Initialization&quot;</span>: <span class=\"string\">&quot;0-992&quot;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">&quot;indexRange&quot;</span>: <span class=\"string\">&quot;993-8128&quot;</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecid&quot;</span>: <span class=\"number\">7</span></span><br><span class=\"line\">            &#125;],</span><br><span class=\"line\">            <span class=\"attr\">&quot;audio&quot;</span>: [&#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span>: <span class=\"number\">30280</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;http://upos-hz-mirrorks3u.acgvideo.com/upgcxcode/94/37/74633794/74633794_nb1-1-30280.m4s?e=ig8eux|sec|&amp;deadline=1550136700&amp;gen=playurl&amp;nbs=1&amp;oi=1885698042&amp;os=ks3u&amp;platform=pc&amp;trid=126ef7|sec|&amp;uipk=5&amp;upsig=5f58ae|sec|&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;backupUrl&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;bandwidth&quot;</span>: <span class=\"number\">321706</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;mimeType&quot;</span>: <span class=\"string\">&quot;audio/mp4&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecs&quot;</span>: <span class=\"string\">&quot;mp4a.40.2&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;width&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;height&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;frameRate&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;sar&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;startWithSap&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;SegmentBase&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;Initialization&quot;</span>: <span class=\"string\">&quot;0-907&quot;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">&quot;indexRange&quot;</span>: <span class=\"string\">&quot;908-8055&quot;</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecid&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;, &#123;</span><br><span class=\"line\">                <span class=\"attr\">&quot;id&quot;</span>: <span class=\"number\">30216</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;baseUrl&quot;</span>: <span class=\"string\">&quot;http://upos-hz-mirrorcos.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-30216.m4s?um_deadline=1550136700&amp;platform=pc&amp;rate=0&amp;oi=1885698042&amp;um_sign=df1a58|sec|&amp;gen=playurl&amp;os=cos&amp;trid=126ef7|sec|&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;backupUrl&quot;</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;bandwidth&quot;</span>: <span class=\"number\">67238</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;mimeType&quot;</span>: <span class=\"string\">&quot;audio/mp4&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecs&quot;</span>: <span class=\"string\">&quot;mp4a.40.2&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;width&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;height&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;frameRate&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;sar&quot;</span>: <span class=\"string\">&quot;&quot;</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;startWithSap&quot;</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">                <span class=\"attr\">&quot;SegmentBase&quot;</span>: &#123;</span><br><span class=\"line\">                    <span class=\"attr\">&quot;Initialization&quot;</span>: <span class=\"string\">&quot;0-907&quot;</span>,</span><br><span class=\"line\">                    <span class=\"attr\">&quot;indexRange&quot;</span>: <span class=\"string\">&quot;908-8055&quot;</span></span><br><span class=\"line\">                &#125;,</span><br><span class=\"line\">                <span class=\"attr\">&quot;codecid&quot;</span>: <span class=\"number\">0</span></span><br><span class=\"line\">            &#125;]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>playurl 获取时各个参数的含义：</p>\n<ul>\n<li>avid，即视频 ID。cid，即该视频所对应的内容 ID。</li>\n<li>qn，视频质量代码。对应的是 JSON 格式中“accept_quality”这个 list 中的值。</li>\n<li>otype：数据的呈现形式。可以是 JSON 或 XML。</li>\n<li>type：用途不明。可能跟平台类型有关。</li>\n<li>fnver：用途不明。</li>\n<li>fnval：控制视频的格式。fnval 为 0 时是 FLV 格式，为 1 时是 MP4 格式，为 16 时是 DASH 序列。</li>\n</ul>\n<p>因此获取视频 ID 为 36570401（对应的内容 ID 为 74633794）的 1080P FLV 格式的播放地址（注意：不是直链，也不能直接播放，仅为小电视播放器能够解析的地址）并展示为 XML 格式的链接：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://api.bilibili.com/x/player/playurl?avid=36570401&amp;cid=74633794&amp;qn=80&amp;otype=xml&amp;fnval=0</span><br></pre></td></tr></table></figure>\n\n<p>以上结束了针对 playurl 的讨论。至于如何构造参数使得 playurl 包含的视频链接可供下载和播放，因为没有更深层的探究，所以此处不继续讨论。但是视频直链中包含“ua=tvproj”字样，又结合 Bilibili 具有 DLNA 投屏功能，可进行初步猜想：“直链”的参数构造应仿照了 App DLNA 投屏时，App 发送给 DLNA 终端的视频链接所附带的参数。</p>\n<h2 id=\"利用 -Android-App- 下载高清视频\"><a href=\"# 利用 -Android-App- 下载高清视频\" class=\"headerlink\" title=\"利用 Android App 下载高清视频\"></a>利用 Android App 下载高清视频</h2><p>Bilibili App 内部本身拥有缓存功能，虽然并非对所有视频开放（比如：受到版权保护只能够在线观看的番剧），但是已开放缓存的视频可以利用“缓存”本身实现下载。  </p>\n<p>Bilibili 安卓客户端默认的视频缓存位置为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/storage/emulated/0/Android/data/tv.danmaku.bili/download</span><br></pre></td></tr></table></figure>\n\n<p>该文件夹下包含着 App 缓存的所有视频文件。视频文件的存放位置为 [该视频的视频 ID]/[该视频的分 P 数]/lua.[视频格式].bili2api.[视频质量]/0.blv。例如，2019 拜年祭“珠”部分 1080P+ 缓存完成后的视频文件完整路径为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/storage/emulated/0/Android/data/tv.danmaku.bili/download/36570401/1/lua.hdflv2.bili2api.112/0.blv</span><br></pre></td></tr></table></figure>\n\n<p>已缓存完成视频的扩展名为 blv（Bilibili Video），未缓存完成的视频的扩展名为 bdl（Bilibili Download）。将已经缓存完毕的 blv 文件复制到其他位置，并改扩展名为 flv（根据“视频格式”进行判断）即可正常播放。</p>\n<p><img src=\"/2019/02/13/009-bilibili-playlink-findings/image-20210411170400912.png\" alt=\"成功提取后的视频文件\"></p>\n<h2 id=\"获取弹幕数据\"><a href=\"# 获取弹幕数据\" class=\"headerlink\" title=\"获取弹幕数据\"></a>获取弹幕数据 </h2><p> 网页前端获取弹幕数据的链接为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://api.bilibili.com/x/v1/dm/list.so?oid=74633794</span><br></pre></td></tr></table></figure>\n\n<p>此处 oid 的值即为对应视频 cid 的值。当然你也可以从 App 的缓存中提取弹幕数据。接上例，视频缓存对应的弹幕数据缓存文件完整路径为：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/storage/emulated/0/Android/data/tv.danmaku.bili/download/36570401/1/danmaku.xml</span><br></pre></td></tr></table></figure>\n\n<p>另外，缓存文件夹内包含的其他文件作用列举如下：</p>\n<ul>\n<li><code>entry.json</code> 保存缓存视频的基本信息和统计数据。</li>\n<li><code>index.json</code> 保存缓存视频的下载地址。</li>\n<li><code>0.blv.4m.sum</code> 保存缓存视频的字节大小。</li>\n</ul>\n<p>由于互联网上已有多篇对 xml 弹幕数据进行综合处理的文章，所以在此处不再进一步讨论弹幕数据的处理相关内容。</p>\n<h2 id=\"加密直播间的密码校验 -API\"><a href=\"# 加密直播间的密码校验 -API\" class=\"headerlink\" title=\"加密直播间的密码校验 API\"></a>加密直播间的密码校验 API</h2><p>这里直接给出 Bilibili 用于校验直播间密码的接口：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">https://api.live.bilibili.com/room/v1/Room/verify_room_pwd?room_id=roomid&amp;pwd=pwd</span><br></pre></td></tr></table></figure>\n\n<p>其中，<code>room_id</code> 参数为直播间的房间 ID，<code>pwd</code> 参数为直播间的密码。</p>\n<h2 id=\"参考链接\"><a href=\"# 参考链接\" class=\"headerlink\" title=\"参考链接\"></a>参考链接 </h2><p>[1] fython.&emsp;<a href=\"https://github.com/fython/BilibiliAPIDocs\">BilibiliAPIDocs [DB/OL]</a>&emsp;<em> 获取于 2019.2.14</em></p>\n","content_text":"图源：Bilibili 2019 拜年祭 视频截图 2019 年 2 月 4 日，一年一度的哔哩哔哩拜年祭如约而至。不得不说，今年的拜年祭在节目质量和形式上相较于前三年都有较大的提升。出于在电视上离线播放（即非网络电视，而是读取存储设备上的媒体文件）的需求，及家中的缓慢网速达不到 Bilibili 大会员 1080P+ 无卡顿播放的程度，我利用少量的空余时间对 Bilibili 高清视频的下载方式进行了简单实践，并在本文中进行简单总结。 ID熟悉 B 站的用户应该都会了解到，B 站上的视频、音频、专栏文章、用户都是以唯一的 ID 进行标识的。以“【星尘原创】尘降【PV 付 /COP】”这个视频为例：其视频地址为：https://www.bilibili.com/video/av4402328，该视频所对应的音频的地址为：https://www.bilibili.com/audio/au18065，上传该视频的 UP 主的个人主页地址为：https://space.bilibili.com/396194。由此我们可以获取到以下类型的唯一 ID： 视频 ID [Anime (Video) ID, aid/avid]：4402328 音频 ID [Audio ID, auid]：18065 用户 ID [User ID, uid]：396194 中包含的“av”、“au”、“cv”等均是为了区分 ID 的类型所用。在 Ajax 请求过程中各 ID 的值均为数字，不包含字符。 在上述例子中没有包括的、实际应用的 ID 类型还有（不完全）[1]： 文章 ID [Content Viewing ID, cvid] 内容 ID [Content ID, cid] 通知 ID [Notification ID, nfid] 会员 ID [Member ID, mid] 标签 ID [Tag ID, tid] 顺序 ID [Order ID, oid] 分类 ID [Type ID, typeid] 直播间 ID [Room ID, roomid] 剧集 ID [Episode ID, epid] 在下载视频的时候，起到主要作用的是 aid 和 cid 这两个唯一 ID。aid 和 cid 的区别是：aid 既可以指单个视频，也可以指含有多个视频的播放列表，而 cid 是视频级唯一的。 活动专题页面找 aidBilibili 为拜年祭活动设计了专门的活动页面。链接为： 1https://www.bilibili.com/blackboard/bnj2019.html 播放拜年祭视频的小电视播放器作为 HTML5 组件放置在活动页面内。使用开发者工具查看视频统计数据的 HTTP 请求，可以发现该播放器播放视频对应的 aid。比如默认情况下播放页面均会展示视频的总播放量、回复数、投币数等。如下图： 不难发现，获取这些统计信息所请求的链接地址（以拜年祭为例）是： 1https://api.bilibili.com/x/web-interface/archive/stat?aid=36570401 返回的 JSON 数据（格式化后）如下： 12345678910111213141516171819&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;0&quot;, &quot;ttl&quot;: 1, &quot;data&quot;: &#123; &quot;aid&quot;: 36570401, &quot;view&quot;: 34739455, &quot;danmaku&quot;: 1328696, &quot;reply&quot;: 195310, &quot;favorite&quot;: 1299858, &quot;coin&quot;: 1859584, &quot;share&quot;: 300501, &quot;like&quot;: 1465982, &quot;now_rank&quot;: 0, &quot;his_rank&quot;: 0, &quot;no_reprint&quot;: 0, &quot;copyright&quot;: 1 &#125;&#125; 上面链接和 JSON 数据中“aid”均为视频对应的视频 ID。注：该链接实际上也是获取视频统计数据的 API 接口。在此处不对此链接进行进一步说明。 由此我们得到了拜年祭视频的正常播放地址应为： 1http://www.bilibili.com/video/av36570401/ 下载 1080P 及以下清晰度视频的办法 最为简便的方法是，我们可以利用已有的视频下载网站进行下载。这里我们举两个例子。 唧唧下载站，分段法 唧唧视频下载站 也是一种下载视频的办法。它通过视频的热度高低来判断视频是否应预先解析和缓存在云端。较热门的视频可以直接从唧唧网站的服务器获取。较冷门的视频则可以通过客户端下载。客户端会尝试直接解析视频直连、修改 Referer 等进行分段下载然后合并。同时，该网站同时也拥有 MP3 转换服务，将视频中的音轨提取、转码后供用户下载。 ParseVideo，直链法ParseVideo 则不提供客户端和云端缓存。这个网站的作用是直接解析出对应视频、对应清晰度的完整视频的直链，获得的直链可以用下载工具直接下载。例如：2019 拜年祭中，第一部分“珠”的 1080P 清晰度完整视频直链如下： 1http://upos-hz-mirrorwcsu.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-208.mp4?ua=tvproj&amp;deadline=1550125016&amp;gen=playurl&amp;nbs=1&amp;oi=2501663261&amp;os=wcsu&amp;trid=c01282c601bb4b0cb444a9b53342fc2e&amp;uipk=5&amp;upsig=556e65a3992c1531227fb43bcb6705a3 视频地址从哪来？视频地址（参数的作用其实绝大部分都是鉴权和防盗链）可以从 Bilibili 的视频播放页获得。在加载视频前，HTML5 播放器会首先加载一个包含当前清晰度的视频链接的文件，名为 playurl。获取播放地址的完整链接为（登录状态下的 1080P+ 链接，Session MD5 部分隐去）： 1https://api.bilibili.com/x/player/playurl?avid=36570401&amp;cid=74633794&amp;qn=112&amp;type=&amp;otype=json&amp;fnver=0&amp;fnval=16&amp;session=4710f|sec| 得到的 JSON 数据（格式化并去除转义字符后）类似这样（部分参数含有隐私信息，因此隐去，隐去部分用 |sec| 标识）： 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576&#123; &quot;code&quot;: 0, &quot;message&quot;: &quot;0&quot;, &quot;ttl&quot;: 1, &quot;data&quot;: &#123; &quot;from&quot;: &quot;local&quot;, &quot;result&quot;: &quot;suee&quot;, &quot;message&quot;: &quot;&quot;, &quot;quality&quot;: 112, &quot;format&quot;: &quot;hdflv2&quot;, &quot;timelength&quot;: 2961402, &quot;accept_format&quot;: &quot;hdflv2,flv,flv720,flv480,flv360&quot;, &quot;accept_description&quot;: [&quot; 高清 1080P+&quot;, &quot; 高清 1080P&quot;, &quot; 高清 720P&quot;, &quot; 清晰 480P&quot;, &quot; 流畅 360P&quot;], &quot;accept_quality&quot;: [112, 80, 64, 32, 16], &quot;video_codecid&quot;: 7, &quot;seek_param&quot;: &quot;start&quot;, &quot;seek_type&quot;: &quot;offset&quot;, &quot;dash&quot;: &#123; &quot;duration&quot;: 2961, &quot;minBufferTime&quot;: 1.5, &quot;video&quot;: [&#123; &quot;id&quot;: 112, &quot;baseUrl&quot;: &quot;http://upos-hz-mirrorks3u.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-30112.m4s?e=ig8eux|sec|&amp;deadline=1550136700&amp;gen=playurl&amp;nbs=1&amp;oi=1885698042&amp;os=ks3u&amp;platform=pc&amp;trid=126ef7|sec|&amp;uipk=5&amp;upsig=c71526|sec|&quot;, &quot;backupUrl&quot;: null, &quot;bandwidth&quot;: 5826637, &quot;mimeType&quot;: &quot;video/mp4&quot;, &quot;codecs&quot;: &quot;avc1.640028&quot;, &quot;width&quot;: 1920, &quot;height&quot;: 1080, &quot;frameRate&quot;: &quot;16000/672&quot;, &quot;sar&quot;: &quot;1:1&quot;, &quot;startWithSap&quot;: 1, &quot;SegmentBase&quot;: &#123; &quot;Initialization&quot;: &quot;0-992&quot;, &quot;indexRange&quot;: &quot;993-8128&quot; &#125;, &quot;codecid&quot;: 7 &#125;], &quot;audio&quot;: [&#123; &quot;id&quot;: 30280, &quot;baseUrl&quot;: &quot;http://upos-hz-mirrorks3u.acgvideo.com/upgcxcode/94/37/74633794/74633794_nb1-1-30280.m4s?e=ig8eux|sec|&amp;deadline=1550136700&amp;gen=playurl&amp;nbs=1&amp;oi=1885698042&amp;os=ks3u&amp;platform=pc&amp;trid=126ef7|sec|&amp;uipk=5&amp;upsig=5f58ae|sec|&quot;, &quot;backupUrl&quot;: null, &quot;bandwidth&quot;: 321706, &quot;mimeType&quot;: &quot;audio/mp4&quot;, &quot;codecs&quot;: &quot;mp4a.40.2&quot;, &quot;width&quot;: 0, &quot;height&quot;: 0, &quot;frameRate&quot;: &quot;&quot;, &quot;sar&quot;: &quot;&quot;, &quot;startWithSap&quot;: 0, &quot;SegmentBase&quot;: &#123; &quot;Initialization&quot;: &quot;0-907&quot;, &quot;indexRange&quot;: &quot;908-8055&quot; &#125;, &quot;codecid&quot;: 0 &#125;, &#123; &quot;id&quot;: 30216, &quot;baseUrl&quot;: &quot;http://upos-hz-mirrorcos.acgvideo.com/upgcxcode/94/37/74633794/74633794-1-30216.m4s?um_deadline=1550136700&amp;platform=pc&amp;rate=0&amp;oi=1885698042&amp;um_sign=df1a58|sec|&amp;gen=playurl&amp;os=cos&amp;trid=126ef7|sec|&quot;, &quot;backupUrl&quot;: null, &quot;bandwidth&quot;: 67238, &quot;mimeType&quot;: &quot;audio/mp4&quot;, &quot;codecs&quot;: &quot;mp4a.40.2&quot;, &quot;width&quot;: 0, &quot;height&quot;: 0, &quot;frameRate&quot;: &quot;&quot;, &quot;sar&quot;: &quot;&quot;, &quot;startWithSap&quot;: 0, &quot;SegmentBase&quot;: &#123; &quot;Initialization&quot;: &quot;0-907&quot;, &quot;indexRange&quot;: &quot;908-8055&quot; &#125;, &quot;codecid&quot;: 0 &#125;] &#125; &#125;&#125; playurl 获取时各个参数的含义： avid，即视频 ID。cid，即该视频所对应的内容 ID。 qn，视频质量代码。对应的是 JSON 格式中“accept_quality”这个 list 中的值。 otype：数据的呈现形式。可以是 JSON 或 XML。 type：用途不明。可能跟平台类型有关。 fnver：用途不明。 fnval：控制视频的格式。fnval 为 0 时是 FLV 格式，为 1 时是 MP4 格式，为 16 时是 DASH 序列。 因此获取视频 ID 为 36570401（对应的内容 ID 为 74633794）的 1080P FLV 格式的播放地址（注意：不是直链，也不能直接播放，仅为小电视播放器能够解析的地址）并展示为 XML 格式的链接： 1https://api.bilibili.com/x/player/playurl?avid=36570401&amp;cid=74633794&amp;qn=80&amp;otype=xml&amp;fnval=0 以上结束了针对 playurl 的讨论。至于如何构造参数使得 playurl 包含的视频链接可供下载和播放，因为没有更深层的探究，所以此处不继续讨论。但是视频直链中包含“ua=tvproj”字样，又结合 Bilibili 具有 DLNA 投屏功能，可进行初步猜想：“直链”的参数构造应仿照了 App DLNA 投屏时，App 发送给 DLNA 终端的视频链接所附带的参数。 利用 Android App 下载高清视频Bilibili App 内部本身拥有缓存功能，虽然并非对所有视频开放（比如：受到版权保护只能够在线观看的番剧），但是已开放缓存的视频可以利用“缓存”本身实现下载。 Bilibili 安卓客户端默认的视频缓存位置为： 1/storage/emulated/0/Android/data/tv.danmaku.bili/download 该文件夹下包含着 App 缓存的所有视频文件。视频文件的存放位置为 [该视频的视频 ID]/[该视频的分 P 数]/lua.[视频格式].bili2api.[视频质量]/0.blv。例如，2019 拜年祭“珠”部分 1080P+ 缓存完成后的视频文件完整路径为： 1/storage/emulated/0/Android/data/tv.danmaku.bili/download/36570401/1/lua.hdflv2.bili2api.112/0.blv 已缓存完成视频的扩展名为 blv（Bilibili Video），未缓存完成的视频的扩展名为 bdl（Bilibili Download）。将已经缓存完毕的 blv 文件复制到其他位置，并改扩展名为 flv（根据“视频格式”进行判断）即可正常播放。 获取弹幕数据 网页前端获取弹幕数据的链接为： 1https://api.bilibili.com/x/v1/dm/list.so?oid=74633794 此处 oid 的值即为对应视频 cid 的值。当然你也可以从 App 的缓存中提取弹幕数据。接上例，视频缓存对应的弹幕数据缓存文件完整路径为： 1/storage/emulated/0/Android/data/tv.danmaku.bili/download/36570401/1/danmaku.xml 另外，缓存文件夹内包含的其他文件作用列举如下： entry.json 保存缓存视频的基本信息和统计数据。 index.json 保存缓存视频的下载地址。 0.blv.4m.sum 保存缓存视频的字节大小。 由于互联网上已有多篇对 xml 弹幕数据进行综合处理的文章，所以在此处不再进一步讨论弹幕数据的处理相关内容。 加密直播间的密码校验 API这里直接给出 Bilibili 用于校验直播间密码的接口： 1https://api.live.bilibili.com/room/v1/Room/verify_room_pwd?room_id=roomid&amp;pwd=pwd 其中，room_id 参数为直播间的房间 ID，pwd 参数为直播间的密码。 参考链接 [1] fython.&emsp;BilibiliAPIDocs [DB/OL]&emsp; 获取于 2019.2.14","summary":"图源：Bilibili 2019 拜年祭 视频截图 2019年2月4日，一年一度的哔哩哔哩拜年祭如约而至。不得不说，今年的拜年祭在节目质量和形式上相较于前三年都有较大的提升。出于在电视上离线播放（即非网络电视，而是读取存储设备上的媒体文件）的需求，及家中的缓慢网速达不到 Bilibili 大会员 1080P+ 无卡顿播放的程度，我利用少量的空余时间对 Bilibili 高清视频的下载方式进行了简单实践，并在本文中进行简单总结。 ID熟悉B站的用户应该都会了解到，B 站上的视频、音频、专栏文章、用户都是以唯一的 ID 进行标识的。以“【星尘原创】尘降【PV付/COP】”这个视频为例：其视频地址为：https://www.bilibili.com/video/av4402328，该视频所对应的音频的地址为：https://www.bilibili.com/audio/au18065，上传该视频的UP主的个人主页地址为：https://space.bilibili.com/396194。由此我们可以获取到以下类型的唯一 ID： 视频 ID [Anime (Video) ID, aid/avid]：4402328 音频 ID [Audio ID, auid]：18065 用户 ID [User ID, uid]：396194 中包含的“av”、“au”、“cv”等均是为了区分 ID 的类型所用。在 Ajax 请求过程中各 ID 的值均为数字，不包含字符。","date_published":"2019-02-13T07:31:00.000Z","tags":["自由探索","完成编写","小tricks"]},{"id":"https://zhouweitong3.github.io/2019/01/31/001-hello-world/","url":"https://zhouweitong3.github.io/2019/01/31/001-hello-world/","title":"你好，世界！","content_html":"<link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css\"><link rel=\"stylesheet\" type=\"text&#x2F;css\" href=\"https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.2.1/css/hint.min.css\"><p> 图源：创客贴 </p>\n<p> 经历了各种思考和尝试，包括：好的服务器太贵、好的云空间太贵；低价的 VPS 和云空间不是速度慢就是限并发限 Idle；域名太贵（But 最终还是买了）；找不到顺眼的主题；配置太麻烦；可用性达不到要求，等等。最终的最终，将这个静态小博客安放在了 Github 上。最近比较长的一段时间会陆陆续续把之前欠下的、想写的博文补上。  </p>\n<p> 顺便说一下，由于时间有限等多种因素，博文可能会写的很简略。如果您有幸阅读某一篇博文但却未能完全理解的话，充分利用搜索引擎和评论区可以事半功倍。<strong> 特别说明：文章在编写过程中将不开放评论功能。如您发现已编写完的文章中包含的错误，欢迎在评论区指出，谢谢。</strong>  </p>\n<p> 最后：</p>\n<center><h3> 欢迎访问！您的支持是我最大的动力。</h3></center>\n","content_text":"图源：创客贴 经历了各种思考和尝试，包括：好的服务器太贵、好的云空间太贵；低价的 VPS 和云空间不是速度慢就是限并发限 Idle；域名太贵（But 最终还是买了）；找不到顺眼的主题；配置太麻烦；可用性达不到要求，等等。最终的最终，将这个静态小博客安放在了 Github 上。最近比较长的一段时间会陆陆续续把之前欠下的、想写的博文补上。 顺便说一下，由于时间有限等多种因素，博文可能会写的很简略。如果您有幸阅读某一篇博文但却未能完全理解的话，充分利用搜索引擎和评论区可以事半功倍。 特别说明：文章在编写过程中将不开放评论功能。如您发现已编写完的文章中包含的错误，欢迎在评论区指出，谢谢。 最后： 欢迎访问！您的支持是我最大的动力。","summary":"图源：创客贴 经历了各种思考和尝试，包括：好的服务器太贵、好的云空间太贵；低价的 VPS 和云空间不是速度慢就是限并发限 Idle；域名太贵（But 最终还是买了）；找不到顺眼的主题；配置太麻烦；可用性达不到要求，等等。最终的最终，将这个静态小博客安放在了 Github 上。最近比较长的一段时间会陆陆续续把之前欠下的、想写的博文补上。 顺便说一下，由于时间有限等多种因素，博文可能会写的很简略。如果您有幸阅读某一篇博文但却未能完全理解的话，充分利用搜索引擎和评论区可以事半功倍。 特别说明：文章在编写过程中将不开放评论功能。如您发现已编写完的文章中包含的错误，欢迎在评论区指出，谢谢。 最后： 欢迎访问！您的支持是我最大的动力。","date_published":"2019-01-31T03:00:00.000Z","tags":["杂谈","完成编写"]}]}